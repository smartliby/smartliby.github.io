<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä»¥æ¢¦ä¸ºé©¬</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.flyfox.top/"/>
  <updated>2020-04-19T07:50:10.340Z</updated>
  <id>https://blog.flyfox.top/</id>
  
  <author>
    <name>James Lee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é€šè¿‡Travis CIè‡ªåŠ¨æ„å»ºé•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒåº“å’Œdockehub</title>
    <link href="https://blog.flyfox.top/2020/04/19/%E9%80%9A%E8%BF%87Travis-CI%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E5%BA%93%E5%92%8Cdockehub/"/>
    <id>https://blog.flyfox.top/2020/04/19/é€šè¿‡Travis-CIè‡ªåŠ¨æ„å»ºé•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒåº“å’Œdockehub/</id>
    <published>2020-04-19T06:57:23.000Z</published>
    <updated>2020-04-19T07:50:10.340Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®ä¹‹å‰æˆ‘å·²ç»å†™è¿‡ä¸€ç¯‡å…³äºé€šè¿‡é˜¿é‡Œäº‘é•œåƒåº“ä¸‹è½½gcr.ioé•œåƒçš„æ–‡ç« ï¼Œä½†æ˜¯è¯¥æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡éœ€è¦æ–°çš„é•œåƒéƒ½éœ€è¦åœ¨é˜¿é‡Œäº‘é•œåƒåº“æ‰‹åŠ¨åˆ›å»ºï¼Œå¤ªéº»çƒ¦äº†ï¼Œè¿™ç¯‡æ–‡ç« é€šè¿‡<strong>Travis CI</strong>å¯ä»¥è‡ªåŠ¨æ„å»ºé•œåƒåˆ°é˜¿é‡Œäº‘ï¼Œæ–¹ä¾¿å¥½ç”¨</p><a id="more"></a><h4 id="åˆ›å»ºgithubä»“åº“"><a href="#åˆ›å»ºgithubä»“åº“" class="headerlink" title="åˆ›å»ºgithubä»“åº“"></a>åˆ›å»ºgithubä»“åº“</h4><p>é¦–å…ˆç™»å½•githubåˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œåç§°è‡ªå®šä¹‰ï¼Œä»“åº“åŒ…å«å¦‚ä¸‹2ä¸ªæ–‡ä»¶ï¼š</p><p>img-list.txt å¤–ç½‘é•œåƒåˆ—è¡¨æ–‡ä»¶<br>.travis.yaml travisCIè‡ªåŠ¨æ„å»ºæ–‡ä»¶<br>ç¤ºä¾‹ä»“åº“ï¼š<a href="https://github.com/smartliby/pull-docker-images" target="_blank" rel="noopener">https://github.com/smartliby/pull-docker-images</a></p><p>.travis.yaml å†…å®¹å¦‚ä¸‹ï¼Œä¸»è¦ä»å›½å¤–é•œåƒä»“åº“pullé•œåƒï¼Œæ‰“tagï¼Œå¹¶pushåˆ°é˜¿é‡Œäº‘æˆ–dockerhub</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">language: bash</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  - docker</span><br><span class="line"></span><br><span class="line">env:</span><br><span class="line">  global:</span><br><span class="line">    # change the registry name and username/password to yourself&apos;s.</span><br><span class="line">    - DOCKER_HUB=smartliby</span><br><span class="line">    - ALI_REGISTRY=registry.cn-hangzhou.aliyuncs.com/smartliby</span><br><span class="line"></span><br><span class="line">before_script:</span><br><span class="line">  - echo &quot;$DOCKER_PASSWORD&quot; | docker login -u &quot;$DOCKER_USERNAME&quot; --password-stdin</span><br><span class="line">  - echo &quot;$ALI_PASSWORD&quot; | docker login &quot;$ALI_REGISTRY&quot; -u &quot;$ALI_USERNAME&quot; --password-stdin</span><br><span class="line"> </span><br><span class="line">script:</span><br><span class="line">  - echo &quot;start pull and retag and push&quot;</span><br><span class="line">  - |</span><br><span class="line">    for image in $(cat img-list.txt)</span><br><span class="line">    do</span><br><span class="line">      image_name=$&#123;image##*/&#125;</span><br><span class="line">      image_name=$&#123;image_name%@*&#125;</span><br><span class="line">      docker pull $image</span><br><span class="line">      docker tag $image $DOCKER_HUB/$image_name</span><br><span class="line">      echo $ALI_REGISTRY</span><br><span class="line">      docker tag $image $ALI_REGISTRY/$image_name</span><br><span class="line">    </span><br><span class="line">      # pushåˆ°dockerhub</span><br><span class="line">      docker push $DOCKER_HUB/$image_name</span><br><span class="line">      # pushåˆ°é˜¿é‡Œäº‘ä»“åº“</span><br><span class="line">      docker push $ALI_REGISTRY/$image_name</span><br><span class="line">    done</span><br></pre></td></tr></table></figure><p>.travis.yamlæ–‡ä»¶ç›‘æµ‹githubä»“åº“çš„ä»£ç å˜åŠ¨ï¼Œå½“æœ‰ä»£ç å˜åŠ¨æ—¶æ¯”å¦‚img-list.txtå†™å…¥æ–°çš„é•œåƒåˆ—è¡¨æ—¶å°†è§¦å‘tarvisçš„è‡ªåŠ¨æ„å»º<br>è¿™é‡Œéœ€è¦ç™»å½•é˜¿é‡Œäº‘æˆ–dockerhubæ‰èƒ½æ‰§è¡Œdocker pushæ“ä½œï¼Œå…¶ä¸­$ALI_USERNAMEè¿™ç±»å˜é‡åœ¨TravisCIç®¡ç†ç•Œé¢å®šä¹‰å¥½å³å¯ã€‚</p><h4 id="Travis-CIé…ç½®"><a href="#Travis-CIé…ç½®" class="headerlink" title="Travis CIé…ç½®"></a>Travis CIé…ç½®</h4><p>è®¿é—®traviså®˜ç½‘ï¼š <a href="https://www.travis-ci.comï¼Œ" target="_blank" rel="noopener">https://www.travis-ci.comï¼Œ</a> ä½¿ç”¨githubè´¦å·ç™»å½•ã€‚</p><p>å¼€å¯éœ€è¦è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºçš„ä»“åº“å¹¶è®¾ç½®$ALI_USERNAMEè¿™ç±»å˜é‡å³å¯</p><p><img src="/images/media/é€‰åŒº_085.png" alt></p><p>å½“å¯¹githubä»“åº“æ‰§è¡Œgit commitã€git pushæ“ä½œæ—¶å°†è‡ªåŠ¨è§¦å‘æ„å»ºï¼Œæ‰§è¡Œä»“åº“ä¸­çš„è„šæœ¬</p><p><img src="/images/media/é€‰åŒº_086.png" alt></p><p>ç™»å½•é˜¿é‡Œäº‘æˆ–dockerhubæŸ¥çœ‹ï¼Œimg-list.txt åˆ—è¡¨ä¸­çš„é•œåƒå·²ç»æˆåŠŸè¢«pushä¸Šæ¥</p><p><img src="/images/media/é€‰åŒº_087.png" alt></p><p><img src="/images/media/é€‰åŒº_088.png" alt></p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p>[1] <a href="https://blog.csdn.net/networken/article/details/84571373" target="_blank" rel="noopener">https://blog.csdn.net/networken/article/details/84571373</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®ä¹‹å‰æˆ‘å·²ç»å†™è¿‡ä¸€ç¯‡å…³äºé€šè¿‡é˜¿é‡Œäº‘é•œåƒåº“ä¸‹è½½gcr.ioé•œåƒçš„æ–‡ç« ï¼Œä½†æ˜¯è¯¥æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡éœ€è¦æ–°çš„é•œåƒéƒ½éœ€è¦åœ¨é˜¿é‡Œäº‘é•œåƒåº“æ‰‹åŠ¨åˆ›å»ºï¼Œå¤ªéº»çƒ¦äº†ï¼Œè¿™ç¯‡æ–‡ç« é€šè¿‡&lt;strong&gt;Travis CI&lt;/strong&gt;å¯ä»¥è‡ªåŠ¨æ„å»ºé•œåƒåˆ°é˜¿é‡Œäº‘ï¼Œæ–¹ä¾¿å¥½ç”¨&lt;/p&gt;
    
    </summary>
    
      <category term="k8s" scheme="https://blog.flyfox.top/categories/k8s/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="github" scheme="https://blog.flyfox.top/tags/github/"/>
    
      <category term="docker" scheme="https://blog.flyfox.top/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>miniKFå®‰è£…æ•™ç¨‹</title>
    <link href="https://blog.flyfox.top/2020/04/19/miniKF%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <id>https://blog.flyfox.top/2020/04/19/miniKFå®‰è£…æ•™ç¨‹/</id>
    <published>2020-04-19T06:09:31.000Z</published>
    <updated>2020-04-19T07:35:24.954Z</updated>
    
    <content type="html"><![CDATA[<p>MiniKF is a fast and easy way to get started with Kubeflow. With just a few clicks, you are up for experimentation, and for running complete Kubeflow Pipelines.</p><a id="more"></a><h4 id="ä¸‹è½½vagrant"><a href="#ä¸‹è½½vagrant" class="headerlink" title="ä¸‹è½½vagrant"></a>ä¸‹è½½vagrant</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://releases.hashicorp.com/vagrant/2.2.7/vagrant_2.2.7_x86_64.deb</span><br><span class="line">sudo dpkg -i vagrant_2.2.7_x86_64.deb</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-Virtual-Box"><a href="#å®‰è£…-Virtual-Box" class="headerlink" title="å®‰è£… Virtual Box"></a>å®‰è£… Virtual Box</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.virtualbox.org/virtualbox/6.1.6/virtualbox-6.1_6.1.6-137129~Ubuntu~bionic_amd64.deb</span><br><span class="line">sudo dpkg -i virtualbox-6.1_6.1.6-137129~Ubuntu~bionic_amd64.deb</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…MiniKF"><a href="#å®‰è£…MiniKF" class="headerlink" title="å®‰è£…MiniKF"></a>å®‰è£…MiniKF</h4><p>Open a terminal on your laptop, create a new directory, switch into it, and run the following commands to install MiniKF</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/miniKF/</span><br><span class="line">cd /data/miniKF/</span><br><span class="line">vagrant init arrikto/minikf</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure><p>æ•´ä¸ªå®‰è£…è¿‡ç¨‹éœ€è¦ä¸‹è½½30Gå·¦å³çš„æ–‡ä»¶ï¼Œå¹¶ä¸”éœ€è¦è®¿é—®googleï¼Œæ‰€ä»¥éœ€è¦ä»£ç†,å‡ºç°å¦‚ä¸‹å†…å®¹è¡¨ç¤ºå®‰è£…æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default: </span><br><span class="line">    default: Guest Additions Version: 6.0.14_Ubuntu r132055</span><br><span class="line">    default: VirtualBox Version: 5.2</span><br><span class="line">==&gt; default: Using /data/miniKF/minikf-user-data.vdi for persistent storage.</span><br><span class="line">==&gt; default: ** Managing persistent storage **</span><br><span class="line">==&gt; default: Setting hostname...</span><br><span class="line">==&gt; default: Configuring and enabling network interfaces...</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; /data/miniKF</span><br><span class="line"></span><br><span class="line">==&gt; default: Machine &apos;default&apos; has a post `vagrant up` message. This is a message</span><br><span class="line">==&gt; default: from the creator of the Vagrantfile, and not from Vagrant itself:</span><br><span class="line">==&gt; default: </span><br><span class="line">==&gt; default:     Welcome to MiniKF!</span><br><span class="line">==&gt; default:     Visit http://10.10.10.10/ to get started.</span><br><span class="line">==&gt; default:</span><br></pre></td></tr></table></figure><p>è®¿é—®<code>http://10.10.10.10/</code>ï¼Œç‚¹å‡»é¡µé¢çš„OKæŒ‰é’®ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åæ•´ä¸ªæœåŠ¡å°±å¯åŠ¨äº†ï¼Œç‚¹å‡»<code>connect to Kubeflow</code>å°±è¿›å…¥äº†kubeflowçš„æ“ä½œç•Œé¢</p><p><img src="/images/media/é€‰åŒº_077.png" alt></p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p>[1] <a href="https://www.kubeflow.org/docs/started/workstation/getting-started-minikf/" target="_blank" rel="noopener">https://www.kubeflow.org/docs/started/workstation/getting-started-minikf/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MiniKF is a fast and easy way to get started with Kubeflow. With just a few clicks, you are up for experimentation, and for running complete Kubeflow Pipelines.&lt;/p&gt;
    
    </summary>
    
      <category term="miniKF" scheme="https://blog.flyfox.top/categories/miniKF/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="ubuntu" scheme="https://blog.flyfox.top/tags/ubuntu/"/>
    
      <category term="miniKF" scheme="https://blog.flyfox.top/tags/miniKF/"/>
    
  </entry>
  
  <entry>
    <title>minikubeå®‰è£…æ•™ç¨‹</title>
    <link href="https://blog.flyfox.top/2020/04/18/minikube%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <id>https://blog.flyfox.top/2020/04/18/minikubeå®‰è£…æ•™ç¨‹/</id>
    <published>2020-04-18T14:20:02.000Z</published>
    <updated>2020-04-19T07:35:39.474Z</updated>
    
    <content type="html"><![CDATA[<p>minikube æ˜¯ K8S å®˜æ–¹ä¸ºäº†å¼€å‘è€…èƒ½åœ¨ä¸ªäººç”µè„‘ä¸Šè¿è¡Œ K8S è€Œæä¾›çš„ä¸€å¥—å·¥å…·ã€‚å®ç°ä¸Šæ˜¯é€šè¿‡ Go è¯­è¨€ç¼–å†™ï¼Œé€šè¿‡è°ƒç”¨è™šæ‹ŸåŒ–ç®¡ç†ç¨‹åºï¼Œåˆ›å»ºå‡ºä¸€ä¸ªè¿è¡Œåœ¨è™šæ‹Ÿæœºå†…çš„å•èŠ‚ç‚¹é›†ç¾¤ã€‚</p><a id="more"></a><p>æœ¬æ¬¡å®‰è£…çš„minikubeç‰ˆæœ¬ä¸º1.2.0ï¼ˆk8s 1.15.0ï¼‰ï¼Œå¹¶æ²¡æœ‰å®‰è£…æœ€æ–°ç‰ˆ1.9.2ï¼ŒåŸå› æ˜¯æˆ‘è¦åŸºäºk8så®‰è£…kubeflowï¼Œkubeflowå¯¹k8s 1.16åŠä»¥ä¸Šç‰ˆæœ¬å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºé¿å…ä¸å¿…è¦çš„éº»çƒ¦å°±å®‰è£…äº†è€ç‰ˆæœ¬çš„minikubeã€‚</p><h4 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line"> apt-get install -y apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line"> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</span><br><span class="line"> add-apt-repository \</span><br><span class="line">    &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span><br><span class="line">    $(lsb_release -cs) \</span><br><span class="line">    Stable&quot;</span><br><span class="line"> apt-get update</span><br><span class="line"> apt-get install -y docker-ce</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…kubectl"><a href="#å®‰è£…kubectl" class="headerlink" title="å®‰è£…kubectl"></a>å®‰è£…kubectl</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.15.0/bin/linux/amd64/kubectl</span><br></pre></td></tr></table></figure><p>å¦‚æœç”±äºå¢™çš„é—®é¢˜æ— æ³•ä¸‹è½½å¯ä»¥è®¿é—®ä¸‹é¢çš„githubåœ°å€ï¼Œç‚¹å‡»é€‰æ‹©å¯¹åº”ç‰ˆæœ¬mdè¿›å…¥ï¼Œæ‰¾åˆ°client binariesï¼ˆä¹Ÿå°±æ˜¯kubectlï¼‰ï¼Œé€‰æ‹©å¯¹åº”æ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯ç„¶åå¤åˆ¶è¿æ¥åœ°å€ä¸‹è½½</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG</span><br></pre></td></tr></table></figure><p>èµ‹äºˆæ‰§è¡Œæƒé™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./kubectl</span><br><span class="line">sudo mv ./kubectl /usr/bin/kubectl</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubectl version --client</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;15&quot;, GitVersion:&quot;v1.15.0&quot;, GitCommit:&quot;e8462b5b5dc2584fdcd18e6bcfe9f1e4d970a529&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-06-19T16:40:16Z&quot;, GoVersion:&quot;go1.12.5&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…minikube"><a href="#å®‰è£…minikube" class="headerlink" title="å®‰è£…minikube"></a>å®‰è£…minikube</h4><p>ä¸‹è½½minikube</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/kubernetes/minikube/releases/download/v1.2.0/minikube_1.2.0.deb</span><br></pre></td></tr></table></figure><p>å®‰è£…minikube</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i minikube_1.2.0.deb</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨minikube"><a href="#å¯åŠ¨minikube" class="headerlink" title="å¯åŠ¨minikube"></a>å¯åŠ¨minikube</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo minikube start --vm-driver=none --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers --cpus 6 --memory 12288 --disk-size=120g --extra-config=apiserver.authorization-mode=RBAC --extra-config=kubelet.resolv-conf=/run/systemd/resolve/resolv.conf --extra-config kubeadm.ignore-preflight-errors=SystemVerification</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹è¡¨ç¤ºéƒ¨ç½²å¯åŠ¨æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ğŸ˜„  minikube v1.2.0 on linux (amd64)</span><br><span class="line">âœ…  using image repository registry.cn-hangzhou.aliyuncs.com/google_containers</span><br><span class="line">ğŸ”¥  Creating none VM (CPUs=6, Memory=12288MB, Disk=120000MB) ...</span><br><span class="line">ğŸ³  Configuring environment for Kubernetes v1.15.0 on Docker 19.03.8</span><br><span class="line">    â–ª apiserver.authorization-mode=RBAC</span><br><span class="line">    â–ª kubelet.resolv-conf=/run/systemd/resolve/resolv.conf</span><br><span class="line">    â–ª kubeadm.ignore-preflight-errors=SystemVerification</span><br><span class="line">    â–ª kubelet.resolv-conf=/run/systemd/resolve/resolv.conf</span><br><span class="line">ğŸšœ  Pulling images ...</span><br><span class="line">ğŸš€  Launching Kubernetes ... </span><br><span class="line">ğŸ¤¹  Configuring local host environment ...</span><br><span class="line"></span><br><span class="line">âš ï¸  The &apos;none&apos; driver provides limited isolation and may reduce system security and reliability.</span><br><span class="line">âš ï¸  For more information, see:</span><br><span class="line">ğŸ‘‰  https://github.com/kubernetes/minikube/blob/master/docs/vmdriver-none.md</span><br><span class="line"></span><br><span class="line">âš ï¸  kubectl and minikube configuration will be stored in /home/liby</span><br><span class="line">âš ï¸  To use kubectl or minikube commands as your own user, you may</span><br><span class="line">âš ï¸  need to relocate them. For example, to overwrite your own settings:</span><br><span class="line"></span><br><span class="line">    â–ª sudo mv /home/liby/.kube /home/liby/.minikube $HOME</span><br><span class="line">    â–ª sudo chown -R $USER $HOME/.kube $HOME/.minikube</span><br><span class="line"></span><br><span class="line">ğŸ’¡  This can also be done automatically by setting the env var CHANGE_MINIKUBE_NONE_USER=true</span><br><span class="line">âŒ›  Verifying: apiserver proxy etcd scheduler controller dns</span><br><span class="line">ğŸ„  Done! kubectl is now configured to use &quot;minikube&quot;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>sudo minikube status</code>æŸ¥çœ‹minikubeè¿è¡Œæƒ…å†µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">host: Running</span><br><span class="line">kubelet: Running</span><br><span class="line">apiserver: Running</span><br><span class="line">kubectl: Correctly Configured: pointing to minikube-vm at 192.168.0.110</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹podè¿è¡Œæƒ…å†µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubectl get pods --all-namespaces</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹podè¿è¡Œæ­£å¸¸</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NAMESPACE         NAME                                                           READY   STATUS      RESTARTS   AGE</span><br><span class="line">kube-system       coredns-6967fb4995-svq2c                                       1/1     Running     79         3d19h</span><br><span class="line">kube-system       coredns-6967fb4995-wlk48                                       1/1     Running     79         3d19h</span><br><span class="line">kube-system       etcd-minikube                                                  1/1     Running     0          13h</span><br><span class="line">kube-system       kube-addon-manager-minikube                                    1/1     Running     5          3d19h</span><br><span class="line">kube-system       kube-apiserver-minikube                                        1/1     Running     0          13h</span><br><span class="line">kube-system       kube-controller-manager-minikube                               1/1     Running     45         3d19h</span><br><span class="line">kube-system       kube-proxy-fxp74                                               1/1     Running     5          3d19h</span><br><span class="line">kube-system       kube-scheduler-minikube                                        1/1     Running     37         3d19h</span><br><span class="line">kube-system       kubernetes-dashboard-95564f4f-ql2zr                            1/1     Running     8          3d19h</span><br><span class="line">kube-system       storage-provisioner                                            1/1     Running     0          12h</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>sudo minikube dashboard</code>æ‰“å¼€Kubernetesæ§åˆ¶å°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸ¤”  Verifying dashboard health ...</span><br><span class="line">ğŸš€  Launching proxy ...</span><br><span class="line">ğŸ¤”  Verifying proxy health ...</span><br><span class="line">ğŸ‰  Opening http://127.0.0.1:41123/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ in your default browser...</span><br></pre></td></tr></table></figure><p><img src="/images/media/é€‰åŒº_084.png" alt></p><h4 id="minikubeåŸºæœ¬æ“ä½œ"><a href="#minikubeåŸºæœ¬æ“ä½œ" class="headerlink" title="minikubeåŸºæœ¬æ“ä½œ"></a>minikubeåŸºæœ¬æ“ä½œ</h4><p>æ£€æµ‹é›†ç¾¤çŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubectl cluster-info</span><br></pre></td></tr></table></figure><p>minikubeçš„é…ç½®æ–‡ä»¶åœ¨å¦‚ä¸‹è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.minikube/machines/minikube/config.json</span><br></pre></td></tr></table></figure><p>æ£€éªŒnodeçŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kubectl get nodes</span><br></pre></td></tr></table></figure><p>åœæ­¢è¿è¡Œä¸­çš„kubernetesé›†ç¾¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo minikube stop</span><br></pre></td></tr></table></figure><p>åˆ é™¤æœ¬åœ°çš„kubernetesé›†ç¾¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo minikube delete</span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…äº†kubeflowï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–Kubeflow Dashboardçš„è®¿é—®ipå’Œç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export INGRESS_HOST=$(sudo minikube ip)</span><br><span class="line">export INGRESS_PORT=$(sudo kubectl -n istio-system get service istio-ingressgateway -o jsonpath=&apos;&#123;.spec.ports[?(@.name==&quot;http2&quot;)].nodePort&#125;â€™)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;minikube æ˜¯ K8S å®˜æ–¹ä¸ºäº†å¼€å‘è€…èƒ½åœ¨ä¸ªäººç”µè„‘ä¸Šè¿è¡Œ K8S è€Œæä¾›çš„ä¸€å¥—å·¥å…·ã€‚å®ç°ä¸Šæ˜¯é€šè¿‡ Go è¯­è¨€ç¼–å†™ï¼Œé€šè¿‡è°ƒç”¨è™šæ‹ŸåŒ–ç®¡ç†ç¨‹åºï¼Œåˆ›å»ºå‡ºä¸€ä¸ªè¿è¡Œåœ¨è™šæ‹Ÿæœºå†…çš„å•èŠ‚ç‚¹é›†ç¾¤ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="minikube" scheme="https://blog.flyfox.top/categories/minikube/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="minikube" scheme="https://blog.flyfox.top/tags/minikube/"/>
    
      <category term="ubuntu" scheme="https://blog.flyfox.top/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu+Hexo+Github Pagesæ­å»ºä¸ªäººåšå®¢</title>
    <link href="https://blog.flyfox.top/2020/04/06/Ubuntu-Hexo-Github-Pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://blog.flyfox.top/2020/04/06/Ubuntu-Hexo-Github-Pagesæ­å»ºä¸ªäººåšå®¢/</id>
    <published>2020-04-06T06:24:21.000Z</published>
    <updated>2020-04-07T15:05:11.518Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„ä¸ªäººåšå®¢å…¶å®è‹¥å¹²å¹´å‰å°±æ­å»ºå®Œæˆå¹¶æŠ•å…¥ä½¿ç”¨äº†ï¼Œä½†æ˜¯æ¯”è¾ƒæ‡’ä¸€ç›´æ²¡æœ‰å†™ç¬”è®°ï¼Œæœ€è¿‘å‘ç°ç™¾åº¦çˆ¬è™«æ²¡æœ‰æ”¶å½•æˆ‘çš„ä¸ªäººåšå®¢æ–‡ç« ï¼Œç ”ç©¶äº†ä¸€ä¸‹å‘ç°æ˜¯githubæŠŠç™¾åº¦çˆ¬è™«ç»™ç¦æ‰äº†ï¼Œè§£å†³ä¸€ä¸‹é¡ºä¾¿è¡¥ä¸€ä¸‹ç¬”è®°å§</p><a id="more"></a><h2 id="å®‰è£…Nodejs"><a href="#å®‰è£…Nodejs" class="headerlink" title="å®‰è£…Nodejs"></a>å®‰è£…Nodejs</h2><p>Node.jsæ˜¯åŸºäºChrome V8å¼•æ“çš„JavaScriptè¿è¡Œç¯å¢ƒï¼Œnpmæ˜¯éšNode.jsä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ–°ç‰ˆçš„Node.jsé›†æˆäº†npmã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nodejs</span><br><span class="line">sudo apt install npm</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥nodeç‰ˆæœ¬ï¼š<code>node -v</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v8.10.0</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥npmç‰ˆæœ¬ï¼š<code>npm -v</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6.9.0</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><p>Hexoæ˜¯ä¸€ä¸ªåŸºäºnode.jsçš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œæ”¯æŒMarkdownè§£ææ–‡ç« ã€‚ç®€è¨€ä¹‹ï¼Œhexoå°†Markdownç¼–å†™çš„æ–‡ç« ç”Ÿæˆä¸ºé™æ€htmlé¡µé¢ï¼Œç„¶åéƒ¨ç½²åˆ°githubã€‚<br>å®‰è£…hexoï¼š<code>sudo npm install -g hexo</code>ã€‚<br>åœ¨æŒ‡å®šæ–‡ä»¶å¤¹æ–°å»ºæ‰€éœ€çš„æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;blog-name&gt;</span><br><span class="line">cd &lt;blog-name&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>è¯¥ä½ç½®å°±æ˜¯hexoçš„å·¥ä½œç©ºé—´ï¼Œè¯¥å·¥ä½œç©ºé—´çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>_config.yml</code>æ˜¯åšå®¢ç½‘ç«™çš„é…ç½®æ–‡ä»¶,<code>source</code>æ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ï¼Œ<code>_posts</code> æ–‡ä»¶å¤¹å­˜æ”¾Markdownæ–‡ä»¶ï¼ˆ.mdï¼‰ï¼Œ<code>scaffolds</code>æ˜¯æ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå½“ç”¨hexoæ–°å»ºæ–‡ç« æ—¶ï¼Œhexoä¼šæ ¹æ®<code>scaffolds</code>æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ¥å»ºç«‹æ–‡ä»¶ï¼Œ<code>themes</code>æ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ä¸»é¢˜çš„æ–‡ä»¶å¤¹ï¼Œhexoæ ¹æ®ä¸»é¢˜ç”Ÿæˆé™æ€é¡µé¢ã€‚<br>å…³äº_config.ymlçš„è¡¥å……è¯´æ˜ï¼šå…¶ä¸­å·¥ä½œç©ºé—´æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª_config.ymlï¼Œæ˜¯åšå®¢ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œthemesæ–‡ä»¶å¤¹ä¸­å¯¹åº”ä¸åŒä¸»é¢˜çš„ç›®å½•ä¸‹ä¹Ÿæœ‰ä¸€ä¸ª_config.ymlæ–‡ä»¶å¤¹ï¼Œæ˜¯ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ã€‚</p><h2 id="é…ç½®Hexo"><a href="#é…ç½®Hexo" class="headerlink" title="é…ç½®Hexo"></a>é…ç½®Hexo</h2><h3 id="hexoå¸¸ç”¨å‘½ä»¤"><a href="#hexoå¸¸ç”¨å‘½ä»¤" class="headerlink" title="hexoå¸¸ç”¨å‘½ä»¤"></a>hexoå¸¸ç”¨å‘½ä»¤</h3><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:center">ä½œç”¨</th><th style="text-align:center">ç®€å†™</th></tr></thead><tbody><tr><td style="text-align:left">hexo init â€œfolder-nameâ€</td><td style="text-align:center">æ–°å»ºä¸€ä¸ªç½‘ç«™</td><td style="text-align:center"></td></tr><tr><td style="text-align:left">hexo new â€œtitle-nameâ€</td><td style="text-align:center">æ–°å»ºä¸€ç¯‡æ–‡ç« </td><td style="text-align:center"></td></tr><tr><td style="text-align:left">hexo clean</td><td style="text-align:center">æ¸…é™¤ç¼“å­˜æ–‡ä»¶</td><td style="text-align:center"></td></tr><tr><td style="text-align:left">hexo generate</td><td style="text-align:center">ç”Ÿæˆé™æ€æ–‡ä»¶</td><td style="text-align:center">hexo g</td></tr><tr><td style="text-align:left">hexo server</td><td style="text-align:center">å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤æœåŠ¡å™¨ç½‘å€ï¼š<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a></td><td style="text-align:center">hexo s</td></tr><tr><td style="text-align:left">hexo deploy</td><td style="text-align:center">éƒ¨ç½²ç½‘ç«™</td><td style="text-align:center">hexo d</td></tr></tbody></table><h3 id="æ›´æ¢ä¸»é¢˜"><a href="#æ›´æ¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢ä¸»é¢˜"></a>æ›´æ¢ä¸»é¢˜</h3><p>é»˜è®¤ä¸»é¢˜ä¸ºlandscapeï¼Œæ›´æ¢ä¸ºnextæˆ–å…¶å®ƒä¸»é¢˜ã€‚<br>ä¸‹è½½ä¸»é¢˜å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸€èˆ¬ä¼šåœ¨è‡ªå·±çš„githubä¿å­˜hexo-theme-nextä¸»é¢˜ï¼Œè¿™æ ·æ–¹ä¾¿ä¸ªæ€§åŒ–ä¿®æ”¹ä¿å­˜ï¼Œæˆ‘çš„ä¸»é¢˜åœ°å€å¤§å®¶å¯ä»¥å‚è€ƒä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git@github.com:smartliby/hexo-theme-next.git</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨<code>git</code>å‘½ä»¤å…‹éš†ä¸»é¢˜æ–‡ä»¶ï¼Œä»¥åæ›´æ–°å¯ä»¥é€šè¿‡<code>git pull</code>å‘½ä»¤æ¥å¿«é€Ÿæ›´æ–°ï¼Œè€Œä¸ç”¨å†æ¬¡ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œæ›¿æ¢ã€‚<br>æ‰“å¼€_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹<code>theme</code>ä¸º<code>next</code>ã€‚ç„¶åè¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>æ‰“å¼€<code>http://localhost:4000/</code>å¯ä»¥å‘ç°ä¸»é¢˜æ›´æ”¹äº†ã€‚</p><h2 id="å®‰è£…é…ç½®github"><a href="#å®‰è£…é…ç½®github" class="headerlink" title="å®‰è£…é…ç½®github"></a>å®‰è£…é…ç½®github</h2><p>é¦–å…ˆæŸ¥çœ‹æ˜¯å¦å·²ç»å®‰è£…gitï¼Œ<code>git --version</code>ï¼Œä¸€èˆ¬ubuntuè‡ªå¸¦gitã€‚è‹¥æ²¡æœ‰å®‰è£…é‡‡ç”¨<code>sudo apt install git</code>è¿›è¡Œå®‰è£…ã€‚</p><h3 id="é…ç½®github"><a href="#é…ç½®github" class="headerlink" title="é…ç½®github"></a>é…ç½®github</h3><p>å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;your user name&quot;</span><br><span class="line">git config --global user.email &quot;your email address&quot;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå…¬é’¥"><a href="#åˆ›å»ºå…¬é’¥" class="headerlink" title="åˆ›å»ºå…¬é’¥"></a>åˆ›å»ºå…¬é’¥</h3><p>å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -C &apos;your email address&apos; -t rsa</span><br></pre></td></tr></table></figure><p>ä¸€ç›´æŒ‰å›è½¦ç›´è‡³ç»“æŸï¼Œç»“æŸåä¼šåœ¨<code>ï½/.ssh/</code>ä¸‹å»ºç«‹å¯†é’¥æ–‡ä»¶ï¼Œå³<code>~/.ssh/id_rsa_pub</code>ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ã€‚</p><h3 id="githubæ·»åŠ å…¬é’¥"><a href="#githubæ·»åŠ å…¬é’¥" class="headerlink" title="githubæ·»åŠ å…¬é’¥"></a>githubæ·»åŠ å…¬é’¥</h3><p>ç‚¹å‡»ä¸ªäººå¤´åƒâ€”&gt;settingsâ€”&gt;SSH and GPG keysâ€”&gt;New SSH keyï¼Œç²˜è´´åˆšæ‰å¤åˆ¶çš„æ–‡æœ¬ã€‚</p><h3 id="åˆ›å»ºé¡¹ç›®ä»“åº“"><a href="#åˆ›å»ºé¡¹ç›®ä»“åº“" class="headerlink" title="åˆ›å»ºé¡¹ç›®ä»“åº“"></a>åˆ›å»ºé¡¹ç›®ä»“åº“</h3><p>åœ¨githubé¡µé¢ï¼Œé€‰æ‹©New repositoryï¼ŒRespository nameè¾“å…¥<code>username.github.io</code>ï¼Œç‚¹å‡»ç¡®å®šã€‚</p><h2 id="hexoå°†é™æ€é¡µé¢éƒ¨ç½²åˆ°github"><a href="#hexoå°†é™æ€é¡µé¢éƒ¨ç½²åˆ°github" class="headerlink" title="hexoå°†é™æ€é¡µé¢éƒ¨ç½²åˆ°github"></a>hexoå°†é™æ€é¡µé¢éƒ¨ç½²åˆ°github</h2><p>æ‰“å¼€hexoç›®å½•ä¸‹çš„<code>_config.yml</code>ï¼Œåœ¨æœ€åæ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:username/username.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>masteråˆ†æ”¯æ‰˜ç®¡publicç›®å½•ä¸‹çš„é™æ€ç½‘é¡µä»£ç ï¼Œsourceåˆ†æ”¯æ‰˜ç®¡markdownæºç ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒæºç ä¸¢å¤±äº†ï¼Œå°±ç®—ç”µè„‘ä¸¢äº†ä¹Ÿä¸æ€•ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼Œ<strong>å¹³æ—¶åœ¨sourceåˆ†æ”¯å¼€å‘å³å¯</strong>ã€‚</p><p>æˆ‘å¹³æ—¶å†™æ–‡ç« çš„æµç¨‹ï¼š</p><ol><li>hexo new â€œtitle-nameâ€</li><li><code>hexo g</code> ç”Ÿæˆé™æ€ç½‘é¡µä»£ç </li><li><code>hexo d</code> pushåˆ°è¿œç¨‹masteråˆ†æ”¯</li><li>åœ¨sourceåˆ†æ”¯æ‰§è¡Œ <code>git add -A</code> <code>git commit -m &quot;æäº¤å†…å®¹&quot;</code> <code>git push</code></li></ol><p>ç„¶åå®‰è£…hexoæ’ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆè¿›è¡Œéƒ¨ç½²ï¼Œå‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>ç°åœ¨å°±å¯ä»¥é€šè¿‡<code>username.github.io</code>è®¿é—®ä½ çš„åšå®¢äº†ï¼</p><h2 id="ä¸°å¯Œåšå®¢åŠŸèƒ½å®‰è£…ä¸€äº›æ’ä»¶æˆ–è€…é…ç½®"><a href="#ä¸°å¯Œåšå®¢åŠŸèƒ½å®‰è£…ä¸€äº›æ’ä»¶æˆ–è€…é…ç½®" class="headerlink" title="ä¸°å¯Œåšå®¢åŠŸèƒ½å®‰è£…ä¸€äº›æ’ä»¶æˆ–è€…é…ç½®"></a>ä¸°å¯Œåšå®¢åŠŸèƒ½å®‰è£…ä¸€äº›æ’ä»¶æˆ–è€…é…ç½®</h2><ul><li><a href="https://gitalk.github.io/" target="_blank" rel="noopener">gitalk</a> è¯„è®ºåŠŸèƒ½</li><li><a href="https://busuanzi.ibruce.info/" target="_blank" rel="noopener">busuanzi</a> æç®€ç½‘é¡µè®¡æ•°å™¨</li><li>local_search æœç´¢åŠŸèƒ½</li><li>google_analytics ç½‘ç«™è¿è¡Œæƒ…å†µåˆ†æ</li><li>baidu_analytics ç½‘ç«™è¿è¡Œæƒ…å†µåˆ†æ</li><li><a href="https://search.google.com/search-console" target="_blank" rel="noopener">google_site_verification</a> éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ,SEOä¼˜åŒ–</li><li><a href="https://ziyuan.baidu.com/linksubmit/index" target="_blank" rel="noopener">baidu_site_verification</a> éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ,SEOä¼˜åŒ–</li><li>needmoreshare2 åˆ†äº«åŠŸèƒ½</li></ul><p>ä»¥ä¸Šæ˜¯æœ¬äººä½¿ç”¨çš„ä¸€äº›æ’ä»¶å’Œé…ç½®ï¼Œå¤§å®¶å‚è€ƒä¸€ä¸‹ï¼Œå¯æ ¹æ®è‡ªå·±æƒ…å†µé€‰æ‹©å®‰è£…å’Œé…ç½®,å…·ä½“å®‰è£…å’Œé…ç½®æ–¹æ³•å¯è‡ªè¡Œgoogle</p><h2 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h2><p>é¦–å…ˆç”³è¯·åŸŸåï¼Œæˆ‘æ˜¯åœ¨<a href="https://homenew.console.aliyun.com/" target="_blank" rel="noopener">é˜¿é‡Œäº‘</a>ç”³è¯·çš„ï¼Œéœ€è¦å¤‡æ¡ˆ</p><p>åŸŸåè§£æé…ç½®,æ·»åŠ ä¸€æ¡CNAMEè®°å½•</p><p><img src="/images/media/é€‰åŒº_068.png" alt></p><p>github pages ä¸Š <code>CNAME</code> æ–‡ä»¶é…ç½®</p><p>æ–¹æ³•1ï¼šé™æ€æºç ä¸­æ·»åŠ CNAMEæ–‡ä»¶ï¼Œå†…å®¹ä¸ºç”³è¯·çš„åŸŸåå¹¶æ‰§è¡Œ<code>hexo g</code> <code>hexo d</code>éƒ¨ç½²åˆ°githubä¸Š</p><p><img src="/images/media/é€‰åŒº_071.png" alt></p><p>æ–¹æ³•2ï¼šç›´æ¥åœ¨github.ioä»“åº“çš„Settingsçš„<code>GitHub Pages</code>é¡¹ç›´æ¥è®¾ç½®<code>Custom domain</code>,githubä¼šè‡ªåŠ¨æ·»åŠ CNAMEæ–‡ä»¶</p><p><img src="/images/media/é€‰åŒº_070.png" alt></p><p>ç°åœ¨ä½¿ç”¨ç”³è¯·çš„åŸŸåè®¿é—®ä¸€ä¸‹è¯•è¯•å§</p><h2 id="è§£å†³ç™¾åº¦çˆ¬è™«æ— æ³•çˆ¬å–-Github-Pages-ä¸ªäººåšå®¢é—®é¢˜"><a href="#è§£å†³ç™¾åº¦çˆ¬è™«æ— æ³•çˆ¬å–-Github-Pages-ä¸ªäººåšå®¢é—®é¢˜" class="headerlink" title="è§£å†³ç™¾åº¦çˆ¬è™«æ— æ³•çˆ¬å– Github Pages ä¸ªäººåšå®¢é—®é¢˜"></a>è§£å†³ç™¾åº¦çˆ¬è™«æ— æ³•çˆ¬å– Github Pages ä¸ªäººåšå®¢é—®é¢˜</h2><p>ç½‘ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ä½¿ç™¾åº¦çˆ¬è™«çˆ¬å–åšå®¢é¡µé¢ï¼Œæ€»ç»“èµ·æ¥ä¸»è¦æœ‰ï¼š</p><ol><li>CDNï¼Œåˆ©ç”¨äº‘æœåŠ¡æä¾›å•†å°† blog å¤šåšå‡ ä¸ªé•œåƒã€‚</li><li>æ¢æ‰˜ç®¡å¹³å°ï¼Œæ¯”å¦‚è¯´å›½å†…çš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚</li><li>è‡ªè¡Œä½¿ç”¨ VPS æ‰˜ç®¡ã€‚</li></ol><p>CDN æ¯”è¾ƒè´µè¿˜ä¸å®Œç¾ï¼Œä¸é€‚åˆå°æµé‡ç½‘ç«™ï¼Œåˆä¸æƒ³æ¢æ‰˜ç®¡å¹³å°ï¼ŒVPS å¤§é™†è®¿é—®é€Ÿåº¦ä¸å¿«ã€‚</p><p>æœ‰æ²¡æœ‰ç®€å•ã€å¯é è¿˜å…è´¹çš„æ–¹æ³•ï¼Ÿ</p><p>æœ‰ï¼ŒçœŸçš„æœ‰ï¼Œ<a href="https://zeit.co/" target="_blank" rel="noopener">zeit.co</a>å°±æ˜¯ç›®å‰æ¯”è¾ƒå¥½çš„ä¸€ä¸ªé€‰æ‹©ï¼Œä¸€ä¸ªé™æ€ç½‘é¡µå’Œæ— çŠ¶æ€å‡½æ•°æ‰˜ç®¡çš„äº‘å¹³å°ã€‚è¯•ç”¨äº†ä¹‹åï¼Œæ„Ÿè§‰éå¸¸å¼ºå¤§ï¼Œå®ƒèƒ½å¤Ÿä»¥ Github App çš„å½¢å¼ä¸ GitHub é›†æˆï¼Œæ¥ç®¡ repo çš„ CIï¼Œè¿›è¡Œæ·±åº¦å®šåˆ¶ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¿«é€Ÿéƒ¨ç½²ã€è‡ªåŠ¨ä¼¸ç¼©ã€‚</p><p>å…³é”®æ˜¯ï¼Œç°åœ¨åŸºæœ¬åŠŸèƒ½æ˜¯å…è´¹çš„ï¼Œè¿™å¯¹äºæˆ‘ä»¬æ‰˜ç®¡åšå®¢æ¥è¯´ï¼Œå·²ç»å¾ˆå¤Ÿç”¨äº†ã€‚æ›´æƒŠå–œçš„æ˜¯ï¼Œå®ƒè¿˜æä¾›æ™ºèƒ½ CDN å’Œæ™ºèƒ½ DNS</p><p><img src="/images/media/é€‰åŒº_066.png" alt></p><p>æœ¬è´¨ä¸Šä»–ä»¬æä¾›äº† Storage + CDN + DNS è¿™ä¸€å¥—å®Œæ•´æœåŠ¡ã€‚æ ¹æ®ä»–ä»¬çš„æ–‡æ¡£ï¼Œæ•´ä¸ªè¿‡ç¨‹æˆ‘åªéœ€è¦ï¼š</p><ul><li>ç”¨æˆ‘çš„ Github è´¦æˆ·ç™»é™†</li><li>Import Projectâ€”&gt;Import Git Repositoryâ€”&gt;ç»™zeit æˆ‘çš„é™æ€ç½‘é¡µ repo çš„ read æƒé™</li><li>å¯¼å…¥è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹© other æ¨¡æ¿å³å¯ï¼Œé»˜è®¤ ci å‘½ä»¤ä¸ç”¨æ”¹ï¼ŒRoot Directory ä¹Ÿä¸ç”¨æ”¹ï¼Œå¯¼å…¥å®Œæˆåå°±ä¼šè‡ªåŠ¨å¸®ä½  deployã€‚</li><li>ç­‰å‡ ç§’ï¼Œimporting</li><li>éƒ¨ç½²æˆåŠŸï¼</li></ul><p>ä¸ç”¨å†™ä»»ä½• codeï¼Œç‚¹ä¸¤ä¸‹é¼ æ ‡å°±å®Œäº‹äº†ã€‚éƒ¨ç½²å®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ªç±»ä¼¼äº xxxxxxx.now.sh çš„é“¾æ¥ï¼Œç‚¹å‡»å³å¯è®¿é—®ï¼Œé™æ€èµ„æºå·²ç»éƒ¨ç½²åˆ°äº†ä»–ä»¬çš„è¾¹ç¼˜ CDN èŠ‚ç‚¹ä¸Šã€‚</p><p><img src="/images/media/é€‰åŒº_067.png" alt></p><p>æ¥ç€åœ¨<a href="https://zeit.co/" target="_blank" rel="noopener">zeit.co</a>è®¾ç½®åŸŸå</p><p>Selecting Your Projectâ€”&gt;Settingsâ€”&gt;Domainsâ€”&gt;Entering Your Chosen Domainâ€”&gt;Add the Domain</p><p><img src="/images/media/é€‰åŒº_074.png" alt></p><p>è¿™æ—¶å€™å®ƒä¼šæŠ¥é”™ï¼Œå› ä¸ºä½ çš„åŸŸåè¿˜æ²¡æœ‰æ·»åŠ è§£æã€‚è¿™é‡Œï¼Œä»–ä»¬æ¨èçš„æ–¹å¼æ˜¯è®©ä½ çš„åŸŸåä½¿ç”¨ä»–ä»¬çš„Nameserverï¼Œæˆ–è€…è¯´è®©ä»–ä»¬æä¾›DNSè§£ææœåŠ¡ã€‚ä½†æ˜¯æˆ‘è¿™é‡Œé€‰æ‹©CNAMEçš„æ–¹å¼ã€‚å› ä¸ºæˆ‘ä¸€ç›´ä½¿ç”¨çš„æ˜¯cloudflareçš„DNSè§£æï¼Œæˆ‘ç”³è¯·çš„åŸŸåä¹‹å‰æ˜¯ä¸ºæ¢¯å­ç”¨çš„ï¼Œcloudflareçš„CDNå…è´¹å¹¶ä¸”æ”¯æŒwebsocketï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±ç»§ç»­è¿™ä¹ˆç”¨äº†ï¼Œåœ¨cloudflareä¸Šæ·»åŠ  CNAME è®°å½•å°±è¡Œäº†ï¼Œå†…å®¹ä¸ºä¸Šå›¾çš„valueå€¼ï¼š<code>alias.zeit.co</code>ã€‚</p><p><img src="/images/media/é€‰åŒº_072.png" alt></p><p>å¦‚æœè¿˜æ˜¯æŠ¥é”™çš„è¯ï¼Œä½ å¯ä»¥è¯•ç€åˆ é™¤ï¼ˆå…ˆç‚¹å‡»â€œEditâ€æŒ‰é’®ï¼Œç„¶åç‚¹å‡»â€œRemoveâ€ï¼‰åé‡æ–°æ·»åŠ ï¼Œå¦‚ä¸‹å›¾å³è¡¨ç¤ºè®¾ç½®æˆåŠŸäº†</p><p><img src="/images/media/é€‰åŒº_069.png" alt></p><h2 id="ç™¾åº¦çˆ¬å–"><a href="#ç™¾åº¦çˆ¬å–" class="headerlink" title="ç™¾åº¦çˆ¬å–"></a>ç™¾åº¦çˆ¬å–</h2><p>æœ€ååœ¨<a href="https://ziyuan.baidu.com/" target="_blank" rel="noopener">ç™¾åº¦ç«™é•¿å·¥å…·</a>é¡µé¢ï¼Œåœ¨ <em>æ•°æ®ç›‘æ§</em> &gt; <em>æŠ“å–è¯Šæ–­</em>ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•é€šè¿‡åé€‰æ‹©é“¾æ¥æäº¤ä»¥sitemapæ–¹å¼æäº¤é“¾æ¥å³å¯ï¼Œä¹‹åç™¾åº¦å°±ä¼šå¼€å§‹çˆ¬å–æˆ‘ä»¬çš„åšå®¢äº†</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] è§£å†³ç™¾åº¦çˆ¬è™«æ— æ³•çˆ¬å– Github Pages ä¸ªäººåšå®¢çš„é—®é¢˜ï¼š<a href="https://zpjiang.me/2020/01/15/let-baidu-index-github-page/" target="_blank" rel="noopener">https://zpjiang.me/2020/01/15/let-baidu-index-github-page/</a><br>[2] zeit.co å¸®åŠ©æ–‡æ¡£ï¼š<a href="https://zeit.co/docs" target="_blank" rel="noopener">https://zeit.co/docs</a><br>[3] ä½¿ç”¨ zeit.co æ‰˜ç®¡ Hexo é™æ€åšå®¢ï¼š<a href="https://www.qtmuniao.com/2020/03/15/hexo-to-zeit-co/" target="_blank" rel="noopener">https://www.qtmuniao.com/2020/03/15/hexo-to-zeit-co/</a><br>[4] åŸŸåç»‘å®šï¼š<a href="https://segmentfault.com/a/1190000011203711" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011203711</a><br>[5] zeitåŸŸåè§£æï¼š<a href="https://blog.solariar.tech/2020/how-this-site-work-v2/" target="_blank" rel="noopener">https://blog.solariar.tech/2020/how-this-site-work-v2/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘çš„ä¸ªäººåšå®¢å…¶å®è‹¥å¹²å¹´å‰å°±æ­å»ºå®Œæˆå¹¶æŠ•å…¥ä½¿ç”¨äº†ï¼Œä½†æ˜¯æ¯”è¾ƒæ‡’ä¸€ç›´æ²¡æœ‰å†™ç¬”è®°ï¼Œæœ€è¿‘å‘ç°ç™¾åº¦çˆ¬è™«æ²¡æœ‰æ”¶å½•æˆ‘çš„ä¸ªäººåšå®¢æ–‡ç« ï¼Œç ”ç©¶äº†ä¸€ä¸‹å‘ç°æ˜¯githubæŠŠç™¾åº¦çˆ¬è™«ç»™ç¦æ‰äº†ï¼Œè§£å†³ä¸€ä¸‹é¡ºä¾¿è¡¥ä¸€ä¸‹ç¬”è®°å§&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://blog.flyfox.top/categories/hexo/"/>
    
    
      <category term="ubuntu" scheme="https://blog.flyfox.top/tags/ubuntu/"/>
    
      <category term="hexo" scheme="https://blog.flyfox.top/tags/hexo/"/>
    
      <category term="gitHub pages" scheme="https://blog.flyfox.top/tags/gitHub-pages/"/>
    
      <category term="zeit.co" scheme="https://blog.flyfox.top/tags/zeit-co/"/>
    
  </entry>
  
  <entry>
    <title>é€šè¿‡é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ä¸‹è½½gcr.ioé•œåƒ</title>
    <link href="https://blog.flyfox.top/2020/04/05/%E9%80%9A%E8%BF%87%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1%E4%B8%8B%E8%BD%BDgcr-io%E9%95%9C%E5%83%8F/"/>
    <id>https://blog.flyfox.top/2020/04/05/é€šè¿‡é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ä¸‹è½½gcr-ioé•œåƒ/</id>
    <published>2020-04-05T07:49:25.000Z</published>
    <updated>2020-04-05T08:46:15.685Z</updated>
    
    <content type="html"><![CDATA[<p>å®‰è£…k8sæ—¶å‘ç°å¥½å¤šé•œåƒéƒ½æ˜¯gcr.ioä¸Šçš„ï¼Œåœ¨å›½å†…ç”±äºè¢«å¢™è€Œä¸èƒ½æ­£å¸¸ä¸‹è½½ï¼Œä¹Ÿå°±å¯¼è‡´äº†é›†ç¾¤ä¸èƒ½æ­£å¸¸å®‰è£…ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¦æ€æ ·æ‰èƒ½ä¸‹è½½è¿™äº›é•œåƒå‘¢ï¼Ÿæˆ‘ä»¬è¦å¯»æ‰¾å…è´¹ä¸‹è½½gcr.ioé•œåƒçš„é€”å¾„ï¼Œé˜¿é‡Œäº‘å°±æä¾›äº†è¿™ä¸€æœåŠ¡ã€‚æœ¬æ–‡é€šè¿‡githubè®¾ç½®ä»£ç æºä¸‹è½½æ‰€éœ€çš„gcr.ioé•œåƒã€‚</p><a id="more"></a><h4 id="githubåˆ›å»ºä»“åº“"><a href="#githubåˆ›å»ºä»“åº“" class="headerlink" title="githubåˆ›å»ºä»“åº“"></a>githubåˆ›å»ºä»“åº“</h4><p>é¦–å…ˆåœ¨githubåˆ›å»ºä¸€ä¸ªrepositoryï¼Œåˆ›å»ºå¥½åç„¶ågit cloneåˆ°æœ¬åœ°ï¼Œå¹¶åœ¨æœ¬åœ°åˆ›å»ºæ‰€éœ€ä¸‹è½½çš„é•œåƒdockerfileï¼Œè¿™é‡Œæœ¬åœ°çš„ç›®å½•å±‚çº§ä¸º é•œåƒåç§°-&gt;ç‰ˆæœ¬å·-&gt;dockerfileã€‚åˆ›å»ºä¹‹åå†æŠŠæ‰€æœ‰çš„æ–‡ä»¶pushåˆ°githubä»“åº“ã€‚è¿™é‡Œæ˜¯æˆ‘çš„githubä¸Šçš„<a href="https://github.com/smartliby/docker-library" target="_blank" rel="noopener">dockderfileä»“åº“</a>ï¼Œå¤§å®¶å¯ä»¥followæˆ‘çš„é¡¹ç›®</p><p><img src="/images/media/é€‰åŒº_057.png" alt></p><p>é€‰å–å…¶ä¸­ä¸€ä¸ªç»„ä»¶çš„dockerfileï¼ŒæŸ¥çœ‹å…¶ä¸­çš„å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM gcr.io/kubeflow-images-public/tensorflow-1.15.2-notebook-cpu:1.0.0</span><br><span class="line">MAINTAINER smartliby &lt;liboyuma@qq.com&gt;</span><br></pre></td></tr></table></figure><p>é‡Œé¢çš„å†…å®¹éå¸¸å°‘ï¼Œå°±ä¸¤è¡Œï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œæ˜¯åŸºäºæŸä¸ªé•œåƒåˆ¶ä½œçš„æ–°é•œåƒï¼Œç¬¬äºŒè¡Œä¸ºä½œè€…ä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªdockerfileæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºç«¯å€ªæ¥äº†ï¼Œå…¶å®æˆ‘ä»¬ä»€ä¹ˆéƒ½æ²¡åšï¼Œå°±æ˜¯åˆ©ç”¨é˜¿é‡Œäº‘è¿™ä¸ªä»‹è´¨å¸®æˆ‘ä»¬ç¿»å¢™å»ä¸‹è½½é•œåƒã€‚</p><h4 id="ç™»å½•é˜¿é‡Œäº‘é•œåƒ"><a href="#ç™»å½•é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="ç™»å½•é˜¿é‡Œäº‘é•œåƒ"></a>ç™»å½•<a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener">é˜¿é‡Œäº‘é•œåƒ</a></h4><p>åˆ›å»ºé•œåƒä»“åº“</p><p><img src="/images/media/é€‰åŒº_059.png" alt></p><p>é€‰æ‹©é•œåƒæ„å»ºæ‰€ä¾èµ–çš„åœ¨githubä»“åº“</p><p><img src="/images/media/é€‰åŒº_060.png" alt></p><p>è¿›å…¥åˆšåˆ›å»ºçš„ä»“åº“ç„¶åé€‰æ‹©æ„å»ºèœå•ç‚¹å‡»æ·»åŠ æ„å»ºè§„åˆ™</p><p><img src="/images/media/é€‰åŒº_061.png" alt></p><p>ç‚¹å‡»ç«‹å³æ„å»º</p><p><img src="/images/media/é€‰åŒº_063.png" alt></p><p>æ„å»ºæˆåŠŸ</p><p><img src="/images/media/é€‰åŒº_062.png" alt></p><h4 id="ä½¿ç”¨é•œåƒ"><a href="#ä½¿ç”¨é•œåƒ" class="headerlink" title="ä½¿ç”¨é•œåƒ"></a>ä½¿ç”¨é•œåƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.cn-beijing.aliyuncs.com/smartliby/tensorflow-1.15.2-notebook-gpu:1.0.0</span><br><span class="line">docker tag registry.cn-beijing.aliyuncs.com/smartliby/tensorflow-1.15.2-notebook-gpu:1.0.0 gcr.io/kubeflow-images-public/tensorflow-1.15.2-notebook-gpu:1.0.0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®‰è£…k8sæ—¶å‘ç°å¥½å¤šé•œåƒéƒ½æ˜¯gcr.ioä¸Šçš„ï¼Œåœ¨å›½å†…ç”±äºè¢«å¢™è€Œä¸èƒ½æ­£å¸¸ä¸‹è½½ï¼Œä¹Ÿå°±å¯¼è‡´äº†é›†ç¾¤ä¸èƒ½æ­£å¸¸å®‰è£…ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¦æ€æ ·æ‰èƒ½ä¸‹è½½è¿™äº›é•œåƒå‘¢ï¼Ÿæˆ‘ä»¬è¦å¯»æ‰¾å…è´¹ä¸‹è½½gcr.ioé•œåƒçš„é€”å¾„ï¼Œé˜¿é‡Œäº‘å°±æä¾›äº†è¿™ä¸€æœåŠ¡ã€‚æœ¬æ–‡é€šè¿‡githubè®¾ç½®ä»£ç æºä¸‹è½½æ‰€éœ€çš„gcr.ioé•œåƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="k8s" scheme="https://blog.flyfox.top/categories/k8s/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="github" scheme="https://blog.flyfox.top/tags/github/"/>
    
      <category term="docker" scheme="https://blog.flyfox.top/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>kubeflow 1.0 å®‰è£…æ•™ç¨‹</title>
    <link href="https://blog.flyfox.top/2020/04/04/kubeflow%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <id>https://blog.flyfox.top/2020/04/04/kubeflowå®‰è£…æ•™ç¨‹/</id>
    <published>2020-04-04T12:21:11.000Z</published>
    <updated>2020-04-26T09:41:37.625Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.kubeflow.org/docs" target="_blank" rel="noopener">Kubeflow</a>æ˜¯Googleæ¨å‡ºçš„åŸºäºkubernetesç¯å¢ƒä¸‹çš„æœºå™¨å­¦ä¹ ç»„ä»¶ï¼Œé€šè¿‡Kubeflowå¯ä»¥å®ç°å¯¹TFJobç­‰èµ„æºç±»å‹å®šä¹‰ï¼Œå¯ä»¥åƒéƒ¨ç½²åº”ç”¨ä¸€æ ·å®Œæˆåœ¨TFJobåˆ†å¸ƒå¼è®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ã€‚æœ€åˆçš„è®¾è®¡æ˜¯å°†Kuberneteså’ŒTensorflowç»“åˆå®ç°å¯¹Tensorflowåˆ†å¸ƒå¼è®­ç»ƒçš„æ”¯æŒã€‚ä½†æ˜¯ä»…ä»…å®ç°å¯¹Tensorflowçš„æ”¯æŒè¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œ<code>Kubeflow</code>ç¤¾åŒºåˆé™†ç»­å¯¹å„ç§æ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œæ”¯æŒ,ä¾‹å¦‚:<code>MXNet</code>, <code>Caffee</code>, <code>PyTorch</code>ç­‰ã€‚ä½¿å¾—æœºå™¨å­¦ä¹ ç®—æ³•åŒå­¦åªéœ€å…³å¿ƒç®—æ³•å®ç°ï¼Œè€Œåç»­çš„æ¨¡å‹è®­ç»ƒå’ŒæœåŠ¡ä¸Šçº¿éƒ½äº¤ç»™å¹³å°æ¥åš,è§£æ”¾ç®—æ³•åŒå­¦ä½¿å…¶ä¸“åšè‡ªå·±æ“…é•¿çš„äº‹å„¿ã€‚</p><a id="more"></a><p>ç›®å‰Kubeflowä»…æ”¯æŒåœ¨v1.15.11åŠä»¥ä¸‹ç‰ˆæœ¬çš„k8sä¸Šéƒ¨ç½²ï¼Œv1.16åŠä»¥ä¸Šå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå…·ä½“æƒ…å†µå¯å‚è€ƒ<a href="https://www.kubeflow.org/docs/started/k8s/overview/" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åŸºäº<a href="https://microk8s.io/" target="_blank" rel="noopener">Microk8s</a>ï¼ˆç‰ˆæœ¬1.15/stableï¼‰éƒ¨ç½²kubeflow v1.0</p><h4 id="å®‰è£…kubeflow"><a href="#å®‰è£…kubeflow" class="headerlink" title="å®‰è£…kubeflow"></a>å®‰è£…kubeflow</h4><p>ä¸‹è½½ kfctl binary from the <a href="https://github.com/kubeflow/kfctl/releases/" target="_blank" rel="noopener">Kubeflow releases page</a></p><p>è§£å‹å®‰è£…åŒ…å¹¶æ·»åŠ åˆ°æ‰§è¡Œç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf kfctl_v1.0.1-0-gf3edb9b_linux.tar.gz</span><br><span class="line">sudo cp kfctl /usr/bin</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export BASE_DIR=/data/</span><br><span class="line">export KF_NAME=my-kubeflow</span><br><span class="line">export KF_DIR=$&#123;BASE_DIR&#125;/$&#123;KF_NAME&#125;</span><br><span class="line">export CONFIG_URI=&quot;https://raw.githubusercontent.com/kubeflow/manifests/v1.0-branch/kfdef/kfctl_k8s_istio.v1.0.1.yaml&quot;</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²kubeflow</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $&#123;KF_DIR&#125;</span><br><span class="line">cd $&#123;KF_DIR&#125;</span><br><span class="line">kfctl apply -V -f $&#123;CONFIG_URI&#125;</span><br><span class="line">kubectl -n kubeflow get all</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹æ—¥å¿—å³å®‰è£…æˆåŠŸ</p><p><img src="/images/media/é€‰åŒº_047.png" alt></p><p>æŸ¥çœ‹å½“å‰ Kubernetes pods çŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods --namespace kubeflow</span><br></pre></td></tr></table></figure><p>å‘ç°kubeflowçš„podå¤§éƒ¨åˆ†æ²¡æœ‰å¯åŠ¨æˆåŠŸï¼ŒåŸå› è¿˜æ˜¯ç½‘ç»œé—®é¢˜ï¼Œéœ€è¦è®¿é—®gcr.ioä¸‹è½½é•œåƒï¼Œä¹‹å‰æˆ‘éƒ½æ˜¯é€šè¿‡gcr.azk8s.cné•œåƒåœ°å€ä¸‹è½½çš„ï¼Œä½†æ˜¯æœ€è¿‘å‘ç°gcr.azk8s.cnè¿™ä¸ªåœ°å€æ— æ³•ä½¿ç”¨äº†ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡è‡ªå·±æ„å»ºç„¶åä¿å­˜åˆ°é˜¿é‡Œäº‘æˆ–è€…dockerhubé•œåƒåº“é‡Œï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘å·²ç»æ„å»ºå¥½çš„é•œåƒï¼Œæ‰§è¡Œä¸‹é¢è„šæœ¬å³å¯ï¼Œä¹Ÿå¯è‡ªå·±æ„å»ºï¼Œå…·ä½“æ„å»ºæµç¨‹å¯ä»¥å‚è€ƒ<a href="https://blog.flyfox.top/2020/04/19/é€šè¿‡Travis-CIè‡ªåŠ¨æ„å»ºé•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒåº“å’Œdockehub">è¿™ç¯‡æ–‡ç« </a></p><p>æ‰§è¡Œä»¥ä¸‹è„šæœ¬å°†é•œåƒä¸‹è½½åˆ°æœ¬åœ°å¹¶å¯¼å…¥åˆ°microk8s</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">echo ""</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo "pull kubeflow  v1.0 images from aliyuncs ..."</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo ""</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> registry.cn-hangzhou.aliyuncs.com/smartliby</span></span><br><span class="line"></span><br><span class="line">gcr_imgs=(</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kfserving-controller:0.2.2,gcr.io/kfserving/kfserving-controller:0.2.2"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/api-server:0.2.0,gcr.io/ml-pipeline/api-server:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kfam:v1.0.0-gf3e09203,gcr.io/kubeflow-images-public/kfam:v1.0.0-gf3e09203"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/ingress-setup:latest,gcr.io/kubeflow-images-public/ingress-setup:latest"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/application:1.0-beta,gcr.io/kubeflow-images-public/kubernetes-sigs/application:1.0-beta"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/centraldashboard:v1.0.0-g3ec0de71,gcr.io/kubeflow-images-public/centraldashboard:v1.0.0-g3ec0de71"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/jupyter-web-app:v1.0.0-g2bd63238,gcr.io/kubeflow-images-public/jupyter-web-app:v1.0.0-g2bd63238"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/katib-controller:v0.8.0,gcr.io/kubeflow-images-public/katib/v1alpha3/katib-controller:v0.8.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/katib-db-manager:v0.8.0,gcr.io/kubeflow-images-public/katib/v1alpha3/katib-db-manager:v0.8.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/katib-ui:v0.8.0,gcr.io/kubeflow-images-public/katib/v1alpha3/katib-ui:v0.8.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kube-rbac-proxy:v0.4.0,gcr.io/kubebuilder/kube-rbac-proxy:v0.4.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/metacontroller:v0.3.0,gcr.io/metacontroller/metacontroller:v0.3.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/metadata:v0.1.11,gcr.io/kubeflow-images-public/metadata:v0.1.11"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/envoy:metadata-grpc,gcr.io/ml-pipeline/envoy:metadata-grpc"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/ml_metadata_store_server:v0.21.1,gcr.io/tfx-oss-public/ml_metadata_store_server:v0.21.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/metadata-frontend:v0.1.8,gcr.io/kubeflow-images-public/metadata-frontend:v0.1.8"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/visualization-server:0.2.0,gcr.io/ml-pipeline/visualization-server:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/persistenceagent:0.2.0,gcr.io/ml-pipeline/persistenceagent:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/scheduledworkflow:0.2.0,gcr.io/ml-pipeline/scheduledworkflow:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/frontend:0.2.0,gcr.io/ml-pipeline/frontend:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/viewer-crd-controller:0.2.0,gcr.io/ml-pipeline/viewer-crd-controller:0.2.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/notebook-controller:v1.0.0-gcd65ce25,gcr.io/kubeflow-images-public/notebook-controller:v1.0.0-gcd65ce25"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/profile-controller:v1.0.0-ge50a8531,gcr.io/kubeflow-images-public/profile-controller:v1.0.0-ge50a8531"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/pytorch-operator:v1.0.0-g047cf0f,gcr.io/kubeflow-images-public/pytorch-operator:v1.0.0-g047cf0f"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/spark-operator:v1beta2-1.0.0-2.4.4,gcr.io/spark-operator/spark-operator:v1beta2-1.0.0-2.4.4"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/spartakus-amd64:v1.1.0,gcr.io/google_containers/spartakus-amd64:v1.1.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/tf_operator:v1.0.0-g92389064,gcr.io/kubeflow-images-public/tf_operator:v1.0.0-g92389064"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/admission-webhook:v1.0.0-gaf96e4e3,gcr.io/kubeflow-images-public/admission-webhook:v1.0.0-gaf96e4e3"</span><br><span class="line">    "smartliby/kfam:v1.0.0-gf3e09203,gcr.io/kubeflow-images-public/kfam:v1.0.0-gf3e09203"</span><br><span class="line">    "smartliby/api-server:0.2.0,gcr.io/ml-pipeline/api-server:0.2.0"</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">for img in $&#123;gcr_imgs[@]&#125;</span><br><span class="line">do</span><br><span class="line">    img_array=($&#123;img//,/ &#125;)</span><br><span class="line">    # æ‹‰å–é•œåƒ</span><br><span class="line">    docker pull $&#123;img_array[0]&#125;</span><br><span class="line">    # æ·»åŠ Tag</span><br><span class="line">    image_name=$&#123;img_array[1]&#125;</span><br><span class="line">    image_name=$&#123;image_name%@*&#125;</span><br><span class="line">    docker tag $&#123;img_array[0]&#125; $&#123;image_name&#125;</span><br><span class="line">    # è¾“å‡º</span><br><span class="line">    docker save $&#123;image_name&#125; &gt; /data/k8s_img/kubeflow/$&#123;image_name##*/&#125;.tar</span><br><span class="line">    # è¾“å…¥</span><br><span class="line">    microk8s.ctr --namespace k8s.io image import /data/k8s_img/kubeflow/$&#123;image_name##*/&#125;.tar</span><br><span class="line">    # åˆ é™¤Tag</span><br><span class="line">    docker rmi $&#123;img_array[0]&#125; $&#123;image_name&#125;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo ""</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo "pull kubeflow  v1.0 images from aliyuncs finished."</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo ""</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œä»¥ä¸Šè„šæœ¬åå‘ç°knative-servingè¿˜æ˜¯æ²¡æœ‰å¯åŠ¨ï¼ŒåŸå› æ˜¯å› ä¸ºknativeé•œåƒä½¿ç”¨çš„æ˜¯sha256ï¼Œæ²¡æœ‰ä½¿ç”¨å…·ä½“ç‰ˆæœ¬å·ï¼Œè€Œé•œåƒä¸‹è½½åˆ°é˜¿é‡Œäº‘ä¹‹åsha256å°±å˜æ›´äº†ï¼Œæ‰€ä»¥æ— æ³•ä¸‹è½½ï¼Œåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ›´æ”¹ä¸‹è½½åœ°å€äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /data/my-kubeflow/kustomize/knative-install/base/deployment.yaml</span><br></pre></td></tr></table></figure><p>é•œåƒåœ°å€å¦‚ä¸‹æ ¼å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/activator@sha256:8e606671215cc029683e8cd633ec5de9eabeaa6e9a4392ff289883304be1f418</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler-hpa@sha256:5e0fadf574e66fb1c893806b5c5e5f19139cc476ebf1dff9860789fe4ac5f545</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler@sha256:ef1f01b5fb3886d4c488a219687aac72d28e72f808691132f658259e4e02bb27</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/networking/istio@sha256:727a623ccb17676fae8058cb1691207a9658a8d71bc7603d701e23b1a6037e6c</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/webhook@sha256:1ef3328282f31704b5802c1136bd117e8598fd9f437df8209ca87366c5ce9fcb</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/controller@sha256:5ca13e5b3ce5e2819c4567b75c0984650a57272ece44bc1dabf930f9fe1e19a1</span><br></pre></td></tr></table></figure><p>æ”¹æˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">smartliby/activator:latest</span><br><span class="line">smartliby/autoscaler-hpa:latest</span><br><span class="line">smartliby/autoscaler:latest</span><br><span class="line">smartliby/istio:latest</span><br><span class="line">smartliby/webhook:latest</span><br><span class="line">smartliby/controller:latest</span><br></pre></td></tr></table></figure><p>æœ€åæ‰§è¡Œ<code>kfctl apply -V -f ${CONFIG_URI}</code>é‡æ–°å®‰è£…å³å¯</p><p>å¦‚æœè¿˜æ˜¯æœ‰podæ— æ³•å¯åŠ¨ï¼Œå¯é€šè¿‡<code>kubectl describe pod æœªå¯åŠ¨podçš„åç§° -n kubeflow</code>æŸ¥çœ‹åŸå› </p><p>å¦‚æœæ˜¯å› ä¸ºé•œåƒæ— æ³•ä¸‹è½½ï¼Œå¯ä»¥å°†ä¾èµ–çš„é•œåƒåŠ åˆ°ä¸Šé¢çš„è„šæœ¬é‡Œä¸‹è½½é•œåƒ</p><p>å¦‚æœæ˜¯å› ä¸ºé•œåƒæ‹‰å–ç­–ç•¥å¯¼è‡´æ¯æ¬¡éƒ½é‡æ–°ä¸‹è½½é—®é¢˜ï¼Œå¯é€šè¿‡ä¸‹é¢å‘½ä»¤æˆ–è€…kubernetes-dashboardä¿®æ”¹ï¼Œå°†<code>Always</code> æ”¹ä¸º <code>IfNotPresent</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl edit pod æœªå¯åŠ¨podçš„åç§° -n kubeflow</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>kubectl get pods --namespace kubeflow</code>æŸ¥çœ‹kubeflowçš„podéƒ½å·²è¿è¡Œèµ·æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">NAME                                                           READY   STATUS      RESTARTS   AGE</span><br><span class="line">admission-webhook-bootstrap-stateful-set-0                     1/1     Running     6          2d4h</span><br><span class="line">admission-webhook-deployment-569558c8b6-n8b7k                  1/1     Running     0          13h</span><br><span class="line">application-controller-stateful-set-0                          1/1     Running     3          2d4h</span><br><span class="line">argo-ui-7ffb9b6577-w8pb7                                       1/1     Running     7          3d7h</span><br><span class="line">centraldashboard-659bd78c-fxgqd                                1/1     Running     3          3d7h</span><br><span class="line">jupyter-web-app-deployment-878f9c988-xgh82                     1/1     Running     3          2d5h</span><br><span class="line">katib-controller-7f58569f7d-8bw7z                              1/1     Running     4          3d7h</span><br><span class="line">katib-db-manager-54b66f9f9d-ngqw9                              1/1     Running     3          3d7h</span><br><span class="line">katib-mysql-dcf7dcbd5-7wbck                                    1/1     Running     12         4d1h</span><br><span class="line">katib-ui-6f97756598-4mtjs                                      1/1     Running     3          3d7h</span><br><span class="line">kfserving-controller-manager-0                                 2/2     Running     7          2d5h</span><br><span class="line">metacontroller-0                                               1/1     Running     5          3d7h</span><br><span class="line">metadata-db-65fb5b695d-wq8vh                                   1/1     Running     12         4d1h</span><br><span class="line">metadata-deployment-65ccddfd4c-vwfd2                           1/1     Running     3          3d7h</span><br><span class="line">metadata-envoy-deployment-7754f56bff-svtz2                     1/1     Running     3          3d7h</span><br><span class="line">metadata-grpc-deployment-75f9888cbf-zj4sn                      1/1     Running     5          3d7h</span><br><span class="line">metadata-ui-7c85545947-v68l7                                   1/1     Running     3          3d7h</span><br><span class="line">minio-69b4676bb7-w96xk                                         1/1     Running     12         4d1h</span><br><span class="line">ml-pipeline-5cddb75848-bsc48                                   1/1     Running     3          2d6h</span><br><span class="line">ml-pipeline-ml-pipeline-visualizationserver-7f6fcb68c8-vxjj7   1/1     Running     3          2d7h</span><br><span class="line">ml-pipeline-persistenceagent-6ff9fb86dc-dvxx4                  1/1     Running     5          2d6h</span><br><span class="line">ml-pipeline-scheduledworkflow-7f84b54646-ndxcb                 1/1     Running     3          2d7h</span><br><span class="line">ml-pipeline-ui-6758f58868-gqvlp                                1/1     Running     3          2d6h</span><br><span class="line">ml-pipeline-viewer-controller-deployment-685874bc58-jljw8      1/1     Running     3          2d5h</span><br><span class="line">mysql-6bcbfbb6b8-xmphz                                         1/1     Running     12         4d1h</span><br><span class="line">notebook-controller-deployment-7db7c8589d-mlgb4                1/1     Running     3          2d5h</span><br><span class="line">profiles-deployment-56b7c6788f-kk8kh                           2/2     Running     6          2d7h</span><br><span class="line">pytorch-operator-cf8c5c497-nmfnv                               1/1     Running     7          3d7h</span><br><span class="line">seldon-controller-manager-6b4b969447-qp7l4                     1/1     Running     20         4d1h</span><br><span class="line">spark-operatorcrd-cleanup-rrpxd                                0/2     Completed   0          3d7h</span><br><span class="line">spark-operatorsparkoperator-76dd5f5688-kn28n                   1/1     Running     3          3d7h</span><br><span class="line">spartakus-volunteer-5dc96f4447-xjclm                           1/1     Running     3          3d7h</span><br><span class="line">tensorboard-5f685f9d79-9x549                                   1/1     Running     12         4d1h</span><br><span class="line">tf-job-operator-5fb85c5fb7-lqvrg                               1/1     Running     6          3d7h</span><br><span class="line">workflow-controller-689d6c8846-znvt9                           1/1     Running     12         4d1h</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œç«¯å£æ˜ å°„è®¿é—®Kubeflow UI</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup kubectl port-forward -n istio-system svc/istio-ingressgateway 8088:80 &amp;</span><br></pre></td></tr></table></figure><p>è®¿é—®<a href="http://127.0.0.1:8088/" target="_blank" rel="noopener">http://127.0.0.1:8088/</a></p><p><img src="/images/media/é€‰åŒº_053.png" alt></p><h4 id="åˆ›å»ºJupyter-notebook-server"><a href="#åˆ›å»ºJupyter-notebook-server" class="headerlink" title="åˆ›å»ºJupyter notebook server"></a>åˆ›å»ºJupyter notebook server</h4><p><img src="/images/media/é€‰åŒº_054.png" alt></p><p><img src="/images/media/é€‰åŒº_055.png" alt></p><p><img src="/images/media/é€‰åŒº_056.png" alt></p><p>ç‚¹å‡»è¿æ¥ä¹‹åå°±å¯ä»¥è·‘æ¨¡å‹è®­ç»ƒäº†</p><h4 id="æµ‹è¯•Jupyter"><a href="#æµ‹è¯•Jupyter" class="headerlink" title="æµ‹è¯•Jupyter"></a>æµ‹è¯•Jupyter</h4><p>åˆ›å»ºPython 3 notebookï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">from tensorflow.examples.tutorials.mnist import input_data</span><br><span class="line">mnist = input_data.read_data_sets(&quot;MNIST_data/&quot;, one_hot=True)</span><br><span class="line"></span><br><span class="line">import tensorflow as tf</span><br><span class="line"></span><br><span class="line">x = tf.placeholder(tf.float32, [None, 784])</span><br><span class="line"></span><br><span class="line">W = tf.Variable(tf.zeros([784, 10]))</span><br><span class="line">b = tf.Variable(tf.zeros([10]))</span><br><span class="line"></span><br><span class="line">y = tf.nn.softmax(tf.matmul(x, W) + b)</span><br><span class="line"></span><br><span class="line">y_ = tf.placeholder(tf.float32, [None, 10])</span><br><span class="line">cross_entropy = tf.reduce_mean(-tf.reduce_sum(y_ * tf.log(y), reduction_indices=[1]))</span><br><span class="line"></span><br><span class="line">train_step = tf.train.GradientDescentOptimizer(0.05).minimize(cross_entropy)</span><br><span class="line"></span><br><span class="line">sess = tf.InteractiveSession()</span><br><span class="line">tf.global_variables_initializer().run()</span><br><span class="line"></span><br><span class="line">for _ in range(1000):</span><br><span class="line">  batch_xs, batch_ys = mnist.train.next_batch(100)</span><br><span class="line">  sess.run(train_step, feed_dict=&#123;x: batch_xs, y_: batch_ys&#125;)</span><br><span class="line"></span><br><span class="line">correct_prediction = tf.equal(tf.argmax(y,1), tf.argmax(y_,1))</span><br><span class="line">accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))</span><br><span class="line">print(&quot;Accuracy: &quot;, sess.run(accuracy, feed_dict=&#123;x: mnist.test.images, y_: mnist.test.labels&#125;))</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accuracy:  0.9012</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•pipelines"><a href="#æµ‹è¯•pipelines" class="headerlink" title="æµ‹è¯•pipelines"></a>æµ‹è¯•pipelines</h4><p><img src="/images/media/é€‰åŒº_079.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.kubeflow.org/docs&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Kubeflow&lt;/a&gt;æ˜¯Googleæ¨å‡ºçš„åŸºäºkubernetesç¯å¢ƒä¸‹çš„æœºå™¨å­¦ä¹ ç»„ä»¶ï¼Œé€šè¿‡Kubeflowå¯ä»¥å®ç°å¯¹TFJobç­‰èµ„æºç±»å‹å®šä¹‰ï¼Œå¯ä»¥åƒéƒ¨ç½²åº”ç”¨ä¸€æ ·å®Œæˆåœ¨TFJobåˆ†å¸ƒå¼è®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ã€‚æœ€åˆçš„è®¾è®¡æ˜¯å°†Kuberneteså’ŒTensorflowç»“åˆå®ç°å¯¹Tensorflowåˆ†å¸ƒå¼è®­ç»ƒçš„æ”¯æŒã€‚ä½†æ˜¯ä»…ä»…å®ç°å¯¹Tensorflowçš„æ”¯æŒè¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œ&lt;code&gt;Kubeflow&lt;/code&gt;ç¤¾åŒºåˆé™†ç»­å¯¹å„ç§æ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œæ”¯æŒ,ä¾‹å¦‚:&lt;code&gt;MXNet&lt;/code&gt;, &lt;code&gt;Caffee&lt;/code&gt;, &lt;code&gt;PyTorch&lt;/code&gt;ç­‰ã€‚ä½¿å¾—æœºå™¨å­¦ä¹ ç®—æ³•åŒå­¦åªéœ€å…³å¿ƒç®—æ³•å®ç°ï¼Œè€Œåç»­çš„æ¨¡å‹è®­ç»ƒå’ŒæœåŠ¡ä¸Šçº¿éƒ½äº¤ç»™å¹³å°æ¥åš,è§£æ”¾ç®—æ³•åŒå­¦ä½¿å…¶ä¸“åšè‡ªå·±æ“…é•¿çš„äº‹å„¿ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="kubeflow" scheme="https://blog.flyfox.top/categories/kubeflow/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="microk8s" scheme="https://blog.flyfox.top/tags/microk8s/"/>
    
      <category term="kubeflow" scheme="https://blog.flyfox.top/tags/kubeflow/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu 18.04å®‰è£…microk8sæ•™ç¨‹</title>
    <link href="https://blog.flyfox.top/2020/04/03/microk8s%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <id>https://blog.flyfox.top/2020/04/03/microk8så®‰è£…æ•™ç¨‹/</id>
    <published>2020-04-03T12:21:11.000Z</published>
    <updated>2020-04-26T09:41:04.624Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://microk8s.io/" target="_blank" rel="noopener">Microk8s</a>æ˜¯ä¸€ä¸ªé›†æˆåŒ–çš„å®¹å™¨ç®¡ç†å¹³å°ï¼Œä¸Kuberneteså®Œå…¨å…¼å®¹ï¼Œä¸»è¦é¢å‘å·¥ä½œç«™ã€è¾¹ç¼˜è®¡ç®—å’ŒIoTç­‰é¢†åŸŸå»ºç«‹å®¹å™¨è®¡ç®—å¹³å°ã€‚</p><a id="more"></a><h4 id="å®‰è£…-microk8s"><a href="#å®‰è£…-microk8s" class="headerlink" title="å®‰è£… microk8s"></a>å®‰è£… microk8s</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap install microk8s --classic --channel=1.15/stable</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®åˆ«å"><a href="#è®¾ç½®åˆ«å" class="headerlink" title="è®¾ç½®åˆ«å"></a>è®¾ç½®åˆ«å</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap alias microk8s.kubectl kubectl</span><br></pre></td></tr></table></figure><h4 id="configé…ç½®"><a href="#configé…ç½®" class="headerlink" title="configé…ç½®"></a>configé…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo microk8s.kubectl config view --raw &gt; $HOME/.kube/config</span><br></pre></td></tr></table></figure><h4 id="å¯ç”¨k8sç»„ä»¶"><a href="#å¯ç”¨k8sç»„ä»¶" class="headerlink" title="å¯ç”¨k8sç»„ä»¶"></a>å¯ç”¨k8sç»„ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">microk8s.enable dashboard dns ingress istio registry storage</span><br></pre></td></tr></table></figure><h4 id="å¦‚æœæœ‰GPU"><a href="#å¦‚æœæœ‰GPU" class="headerlink" title="å¦‚æœæœ‰GPU"></a>å¦‚æœæœ‰GPU</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">microk8s.enable gpu</span><br></pre></td></tr></table></figure><h4 id="æ‰§è¡Œ-microk8s-enable-é¡ºåˆ©çš„è¯ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—"><a href="#æ‰§è¡Œ-microk8s-enable-é¡ºåˆ©çš„è¯ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—" class="headerlink" title="æ‰§è¡Œ microk8s.enable é¡ºåˆ©çš„è¯ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—"></a>æ‰§è¡Œ <code>microk8s.enable</code> é¡ºåˆ©çš„è¯ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">logentry.config.istio.io/accesslog created</span><br><span class="line">logentry.config.istio.io/tcpaccesslog created</span><br><span class="line">rule.config.istio.io/stdio created</span><br><span class="line">rule.config.istio.io/stdiotcp created</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">Istio is starting</span><br><span class="line">Enabling the private registry</span><br><span class="line">Enabling default storage class</span><br><span class="line">deployment.extensions/hostpath-provisioner created</span><br><span class="line">storageclass.storage.k8s.io/microk8s-hostpath created</span><br><span class="line">Storage will be available soon</span><br><span class="line">Applying registry manifest</span><br><span class="line">namespace/container-registry created</span><br><span class="line">persistentvolumeclaim/registry-claim created</span><br><span class="line">deployment.extensions/registry created</span><br><span class="line">service/registry created</span><br><span class="line">The registry is enabled</span><br><span class="line">Enabling default storage class</span><br><span class="line">deployment.extensions/hostpath-provisioner unchanged</span><br><span class="line">storageclass.storage.k8s.io/microk8s-hostpath unchanged</span><br><span class="line">Storage will be available soon</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-microk8s-status-æ£€æŸ¥å„ä¸ªç»„ä»¶çš„çŠ¶æ€"><a href="#ä½¿ç”¨-microk8s-status-æ£€æŸ¥å„ä¸ªç»„ä»¶çš„çŠ¶æ€" class="headerlink" title="ä½¿ç”¨ microk8s.status æ£€æŸ¥å„ä¸ªç»„ä»¶çš„çŠ¶æ€"></a>ä½¿ç”¨ <code>microk8s.status</code> æ£€æŸ¥å„ä¸ªç»„ä»¶çš„çŠ¶æ€</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">microk8s is running</span><br><span class="line">addons:</span><br><span class="line">knative: disabled</span><br><span class="line">jaeger: disabled</span><br><span class="line">fluentd: disabled</span><br><span class="line">gpu: enabled</span><br><span class="line">cilium: disabled</span><br><span class="line">storage: enabled</span><br><span class="line">registry: enabled</span><br><span class="line">rbac: disabled</span><br><span class="line">ingress: enabled</span><br><span class="line">dns: enabled</span><br><span class="line">metrics-server: disabled</span><br><span class="line">linkerd: disabled</span><br><span class="line">prometheus: disabled</span><br><span class="line">istio: enabled</span><br><span class="line">dashboard: enabled</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-microk8s-inspect-æ’æŸ¥ä¸‹å®‰è£…éƒ¨ç½²ç»“æœ"><a href="#ä½¿ç”¨-microk8s-inspect-æ’æŸ¥ä¸‹å®‰è£…éƒ¨ç½²ç»“æœ" class="headerlink" title="ä½¿ç”¨ microk8s.inspect æ’æŸ¥ä¸‹å®‰è£…éƒ¨ç½²ç»“æœ"></a>ä½¿ç”¨ <code>microk8s.inspect</code> æ’æŸ¥ä¸‹å®‰è£…éƒ¨ç½²ç»“æœ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Inspecting services</span><br><span class="line">  Service snap.microk8s.daemon-containerd is running</span><br><span class="line">  Service snap.microk8s.daemon-docker is running</span><br><span class="line">  Service snap.microk8s.daemon-apiserver is running</span><br><span class="line">  Service snap.microk8s.daemon-proxy is running</span><br><span class="line">  Service snap.microk8s.daemon-kubelet is running</span><br><span class="line">  Service snap.microk8s.daemon-scheduler is running</span><br><span class="line">  Service snap.microk8s.daemon-controller-manager is running</span><br><span class="line">  Service snap.microk8s.daemon-etcd is running</span><br><span class="line">  Copy service arguments to the final report tarball</span><br><span class="line">Inspecting AppArmor configuration</span><br><span class="line">Gathering system info</span><br><span class="line">  Copy network configuration to the final report tarball</span><br><span class="line">  Copy processes list to the final report tarball</span><br><span class="line">  Copy snap list to the final report tarball</span><br><span class="line">  Inspect kubernetes cluster</span><br><span class="line"></span><br><span class="line"> WARNING:  IPtables FORWARD policy is DROP. Consider enabling traffic forwarding with: sudo iptables -P FORWARD ACCEPT</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw default allow routed</span><br><span class="line">sudo iptables -P FORWARD ACCEPT</span><br></pre></td></tr></table></figure><p>å†æ¬¡ä½¿ç”¨ <code>microk8s.inspect</code> å‘½ä»¤æ£€æŸ¥ï¼Œä¼šå‘ç° WARNINGæ¶ˆå¤±äº†</p><h4 id="ä½¿ç”¨-microk8s-kubectl-get-pods-all-namespaces-æŸ¥çœ‹å½“å‰-Kubernetes-pods-çŠ¶æ€"><a href="#ä½¿ç”¨-microk8s-kubectl-get-pods-all-namespaces-æŸ¥çœ‹å½“å‰-Kubernetes-pods-çŠ¶æ€" class="headerlink" title="ä½¿ç”¨ microk8s.kubectl get pods --all-namespaces æŸ¥çœ‹å½“å‰ Kubernetes pods çŠ¶æ€"></a>ä½¿ç”¨ <code>microk8s.kubectl get pods --all-namespaces</code> æŸ¥çœ‹å½“å‰ Kubernetes pods çŠ¶æ€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NAMESPACE            NAME                                              READY   STATUS              RESTARTS   AGE</span><br><span class="line">container-registry   registry-7fc4594d64-rrgs9                         0/1     Pending             0          15m</span><br><span class="line">default              default-http-backend-855bc7bc45-t4st8             0/1     ContainerCreating   0          16m</span><br><span class="line">default              nginx-ingress-microk8s-controller-kgjtl           0/1     ContainerCreating   0          16m</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å¤§éƒ¨åˆ†podéƒ½æ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼Œä»€ä¹ˆåŸå› å‘¢ï¼Ÿ</p><h4 id="ä½¿ç”¨-describe-å‘½ä»¤æŸ¥çœ‹-pod"><a href="#ä½¿ç”¨-describe-å‘½ä»¤æŸ¥çœ‹-pod" class="headerlink" title="ä½¿ç”¨ describe å‘½ä»¤æŸ¥çœ‹ pod"></a>ä½¿ç”¨ describe å‘½ä»¤æŸ¥çœ‹ pod</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl describe pod default-http-backend -n container-registry</span><br></pre></td></tr></table></figure><p>æ—¥å¿—å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Events:</span><br><span class="line">  Type     Reason                  Age                   From                              Message</span><br><span class="line">  ----     ------                  ----                  ----                              -------</span><br><span class="line">  Warning  FailedCreatePodSandBox  22m (x33 over 69m)    kubelet, izwz9h8m2chowowqckbcy0z  Failed create pod sandbox: rpc error: code = Unknown desc = failed to get sandbox image &quot;k8s.gcr.io/pause:3.1&quot;: failed to pull image &quot;k8s.gcr.io/pause:3.1&quot;: failed to resolve image &quot;k8s.gcr.io/pause:3.1&quot;: no available registry endpoint: failed to do request: Head https://k8s.gcr.io/v2/pause/manifests/3.1: dial tcp 108.177.97.82:443: i/o timeout</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ pod çš„ sandbox é•œåƒæ‹‰å–å¤±è´¥ã€‚ </p><p>ç½‘ä¸ŠæŸ¥èµ„æ–™ï¼Œk8s.gcr.io/pause:3.1 æ˜¯å­˜æ”¾åœ¨ google cloud ä¸Šçš„é•œåƒï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œè®¿é—®å¤±è´¥äº†ã€‚</p><p>è§£å†³çš„æ–¹æ³•æœ‰ï¼š</p><ol><li>ç§‘å­¦ä¸Šç½‘</li><li>æ‰‹åŠ¨ä¸‹è½½é•œåƒ</li></ol><h4 id="æ–¹æ³•1æ“ä½œæµç¨‹"><a href="#æ–¹æ³•1æ“ä½œæµç¨‹" class="headerlink" title="æ–¹æ³•1æ“ä½œæµç¨‹"></a>æ–¹æ³•1æ“ä½œæµç¨‹</h4><p>ç¼–è¾‘ MicroK8s ä½¿ç”¨çš„ docker ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œ<code>vim /var/snap/microk8s/current/args/containerd-env</code>åœ¨å…¶ä¸­æ·»åŠ ä»£ç†é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTPS_PROXY=https://127.0.0.1:8123</span><br></pre></td></tr></table></figure><p>é‡å¯ docker </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart snap.microk8s.daemon-docker.service</span><br></pre></td></tr></table></figure><p>é‡ç½® MicroK8s å¹¶å†æ¬¡å°è¯•å®‰è£…å„ç§ç»„ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">microk8s.reset</span><br><span class="line">microk8s.enable dashboard dns ingress istio registry storage</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•2æ“ä½œæµç¨‹"><a href="#æ–¹æ³•2æ“ä½œæµç¨‹" class="headerlink" title="æ–¹æ³•2æ“ä½œæµç¨‹"></a>æ–¹æ³•2æ“ä½œæµç¨‹</h4><p>å®‰è£… docker</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker-ce</span><br></pre></td></tr></table></figure><p>æ„Ÿè°¢å¾®è½¯ azure æä¾› gcr é•œåƒä¸‹è½½ï¼š<a href="http://mirror.azure.cn/help/gcr-proxy-cache.html" target="_blank" rel="noopener">åœ°å€</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull gcr.azk8s.cn/google_containers/pause:3.1</span><br><span class="line">docker tag gcr.azk8s.cn/google_containers/pause:3.1 k8s.gcr.io/pause:3.1</span><br></pre></td></tr></table></figure><p><strong>v1.14 ä¹‹å microk8s ä½¿ç”¨ containerd ä»£æ›¿ dockerd</strong>ï¼Œå…·ä½“å¯è§è¿™ä¸ª<a href="https://github.com/ubuntu/microk8s/issues/382" target="_blank" rel="noopener">issue</a></p><blockquote><p>Indeed in the 1.14 release contanerd replaced dockerd.</p></blockquote><p>è¦ä¹ˆä½¿ç”¨ç§æœ‰ä»“åº“ registryï¼Œè¦ä¹ˆæ‰‹åŠ¨æŠŠ docker é•œåƒå¯¼å…¥åˆ° containerdã€‚microk8s å®˜ç½‘æä¾›äº†ä¾‹å­ï¼š<a href="https://microk8s.io/docs/working" target="_blank" rel="noopener">Working with locally built images without a registry</a>ã€‚ è¿™é‡Œå…ˆä½¿ç”¨æ‰‹åŠ¨æ“ä½œï¼Œä»¥åå†å»ºç«‹ç§æœ‰ä»“åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker save k8s.gcr.io/pause:3.1 &gt; pause.tar</span><br><span class="line">microk8s.ctr -n k8s.io image import pause.tar</span><br></pre></td></tr></table></figure><p><code>-n</code> æ˜¯æŒ‡å®š namespaceã€‚<code>microk8s.ctr -n k8s.io image ls</code>ï¼Œçœ‹åˆ°å¯¼å…¥çš„é•œåƒäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k8s.gcr.io/pause:3.1                                                                             application/vnd.oci.image.manifest.v1+json                sha256:3efe4ff64c93123e1217b0ad6d23b4c87a1fc2109afeff55d2f27d70c55d8f73 728.9 KiB linux/amd64 io.cri-containerd.image=managed</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç»„ä»¶å¦‚æœé‡åˆ°gcr.ioæ— æ³•è®¿é—®çš„æƒ…å†µä¹Ÿå¯ä½¿ç”¨å¦‚ä¸Šçš„æ–¹æ³•ï¼Œè¿™é‡Œç‰¹åˆ«å†™äº†ä¸ªè„šæœ¬æ¥è‡ªåŠ¨ä¸‹è½½å¹¶å¯¼å…¥è¿™äº›é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">echo ""</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo "pull microk8s v1.15.11 images from aliyuncs ..."</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo ""</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> registry.cn-hangzhou.aliyuncs.com/smartliby</span></span><br><span class="line"></span><br><span class="line">gcr_imgs=(</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/pause:3.1,k8s.gcr.io/pause:3.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/heapster-influxdb-amd64:v1.3.3,k8s.gcr.io/heapster-influxdb-amd64:v1.3.3"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/heapster-grafana-amd64:v4.4.3,k8s.gcr.io/heapster-grafana-amd64:v4.4.3"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kubernetes-dashboard-amd64:v1.10.1,k8s.gcr.io/google_containers/kubernetes-dashboard-amd64:v1.10.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/heapster-amd64:v1.5.2,k8s.gcr.io/heapster-amd64:v1.5.2"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/defaultbackend-amd64:1.4,gcr.io/google_containers/defaultbackend-amd64:1.4"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/nginx-ingress-controller-amd64:0.24.1,quay.io/kubernetes-ingress-controller/nginx-ingress-controller-amd64:0.24.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/grafana:6.1.6,grafana/grafana:6.1.6"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/addon-resizer-amd64:1.8.1,cdkbot/addon-resizer-amd64:1.8.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/hostpath-provisioner-amd64:1.0.0,cdkbot/hostpath-provisioner-amd64:1.0.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/dashboard:v2.0.0-rc5,kubernetesui/dashboard:v2.0.0-rc5"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/k8s-device-plugin:1.11,nvidia/k8s-device-plugin:1.11"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/controller:v0.8.2,metallb/controller:v0.8.2"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/speaker:v0.8.2,metallb/speaker:v0.8.2"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/citadel:1.3.4,docker.io/istio/citadel:1.3.4"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/jujud-operator:2.7.3,jujusolutions/jujud-operator:2.7.3"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kicbase:v0.0.8,gcr.io/k8s-minikube/kicbase:v0.0.8"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/k8s-dns-dnsmasq-nanny-amd64:1.14.7,gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/k8s-dns-kube-dns-amd64:1.14.7,gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.7"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/k8s-dns-sidecar-amd64:1.14.7,gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.7"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kubernetes-dashboard-amd64:v1.8.3,k8s.gcr.io/kubernetes-dashboard-amd64:v1.8.3"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/cert-manager-controller:v0.11.0,quay.io/jetstack/cert-manager-controller:v0.11.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/sidecar_injector:1.1.6,docker.io/istio/sidecar_injector:1.1.6"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/prometheus:v2.3.1,docker.io/prom/prometheus:v2.3.1"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/galley:1.1.6,docker.io/istio/galley:1.1.6"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/cert-manager-cainjector:v0.11.0,quay.io/jetstack/cert-manager-cainjector:v0.11.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/cert-manager-webhook:v0.11.0,quay.io/jetstack/cert-manager-webhook:v0.11.0"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/application:1.0-beta,gcr.io/kubeflow-images-public/kubernetes-sigs/application:1.0-beta"</span><br><span class="line">    "registry.cn-hangzhou.aliyuncs.com/smartliby/kiali:v0.16,docker.io/kiali/kiali:v0.16"</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">for img in $&#123;gcr_imgs[@]&#125;</span><br><span class="line">do</span><br><span class="line">    img_array=($&#123;img//,/ &#125;)</span><br><span class="line">    # æ‹‰å–é•œåƒ</span><br><span class="line">    docker pull $&#123;img_array[0]&#125;</span><br><span class="line">    # æ·»åŠ Tag</span><br><span class="line">    image_name=$&#123;img_array[1]&#125;</span><br><span class="line">    image_name=$&#123;image_name%@*&#125;</span><br><span class="line">    docker tag $&#123;img_array[0]&#125; $&#123;image_name&#125;</span><br><span class="line">    # è¾“å‡º</span><br><span class="line">    docker save $&#123;image_name&#125; &gt; /data/k8s_img/k8s/$&#123;image_name##*/&#125;.tar</span><br><span class="line">    # è¾“å…¥</span><br><span class="line">    microk8s.ctr --namespace k8s.io image import /data/k8s_img/k8s/$&#123;image_name##*/&#125;.tar</span><br><span class="line">    # åˆ é™¤Tag</span><br><span class="line">    docker rmi $&#123;img_array[0]&#125; $&#123;image_name&#125;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo ""</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo "pull microk8s  v1.15.11 images from aliyuncs finished."</span><br><span class="line">echo "=========================================================="</span><br><span class="line">echo ""</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>microk8s.kubectl get pods --all-namespaces</code> ç»§ç»­è¿›è¡ŒéªŒè¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">NAMESPACE            NAME                                                           READY   STATUS             RESTARTS   AGE</span><br><span class="line">cert-manager         cert-manager-5d849b9888-8nh9j                                  1/1     Running            12         3d18h</span><br><span class="line">cert-manager         cert-manager-cainjector-dccb4d7f-7rrkf                         1/1     Running            15         3d</span><br><span class="line">cert-manager         cert-manager-webhook-695df7dbb-gpsqs                           1/1     Running            12         3d18h</span><br><span class="line">container-registry   registry-6c99589dc-gttcq                                       1/1     Running            15         4d4h</span><br><span class="line">default              default-http-backend-5d5ff5d4f5-g9h8h                          1/1     Running            15         4d4h</span><br><span class="line">default              nginx-ingress-microk8s-controller-td2mz                        1/1     Running   59         3h26m</span><br><span class="line">istio-system         cluster-local-gateway-7bf56777fb-rbjjn                         1/1     Running            12         3d18h</span><br><span class="line">istio-system         grafana-6575997f54-j77rc                                       1/1     Running            6          3d</span><br><span class="line">istio-system         istio-citadel-894d98c85-xr8qm                                  1/1     Running            12         3d19h</span><br><span class="line">istio-system         istio-cleanup-secrets-1.2.2-l4djr                              0/1     Completed          0          3d19h</span><br><span class="line">istio-system         istio-egressgateway-9b7866bf5-h8ltc                            1/1     Running            10         3d</span><br><span class="line">istio-system         istio-galley-5b984f89b-w26n9                                   1/1     Running            0          6h43m</span><br><span class="line">istio-system         istio-grafana-post-install-1.2.2-v5sfg                         0/1     Completed          0          3d19h</span><br><span class="line">istio-system         istio-ingressgateway-75ddf64567-glfkm                          1/1     Running            12         3d19h</span><br><span class="line">istio-system         istio-pilot-5d77c559d4-nhc7d                                   2/2     Running            14         3d</span><br><span class="line">istio-system         istio-policy-86478df5d4-w2lgb                                  2/2     Running            46         3d</span><br><span class="line">istio-system         istio-security-post-install-1.2.2-sczrc                        0/1     Completed          0          3d19h</span><br><span class="line">istio-system         istio-sidecar-injector-7b98dd6bcc-g597g                        1/1     Running            8          3d</span><br><span class="line">istio-system         istio-telemetry-786747687f-t8k6k                               2/2     Running            35         3d</span><br><span class="line">istio-system         istio-tracing-555cf644d-4d9f4                                  1/1     Running            13         3d19h</span><br><span class="line">istio-system         kfserving-ingressgateway-64c7bd9b76-2rcxt                      1/1     Running            12         3d18h</span><br><span class="line">istio-system         kiali-6cd6f9dfb5-tlwzq                                         1/1     Running            13         3d19h</span><br><span class="line">istio-system         prometheus-7d7b9f7844-swqf8                                    1/1     Running            19         3d19h</span><br><span class="line">kube-system          coredns-f7867546d-wkv76                                        1/1     Running            15         4d4h</span><br><span class="line">kube-system          heapster-v1.5.2-844b564688-kr9t8                               4/4     Running            60         4d4h</span><br><span class="line">kube-system          hostpath-provisioner-65cfd8595b-rjlhz                          1/1     Running            5          3d</span><br><span class="line">kube-system          kubernetes-dashboard-7d75c474bb-s7n2t                          1/1     Running            15         4d4h</span><br><span class="line">kube-system          monitoring-influxdb-grafana-v4-6b6954958c-spcqb                2/2     Running            32         4d4h</span><br><span class="line">kube-system          nvidia-device-plugin-daemonset-jv96f                           1/1     Running            14         3d23h</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çœ‹åˆ°çš„ç»“æœç±»ä¼¼ä¸Šé¢è¿™æ ·ï¼Œè¯´æ˜ Kubernetes æ˜¯çœŸçš„å°±ç»ªäº†ã€‚</p><h4 id="æŸ¥çœ‹-Dashboard"><a href="#æŸ¥çœ‹-Dashboard" class="headerlink" title="æŸ¥çœ‹ Dashboard"></a>æŸ¥çœ‹ Dashboard</h4><p><code>microk8s.kubectl describe service kubernetes-dashboard -n kube-system</code>è·å–è®¿é—®ipå’Œç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Name:              kubernetes-dashboard</span><br><span class="line">Namespace:         kube-system</span><br><span class="line">Labels:            k8s-app=kubernetes-dashboard</span><br><span class="line">Annotations:       kubectl.kubernetes.io/last-applied-configuration:</span><br><span class="line">                     &#123;&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Service&quot;,&quot;metadata&quot;:&#123;&quot;annotations&quot;:&#123;&#125;,&quot;labels&quot;:&#123;&quot;k8s-app&quot;:&quot;kubernetes-dashboard&quot;&#125;,&quot;name&quot;:&quot;kubernetes-dashboard&quot;...</span><br><span class="line">Selector:          k8s-app=kubernetes-dashboard</span><br><span class="line">Type:              ClusterIP</span><br><span class="line">IP:                10.152.183.151</span><br><span class="line">Port:              &lt;unset&gt;  443/TCP</span><br></pre></td></tr></table></figure><p>æ¥ç€è®¿é—®ä¸‹é¢çš„åœ°å€ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Dashboard</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://10.152.183.151/</span><br></pre></td></tr></table></figure><p><img src="/images/media/é€‰åŒº_051.png" alt></p><h4 id="ä½¿ç”¨ä»¤ç‰Œç™»å½•"><a href="#ä½¿ç”¨ä»¤ç‰Œç™»å½•" class="headerlink" title="ä½¿ç”¨ä»¤ç‰Œç™»å½•"></a>ä½¿ç”¨ä»¤ç‰Œç™»å½•</h4><p>è·å–token</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">token=$(microk8s kubectl -n kube-system get secret | grep default-token | cut -d " " -f1)</span><br><span class="line"> echo $token</span><br><span class="line">microk8s kubectl -n kube-system describe secret $token</span><br></pre></td></tr></table></figure><p>è¾“å…¥tokenåå°±è¿›å…¥ç®¡ç†é¡µé¢äº†</p><p><img src="/images/media/é€‰åŒº_052.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://microk8s.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Microk8s&lt;/a&gt;æ˜¯ä¸€ä¸ªé›†æˆåŒ–çš„å®¹å™¨ç®¡ç†å¹³å°ï¼Œä¸Kuberneteså®Œå…¨å…¼å®¹ï¼Œä¸»è¦é¢å‘å·¥ä½œç«™ã€è¾¹ç¼˜è®¡ç®—å’ŒIoTç­‰é¢†åŸŸå»ºç«‹å®¹å™¨è®¡ç®—å¹³å°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="k8s" scheme="https://blog.flyfox.top/categories/k8s/"/>
    
    
      <category term="k8s" scheme="https://blog.flyfox.top/tags/k8s/"/>
    
      <category term="microk8s" scheme="https://blog.flyfox.top/tags/microk8s/"/>
    
  </entry>
  
  <entry>
    <title>Macã€Ubuntuç³»ç»Ÿçš„ä¸‹è½½ç¥å™¨aria2</title>
    <link href="https://blog.flyfox.top/2019/05/12/Mac%E3%80%81Ubuntu%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%8B%E8%BD%BD%E7%A5%9E%E5%99%A8aria2/"/>
    <id>https://blog.flyfox.top/2019/05/12/Macã€Ubuntuç³»ç»Ÿçš„ä¸‹è½½ç¥å™¨aria2/</id>
    <published>2019-05-12T10:21:11.000Z</published>
    <updated>2020-04-07T15:38:58.076Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>Mac ç”¨æˆ·è‚¯å®šéƒ½å—å¤Ÿäº†ç™¾åº¦ç½‘ç›˜åœ¨è‡ªå·±ç”µè„‘ä¸Šçš„ç³Ÿç³•ä½“éªŒï¼Œè‡³å°‘æˆ‘æ˜¯å¦‚æ­¤ï¼šå®‰è£…å®˜æ–¹çš„ Appï¼Œç»å¸¸ä¸‹è½½æ—¶ä¸­æ–­ï¼Œæœ‰æ—¶ç”šè‡³ Bug èˆ¬è¿ç»­ä¸­æ–­ï¼Œæ— å¥ˆä½¿ç”¨æµè§ˆå™¨ä¸‹è½½ï¼Œé€Ÿåº¦å´æ˜¯ä»¤äººæŒ å¤´ã€‚èŠ±ç‚¹æ—¶é—´æ¥é…ç½® aria2ï¼Œç»“åˆ Chromeï¼Œä¸€å®šè®©ä½ èˆ’å¿ƒ</p><a id="more"></a><blockquote><p>aria2 æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>aria2 æ˜¯ä¸€æ¬¾æ”¯æŒå¤šç§åè®®çš„è½»é‡çº§å‘½ä»¤è¡Œä¸‹è½½å·¥å…·ã€‚æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>å¤šçº¿ç¨‹è¿çº¿ï¼šaria2 ä¼šè‡ªåŠ¨ä»å¤šä¸ªçº¿ç¨‹ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶å……åˆ†åˆ©ç”¨ä½ çš„å¸¦å®½ï¼›</li><li>è½»é‡ï¼šè¿è¡Œæ—¶ä¸ä¼šå ç”¨è¿‡å¤šèµ„æºï¼Œæ ¹æ®å®˜æ–¹ä»‹ç»ï¼Œå†…å­˜å ç”¨é€šå¸¸åœ¨ 4MB~9MBï¼Œä½¿ç”¨ BitTorrent åè®®ï¼Œä¸‹è¡Œé€Ÿåº¦ 2.8MB/s æ—¶ CPU å ç”¨ç‡çº¦ 6%ï¼›</li><li>å…¨åŠŸèƒ½ BitTorrent å®¢æˆ·ç«¯ï¼›</li><li>æ”¯æŒ RPC ç•Œé¢è¿œç¨‹æ§åˆ¶ï¼ˆä¸‹æ–‡é‡ç‚¹ä»‹ç»ï¼‰ã€‚</li></ul><blockquote><p>å¼€å§‹å§</p></blockquote><h1 id="1-å®‰è£…-aria2"><a href="#1-å®‰è£…-aria2" class="headerlink" title="1.å®‰è£… aria2"></a>1.å®‰è£… aria2</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install aria2</span><br></pre></td></tr></table></figure><h1 id="2-è®¾ç½®é…ç½®æ–‡ä»¶"><a href="#2-è®¾ç½®é…ç½®æ–‡ä»¶" class="headerlink" title="2.è®¾ç½®é…ç½®æ–‡ä»¶"></a>2.è®¾ç½®é…ç½®æ–‡ä»¶</h1><p>aria2 æä¾›ä¸¤ç§æ–¹å¼ä½¿ç”¨ï¼Œä¸€ç§æ˜¯ç›´æ¥å‘½ä»¤è¡Œæ¨¡å¼ä¸‹è½½ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ¨èä½¿ç”¨å¦å¤–ä¸€ç§ RPC æ¨¡å¼ï¼Œè¿™ç§æ–¹å¼ aria å¯åŠ¨ä¹‹ååªä¼šå®‰é™çš„ç­‰å¾…ä¸‹è½½è¯·æ±‚ï¼Œä¸‹è½½å®Œæˆåä¹Ÿåªä¼šå®‰é™çš„é©»ç•™åå°ä¸ä¼šè‡ªåŠ¨é€€å‡ºã€‚è€Œä½¿ç”¨RPCæ¨¡å¼æ¨èåšä¸€ä¸ªé…ç½®æ–‡ä»¶æ–¹ä¾¿ä½¿ç”¨ã€‚æˆ‘ä»¬æŠŠé…ç½®æ–‡ä»¶æ”¾åœ¨ ~/.aria2 ä¸‹ï¼Œä¾æ¬¡è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">mkdir .aria2</span><br><span class="line">cd .aria2</span><br><span class="line">vim aria2.conf</span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°aria2.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#ç”¨æˆ·å</span><br><span class="line">#rpc-user=user</span><br><span class="line">#å¯†ç </span><br><span class="line">#rpc-passwd=passwd</span><br><span class="line">#ä¸Šé¢çš„è®¤è¯æ–¹å¼ä¸å»ºè®®ä½¿ç”¨,å»ºè®®ä½¿ç”¨ä¸‹é¢çš„tokenæ–¹å¼</span><br><span class="line">#è®¾ç½®åŠ å¯†çš„å¯†é’¥</span><br><span class="line">#rpc-secret=token</span><br><span class="line">#å…è®¸rpc</span><br><span class="line">enable-rpc=true</span><br><span class="line">#å…è®¸æ‰€æœ‰æ¥æº, webç•Œé¢è·¨åŸŸæƒé™éœ€è¦</span><br><span class="line">rpc-allow-origin-all=true</span><br><span class="line">#å…è®¸å¤–éƒ¨è®¿é—®ï¼Œfalseçš„è¯åªç›‘å¬æœ¬åœ°ç«¯å£</span><br><span class="line">rpc-listen-all=true</span><br><span class="line">#RPCç«¯å£, ä»…å½“é»˜è®¤ç«¯å£è¢«å ç”¨æ—¶ä¿®æ”¹</span><br><span class="line">#rpc-listen-port=6800</span><br><span class="line">#æœ€å¤§åŒæ—¶ä¸‹è½½æ•°(ä»»åŠ¡æ•°), è·¯ç”±å»ºè®®å€¼: 3</span><br><span class="line">max-concurrent-downloads=5</span><br><span class="line">#æ–­ç‚¹ç»­ä¼ </span><br><span class="line">continue=true</span><br><span class="line">#åŒæœåŠ¡å™¨è¿æ¥æ•°</span><br><span class="line">max-connection-per-server=5</span><br><span class="line">#æœ€å°æ–‡ä»¶åˆ†ç‰‡å¤§å°, ä¸‹è½½çº¿ç¨‹æ•°ä¸Šé™å–å†³äºèƒ½åˆ†å‡ºå¤šå°‘ç‰‡, å¯¹äºå°æ–‡ä»¶é‡è¦</span><br><span class="line">min-split-size=10M</span><br><span class="line">#å•æ–‡ä»¶æœ€å¤§çº¿ç¨‹æ•°, è·¯ç”±å»ºè®®å€¼: 5</span><br><span class="line">split=10</span><br><span class="line">#ä¸‹è½½é€Ÿåº¦é™åˆ¶</span><br><span class="line">max-overall-download-limit=0</span><br><span class="line">#å•æ–‡ä»¶é€Ÿåº¦é™åˆ¶</span><br><span class="line">max-download-limit=0</span><br><span class="line">#ä¸Šä¼ é€Ÿåº¦é™åˆ¶</span><br><span class="line">max-overall-upload-limit=0</span><br><span class="line">#å•æ–‡ä»¶é€Ÿåº¦é™åˆ¶</span><br><span class="line">max-upload-limit=0</span><br><span class="line">#æ–­å¼€é€Ÿåº¦è¿‡æ…¢çš„è¿æ¥</span><br><span class="line">#lowest-speed-limit=0</span><br><span class="line">#éªŒè¯ç”¨ï¼Œéœ€è¦1.16.1ä¹‹åçš„releaseç‰ˆæœ¬</span><br><span class="line">#referer=*</span><br><span class="line">#æ–‡ä»¶ä¿å­˜è·¯å¾„, é»˜è®¤ä¸ºå½“å‰å¯åŠ¨ä½ç½®</span><br><span class="line">dir=/Users/xxx/Downloads</span><br><span class="line">#æ–‡ä»¶ç¼“å­˜, ä½¿ç”¨å†…ç½®çš„æ–‡ä»¶ç¼“å­˜, å¦‚æœä½ ä¸ç›¸ä¿¡Linuxå†…æ ¸æ–‡ä»¶ç¼“å­˜å’Œç£ç›˜å†…ç½®ç¼“å­˜æ—¶ä½¿ç”¨, éœ€è¦1.16åŠä»¥ä¸Šç‰ˆæœ¬</span><br><span class="line">#disk-cache=0</span><br><span class="line">#å¦ä¸€ç§Linuxæ–‡ä»¶ç¼“å­˜æ–¹å¼, ä½¿ç”¨å‰ç¡®ä¿æ‚¨ä½¿ç”¨çš„å†…æ ¸æ”¯æŒæ­¤é€‰é¡¹, éœ€è¦1.15åŠä»¥ä¸Šç‰ˆæœ¬(?)</span><br><span class="line">#enable-mmap=true</span><br><span class="line">#æ–‡ä»¶é¢„åˆ†é…, èƒ½æœ‰æ•ˆé™ä½æ–‡ä»¶ç¢ç‰‡, æé«˜ç£ç›˜æ€§èƒ½. ç¼ºç‚¹æ˜¯é¢„åˆ†é…æ—¶é—´è¾ƒé•¿</span><br><span class="line">#æ‰€éœ€æ—¶é—´ none &lt; falloc ? trunc Â« prealloc, fallocå’Œtruncéœ€è¦æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸æ”¯æŒ</span><br><span class="line">file-allocation=prealloc</span><br></pre></td></tr></table></figure><p>é»˜è®¤ä¸‹è½½è·¯å¾„çš„ã€Œ/Users/xxx/Downloadsã€å¯ä»¥æ”¹ä¸ºä»»ä½•ä½ æƒ³è¦çš„ç»å¯¹è·¯å¾„ã€‚æ­¤å¤„å†™ä¸º Downloads ç›®å½•ï¼Œxxx è¯·è‡ªè¡Œæ›¿æ¢æˆä½ çš„ Mac ç”¨æˆ·åï¼Œç„¶åä¿å­˜ï¼Œé€€å‡ºç¼–è¾‘å™¨ã€‚</p><h1 id="3-å¯åŠ¨-RPC-æ¨¡å¼"><a href="#3-å¯åŠ¨-RPC-æ¨¡å¼" class="headerlink" title="3.å¯åŠ¨ RPC æ¨¡å¼"></a>3.å¯åŠ¨ RPC æ¨¡å¼</h1><p>åœ¨ç»ˆç«¯è¾“å…¥aria2c â€“conf-path=â€/Users/xxxxxx/.aria2/aria2.confâ€ -Dï¼Œç„¶å aria2 å°±å¯åŠ¨äº†ï¼Œä½†æ˜¯å¦‚ä½•æå®šç™¾åº¦ç½‘ç›˜ï¼Ÿè¿˜éœ€è¦åœ¨Chromeç½‘ä¸Šåº”ç”¨å•†åº—ä¸‹è½½ç™¾åº¦ç½‘ç›˜åŠ©æ‰‹æ’ä»¶ã€‚</p><h1 id="4-è®¿é—®webUI"><a href="#4-è®¿é—®webUI" class="headerlink" title="4.è®¿é—®webUI"></a>4.è®¿é—®webUI</h1><p>é¦–å…ˆä»githubä¸­å…‹éš†webui-aria2é¡¹ç›®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ziahamza/webui-aria2</span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•ä¸€ï¼šä¸éœ€åˆ›å»ºä»»ä½• web æœåŠ¡å™¨ï¼Œåªéœ€ç›´æ¥åŒå‡»è¿è¡Œ index.html</li><li><p>æ–¹æ³•äºŒï¼šåœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer 6801</span><br></pre></td></tr></table></figure></li></ul><p>  åœ¨æµè§ˆå™¨ä¸­è®¿é—®<a href="http://localhost:6801" target="_blank" rel="noopener">http://localhost:6801</a> å³å¯</p><h1 id="5-å¦‚ä½•è¿›è¡Œä¸‹è½½æ“ä½œ"><a href="#5-å¦‚ä½•è¿›è¡Œä¸‹è½½æ“ä½œ" class="headerlink" title="5.å¦‚ä½•è¿›è¡Œä¸‹è½½æ“ä½œ"></a>5.å¦‚ä½•è¿›è¡Œä¸‹è½½æ“ä½œ</h1><p>éšä¾¿æ‰“å¼€ä¸€ä¸ªç™¾åº¦ç½‘ç›˜çš„é“¾æ¥ï¼Œä¼šå‘ç°ç½‘é¡µä¸Šå¤šå‡ºä¸€ä¸ªã€Œå¯¼å‡ºä¸‹è½½ã€æŒ‰é’®ï¼Œç‚¹å‡»å®ƒå¼¹å‡ºçš„ã€ŒARIA2 RPCã€å°±è‡ªåŠ¨æ·»åŠ åˆ°ä½ çš„ä¸‹è½½é˜Ÿåˆ—é‡Œäº†ï¼Œç„¶ååˆ©ç”¨ è¿™é‡Œ æä¾›çš„ç½‘é¡µç•Œé¢ç®¡ç†ä½ çš„ä¸‹è½½ä»»åŠ¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½ å¯ä»¥åˆ©ç”¨å›¾å½¢ç•Œé¢è¿›è¡Œè®¸å¤šæ“ä½œï¼š<br><img src="/images/media/aria2.png" alt></p><h1 id="6-å…³é—­-aria2"><a href="#6-å…³é—­-aria2" class="headerlink" title="6.å…³é—­ aria2"></a>6.å…³é—­ aria2</h1><p>å¦‚æœä½ æƒ³å…³æ‰åå°çš„ aria2ï¼Œå¯ä»¥åˆ°æ´»åŠ¨ç›‘è§†å™¨ä¸­æ‰¾åˆ° aria2c æ€æ‰</p><h1 id="7-è®¾ç½®aria2å¼€æœºè‡ªåŠ¨å¯åŠ¨"><a href="#7-è®¾ç½®aria2å¼€æœºè‡ªåŠ¨å¯åŠ¨" class="headerlink" title="7.è®¾ç½®aria2å¼€æœºè‡ªåŠ¨å¯åŠ¨"></a>7.è®¾ç½®aria2å¼€æœºè‡ªåŠ¨å¯åŠ¨</h1><p>åœ¨å®¶ç›®å½• <code>/Users/liby/</code> æ‰§è¡Œ <code>vim aria2-starter</code>,ç„¶åæ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">aria2c --conf-path=&quot;/Users/liby/.aria2/aria2.conf&quot; -D</span><br><span class="line">nohup python -m SimpleHTTPServer 6801 &amp;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>è®¾ç½®è¯¥è„šæœ¬ä¸ºå¯æ‰§è¡Œæ–‡ä»¶<br>æœ€ååœ¨ <code>ç³»ç»Ÿåå¥½è®¾ç½®</code>-&gt;<code>ç”¨æˆ·ä¸ç»„ç¾¤</code>-&gt;<code>ç™»å½•é¡¹</code> æ·»åŠ è¯¥æ‰§è¡Œè„šæœ¬</p><h1 id="8-æ€»ç»“"><a href="#8-æ€»ç»“" class="headerlink" title="8.æ€»ç»“"></a>8.æ€»ç»“</h1><p>é€šè¿‡ Aria2 ä¸‹è½½åï¼Œé€Ÿåº¦ä¸€èˆ¬å¯è¾¾300KBä»¥ä¸Šï¼Œå¦‚æœä¸ç”¨ï¼ŒåŒä¸€ä¸ªæ–‡ä»¶å¯èƒ½æ‰åªæœ‰å‡ åæˆ–è€…100Kå·¦å³çš„é€Ÿåº¦ï¼Œè¿™ä¸ªå·®åˆ«çœŸæ˜¯éå¸¸å¤§å•Šï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;Mac ç”¨æˆ·è‚¯å®šéƒ½å—å¤Ÿäº†ç™¾åº¦ç½‘ç›˜åœ¨è‡ªå·±ç”µè„‘ä¸Šçš„ç³Ÿç³•ä½“éªŒï¼Œè‡³å°‘æˆ‘æ˜¯å¦‚æ­¤ï¼šå®‰è£…å®˜æ–¹çš„ Appï¼Œç»å¸¸ä¸‹è½½æ—¶ä¸­æ–­ï¼Œæœ‰æ—¶ç”šè‡³ Bug èˆ¬è¿ç»­ä¸­æ–­ï¼Œæ— å¥ˆä½¿ç”¨æµè§ˆå™¨ä¸‹è½½ï¼Œé€Ÿåº¦å´æ˜¯ä»¤äººæŒ å¤´ã€‚èŠ±ç‚¹æ—¶é—´æ¥é…ç½® aria2ï¼Œç»“åˆ Chromeï¼Œä¸€å®šè®©ä½ èˆ’å¿ƒ&lt;/p&gt;
    
    </summary>
    
      <category term="Ubuntu" scheme="https://blog.flyfox.top/categories/Ubuntu/"/>
    
    
      <category term="ç³»ç»Ÿè®¾ç½®" scheme="https://blog.flyfox.top/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE/"/>
    
      <category term="aria2" scheme="https://blog.flyfox.top/tags/aria2/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu16.04ç³»ç»Ÿå·¥ä½œç¯å¢ƒè®¾ç½®</title>
    <link href="https://blog.flyfox.top/2017/03/11/Ubuntu16-04%E7%B3%BB%E7%BB%9F%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE/"/>
    <id>https://blog.flyfox.top/2017/03/11/Ubuntu16-04ç³»ç»Ÿå·¥ä½œç¯å¢ƒè®¾ç½®/</id>
    <published>2017-03-11T14:06:39.000Z</published>
    <updated>2020-04-07T15:40:13.297Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸»é¢˜ç¾åŒ–"><a href="#ä¸»é¢˜ç¾åŒ–" class="headerlink" title="ä¸»é¢˜ç¾åŒ–"></a>ä¸»é¢˜ç¾åŒ–</h1><p>1.æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Flatabulousä¸»é¢˜</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install unity-tweak-tool</span><br><span class="line">sudo add-apt-repository ppa:noobslab/themes</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install flatabulous-theme</span><br></pre></td></tr></table></figure><a id="more"></a><p>2.è¯¥ä¸»é¢˜æœ‰é…å¥—çš„å›¾æ ‡ï¼Œå®‰è£…æ–¹å¼å¦‚ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:noobslab/icons</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ultra-flat-icons</span><br></pre></td></tr></table></figure><p>3.å®‰è£…å®Œæˆåï¼Œæ‰“å¼€unity-tweak-toolè½¯ä»¶ï¼Œä¿®æ”¹ä¸»é¢˜å’Œå›¾æ ‡<br><img src="/images/media/é€‰åŒº_026.png" alt></p><p>4.è¿›å…¥Themeï¼Œä¿®æ”¹ä¸ºFlatabulous<br><img src="/images/media/Unity Tweak Tool_027.png" alt></p><p>5.åœ¨æ­¤ç•Œé¢ä¸‹è¿›å…¥Iconsæ ï¼Œä¿®æ”¹ä¸ºUltra-flat<br><img src="/images/media/Unity Tweak Tool_028.png" alt></p><p>6.å®‰è£…å­—ä½“YaHei Consolas Hybrid</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¦æƒ³å®‰è£…è¿™æ¬¾å­—ä½“ï¼Œé¦–å…ˆéœ€è¦å®‰è£… Font Manager (å­—ä½“ç®¡ç†)è½¯ä»¶ã€‚</span><br><span class="line">sudo apt-get install font-manager</span><br><span class="line">googleæœç´¢ YaHei.Consolas ä¸‹è½½è¿™æ¬¾å­—ä½“ã€‚</span><br><span class="line">åœ¨ Font Manager ä¸­ç‚¹å‡» Manager Fonts - Install Fonts ï¼Œå°±å¯ä»¥å®‰è£… ttf å­—ä½“äº†ã€‚</span><br></pre></td></tr></table></figure><h1 id="ç³»ç»Ÿæ›´æ–°"><a href="#ç³»ç»Ÿæ›´æ–°" class="headerlink" title="ç³»ç»Ÿæ›´æ–°"></a>ç³»ç»Ÿæ›´æ–°</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…vim"><a href="#å®‰è£…vim" class="headerlink" title="å®‰è£…vim"></a>å®‰è£…vim</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…-maximum-awesome-linux"><a href="#å®‰è£…-maximum-awesome-linux" class="headerlink" title="å®‰è£… maximum-awesome-linux"></a>å®‰è£… maximum-awesome-linux</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/smartliby/maximum-awesome-linux.git</span><br><span class="line">cd maximum-awesome-linux &amp;&amp; rake</span><br></pre></td></tr></table></figure><p><img src="/images/media/å·¥ä½œåŒº 1_040.png" alt></p><h1 id="å®‰è£…zshã€oh-my-zsh"><a href="#å®‰è£…zshã€oh-my-zsh" class="headerlink" title="å®‰è£…zshã€oh-my-zsh"></a>å®‰è£…zshã€oh-my-zsh</h1><p>å®‰è£…zsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zsh</span><br></pre></td></tr></table></figure><p>via curl download Oh My Zsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ°zsh</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /usr/bin/zsh</span><br></pre></td></tr></table></figure><p><img src="/images/media/liby@kingsoft:%20~_031.png" alt></p><h1 id="å®‰è£…terminator"><a href="#å®‰è£…terminator" class="headerlink" title="å®‰è£…terminator"></a>å®‰è£…terminator</h1><p>Ubuntuè‡ªå¸¦çš„ç»ˆç«¯æ˜¯gnome-terminalï¼Œè™½ç„¶ä¹Ÿè¿˜ä¸é”™ï¼Œä½†æ˜¯ä¸èƒ½æ”¯æŒå±å¹•åˆ†å‰²ã€é€‰æ‹©å¤åˆ¶ç­‰åŠŸèƒ½è®©æˆ‘å¾ˆä¸çˆ½ï¼Œäºæ˜¯æˆ‘æ¢ç”¨terminatorä½œä¸ºç»ˆç«¯ï¼Œterminatorå¯ä»¥æ”¯æŒå±å¹•åˆ†å‰²ï¼Œå¹¶ä¸”é»˜è®¤å¿«æ·é”®å’Œgnome-terminalæ— å¼‚ï¼Œç†Ÿæ‚‰gnome-terminalçš„è¯å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ã€‚</p><p>Ubuntuä¸‹å¯ä»¥è¿™æ ·å®‰è£…terminator</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install terminator</span><br></pre></td></tr></table></figure><p>terminatorå¸¸ç”¨å¿«æ·é”®</p><ul><li>Ctrl-Shift-c æ‹·è´</li><li>Ctrl-Shift-v ç²˜è´´</li><li>Ctrl-Shift-t å¼€æ–°Tabçª—å£</li><li>Ctrl-Shift-o ä¸Šä¸‹æ‹†åˆ†å±å¹•</li><li>Ctrl-Shift-e å·¦å³æ‹†åˆ†å±å¹•</li><li>Ctrl-Shift-w å…³é—­å½“å‰çª—å£</li><li>Ctrl-Shift-q å…³é—­æ•´ä¸ªç»ˆç«¯</li></ul><p>é…ç½®terminatorä½¿ç”¨solarizedé…è‰²</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.config/terminator/</span><br><span class="line">curl https://raw.github.com/ghuntley/terminator-solarized/master/config &gt; ~/.config/terminator/config</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°æ‰“å¼€terminatorå°±å·²ç»æ˜¯solarizedé…è‰²äº†ã€‚</p><p>å¯¹terminatoræ›´å¤šçš„é…ç½®</p><p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥åœ¨terminator-solarizedé…ç½®æ–‡ä»¶çš„åŸºç¡€ä¸Šè¿›è¡Œæ›´å¤šçš„é…ç½®ï¼Œä¾‹å¦‚èƒŒæ™¯é€æ˜ã€å¯ç”¨é€‰æ‹©å¤åˆ¶ç­‰ã€‚</p><p>å…³äºterminatorçš„è¯¦ç»†é…ç½®é€‰é¡¹å¯ä»¥å‚è€ƒ<a href="http://manpages.ubuntu.com/manpages/zesty/en/man5/terminator_config.5.html" target="_blank" rel="noopener">terminator manpage</a>ï¼Œä¸‹é¢è´´å‡ºæˆ‘çš„~/.config/terminator/configä¾›å‚è€ƒï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[global_config]</span><br><span class="line">    title_transmit_bg_color = <span class="string">"#d30102"</span></span><br><span class="line">    focus = system</span><br><span class="line">    suppress_multiple_term_dialog = True</span><br><span class="line">[keybindings]</span><br><span class="line">[profiles]</span><br><span class="line">    [[default]]</span><br><span class="line">        palette = <span class="string">"#073642:#dc322f:#859900:#b58900:#268bd2:#d33682:#2aa198:#eee8d5:#002b36:#cb4b16:#586e75:#657b83:#839496:#6c71c4:#93a1a1:#fdf6e3"</span></span><br><span class="line">        copy_on_selection = True</span><br><span class="line">        background_image = None</span><br><span class="line">        background_darkness = 0.95</span><br><span class="line">        background_type = transparent</span><br><span class="line">        use_system_font = False</span><br><span class="line">        cursor_color = <span class="string">"#eee8d5"</span></span><br><span class="line">        foreground_color = <span class="string">"#839496"</span></span><br><span class="line">        show_titlebar = False</span><br><span class="line">        font = Monospace 11</span><br><span class="line">        background_color = <span class="string">"#002b36"</span></span><br><span class="line">    [[solarized-dark]]</span><br><span class="line">        palette = <span class="string">"#073642:#dc322f:#859900:#b58900:#268bd2:#d33682:#2aa198:#eee8d5:#002b36:#cb4b16:#586e75:#657b83:#839496:#6c71c4:#93a1a1:#fdf6e3"</span></span><br><span class="line">        background_color = <span class="string">"#002b36"</span></span><br><span class="line">        background_image = None</span><br><span class="line">        cursor_color = <span class="string">"#eee8d5"</span></span><br><span class="line">        foreground_color = <span class="string">"#839496"</span></span><br><span class="line">    [[solarized-light]]</span><br><span class="line">        palette = <span class="string">"#073642:#dc322f:#859900:#b58900:#268bd2:#d33682:#2aa198:#eee8d5:#002b36:#cb4b16:#586e75:#657b83:#839496:#6c71c4:#93a1a1:#fdf6e3"</span></span><br><span class="line">        background_color = <span class="string">"#fdf6e3"</span></span><br><span class="line">        background_image = None</span><br><span class="line">        cursor_color = <span class="string">"#002b36"</span></span><br><span class="line">        foreground_color = <span class="string">"#657b83"</span></span><br><span class="line">[layouts]</span><br><span class="line">    [[default]]</span><br><span class="line">        [[[child1]]]</span><br><span class="line">            <span class="built_in">type</span> = Terminal</span><br><span class="line">            parent = window0</span><br><span class="line">            profile = default</span><br><span class="line">        [[[window0]]]</span><br><span class="line">            <span class="built_in">type</span> = Window</span><br><span class="line">            parent = <span class="string">""</span></span><br><span class="line">[plugins]</span><br></pre></td></tr></table></figure><p>é…ç½®dircolors</p><p>å®Œæˆä¸Šè¿°é…ç½®åï¼Œä½ ä¼šå‘ç°ç”¨lså‘½ä»¤æŸ¥çœ‹ç›®å½•å’Œæ–‡ä»¶æ—¶æ˜¯ä¸€ç‰‡ç°è‰²ã€‚è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹solarizedå„ç§brightæ–¹æ¡ˆåŸºæœ¬éƒ½æ˜¯ç°è‰²ï¼Œè€Œç³»ç»Ÿé»˜è®¤æ˜¾ç¤ºç›®å½•å’Œæ–‡ä»¶æ—¶å¤šç”¨brightè‰²ï¼Œæ­¤æ—¶éœ€è¦é…ç½®dircolorsæ‰èƒ½æ˜¾ç¤ºå‡ºå½©è‰²çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p><a href="https://github.com/seebi/dircolors-solarized" target="_blank" rel="noopener">dircolors-solarized</a>é¡¹ç›®æä¾›äº†é€‚åˆäºsolarizedçš„dircolorsé…è‰²æ–¹æ¡ˆï¼Œåªè¦é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆä½¿ç”¨å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚æˆ‘æ˜¯ç”¨çš„solarized darké…è‰²ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©é€‚åˆè¿™ä¸ªé…è‰²çš„dircolors.ansi-dark</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://raw.github.com/seebi/dircolors-solarized/master/dircolors.ansi-dark &gt; ~/.dircolors</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨~/.zshrcä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># enable color support of ls and also add handy aliases</span></span><br><span class="line"><span class="keyword">if</span> [ -x /usr/bin/dircolors ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">test</span> -r ~/.dircolors &amp;&amp; <span class="built_in">eval</span> <span class="string">"<span class="variable">$(dircolors -b ~/.dircolors)</span>"</span> || <span class="built_in">eval</span> <span class="string">"<span class="variable">$(dircolors -b)</span>"</span></span><br><span class="line">    <span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br><span class="line">    <span class="comment">#alias dir='dir --color=auto'</span></span><br><span class="line">    <span class="comment">#alias vdir='vdir --color=auto'</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">alias</span> grep=<span class="string">'grep --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> fgrep=<span class="string">'fgrep --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> egrep=<span class="string">'egrep --color=auto'</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># some more ls aliases</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -alF'</span></span><br><span class="line"><span class="built_in">alias</span> la=<span class="string">'ls -A'</span></span><br><span class="line"><span class="built_in">alias</span> l=<span class="string">'ls -CF'</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>åï¼Œå†æ‰§è¡Œlsæˆ–llå°±å¯ä»¥çœ‹åˆ°å½©è‰²çš„ç›®å½•æˆ–æ–‡ä»¶äº†ã€‚</p><p>é…ç½®å®Œçš„terminatoræ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/media/å·¥ä½œåŒº 1_045.png" alt></p><h1 id="å®‰è£…jdk1-8"><a href="#å®‰è£…jdk1-8" class="headerlink" title="å®‰è£…jdk1.8"></a>å®‰è£…jdk1.8</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸‹è½½jdkï¼Œå› ä¸ºoracleç°åœ¨è¦åŒæ„åè®®æ‰èƒ½ä¸‹è½½ï¼Œç›´æ¥ä½¿ç”¨wgetåŠ é“¾æ¥ä¸‹è½½ä¸åˆ°ï¼Œæ‰€ä»¥è¦åŠ ä¸Šå‰é¢çš„é‚£äº›ä»£ç </span><br><span class="line">wget --no-check-certificate --no-cookie --header <span class="string">"Cookie: oraclelicense=accept-securebackup-cookie;"</span> http://download.oracle.com/otn-pub/java/jdk/8u121-b13/jdk-8u121-linux-x64.tar.gz</span><br><span class="line">2.å®‰è£…jdk</span><br><span class="line">tar -zxvf jdk-8u121-linux-x64.tar.gz</span><br><span class="line">3.è®¾ç½®ç¯å¢ƒå˜é‡ vim /home/liby/.zshrc,æ·»åŠ å¦‚ä¸‹å†…å®¹</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/liby/<span class="built_in">local</span>/jdk1.8.0_121/</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME=/home/liby/<span class="built_in">local</span>/apache-maven-3.3.9</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;MAVEN_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">4.åˆ·æ–°é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="built_in">source</span> /home/liby/.zshrc</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…maven"><a href="#å®‰è£…maven" class="headerlink" title="å®‰è£…maven"></a>å®‰è£…maven</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸‹è½½maven</span><br><span class="line">wget http://mirror.cc.columbia.edu/pub/software/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz</span><br><span class="line">2.å®‰è£…maven</span><br><span class="line">tar -zxvf apache-maven-3.3.9-bin.tar.gz</span><br><span class="line">3.è®¾ç½®ç¯å¢ƒå˜é‡ vim /home/liby/.zshrc,æ·»åŠ å¦‚ä¸‹å†…å®¹</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/liby/<span class="built_in">local</span>/jdk1.8.0_121/</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME=/home/liby/<span class="built_in">local</span>/apache-maven-3.3.9</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;MAVEN_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">4.åˆ·æ–°é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="built_in">source</span> /home/liby/.zshrc</span><br></pre></td></tr></table></figure><h1 id="ä¸‹è½½chrome"><a href="#ä¸‹è½½chrome" class="headerlink" title="ä¸‹è½½chrome"></a>ä¸‹è½½chrome</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br><span class="line">sudo dpkg -i google-chrome-stable_current_amd64.deb</span><br><span class="line">ç™»å½•è´¦å·å¹¶åŒæ­¥æ•°æ®</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…æœç‹—è¾“å…¥æ³•"><a href="#å®‰è£…æœç‹—è¾“å…¥æ³•" class="headerlink" title="å®‰è£…æœç‹—è¾“å…¥æ³•"></a>å®‰è£…æœç‹—è¾“å…¥æ³•</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://cdn2.ime.sogou.com/dl/index/1475147394/sogoupinyin_2.1.0.0082_amd64.deb?st=_vb5fHHeRyUHCwduavC5Qw&amp;e=1489585347&amp;fn=sogoupinyin_2.1.0.0082_amd64.deb</span><br><span class="line">sudo dpkg -i sogoupinyin_2.1.0.0082_amd64.deb</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…virtualbox"><a href="#å®‰è£…virtualbox" class="headerlink" title="å®‰è£…virtualbox"></a>å®‰è£…virtualbox</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.virtualbox.org/virtualbox/5.1.16/virtualbox-5.1_5.1.16-113841~Ubuntu~xenial_amd64.deb</span><br><span class="line">sudo dpkg -i virtualbox-5.1_5.1.16-113841~Ubuntu~xenial_amd64.deb</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…idea"><a href="#å®‰è£…idea" class="headerlink" title="å®‰è£…idea"></a>å®‰è£…idea</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.jetbrains.8686c.com/idea/ideaIU-2016.3.5.tar.gz</span><br><span class="line">tar -zxvf ideaIU-2016.3.5.tar.gz</span><br><span class="line">å®‰è£…æ’ä»¶ï¼šscala,.ignore,python,Markdown Navigator2.3.2ç ´è§£ç‰ˆ,VisualVM Launcher</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…pycharm"><a href="#å®‰è£…pycharm" class="headerlink" title="å®‰è£…pycharm"></a>å®‰è£…pycharm</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.jetbrains.8686c.com/python/pycharm-professional-2016.3.2.tar.gz</span><br><span class="line">tar -zxvf pycharm-professional-2016.3.2.tar.gz</span><br><span class="line">å®‰è£…æ’ä»¶ï¼š.ignore,Markdown Navigator2.3.2ç ´è§£ç‰ˆ</span><br></pre></td></tr></table></figure><h1 id="ä¿®å¤ideaå’Œpycharmå­—ä½“æ¨¡ç³Šé”¯é½¿å’Œä¹±ç ç­‰ç°è±¡"><a href="#ä¿®å¤ideaå’Œpycharmå­—ä½“æ¨¡ç³Šé”¯é½¿å’Œä¹±ç ç­‰ç°è±¡" class="headerlink" title="ä¿®å¤ideaå’Œpycharmå­—ä½“æ¨¡ç³Šé”¯é½¿å’Œä¹±ç ç­‰ç°è±¡"></a>ä¿®å¤ideaå’Œpycharmå­—ä½“æ¨¡ç³Šé”¯é½¿å’Œä¹±ç ç­‰ç°è±¡</h1><p>è®¾ç½®å­—ä½“ä¸ºYaHei Consolas Hybridï¼ŒåŒæ—¶æ”¯æŒä¸­è‹±æ–‡<br><img src="/images/media/Settings_033.png" alt><br><img src="/images/media/Settings_034.png" alt></p><h1 id="ideaä¸ç³»ç»Ÿå†²çªçš„å¿«æ·é”®è®¾ç½®"><a href="#ideaä¸ç³»ç»Ÿå†²çªçš„å¿«æ·é”®è®¾ç½®" class="headerlink" title="ideaä¸ç³»ç»Ÿå†²çªçš„å¿«æ·é”®è®¾ç½®"></a>ideaä¸ç³»ç»Ÿå†²çªçš„å¿«æ·é”®è®¾ç½®</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.Change or <span class="built_in">disable</span> the Lock Screen action, assigned to Ctrl + Alt + L (Reformat code)</span><br><span class="line">2.Change or <span class="built_in">disable</span> the Launch terminal action, assigned to Ctrl + Alt + T (Surround with)</span><br><span class="line">3.Change or <span class="built_in">disable</span> the Switch to workspace action, assigned to Ctrl + Alt + Arrow Keys(Navigation)</span><br><span class="line">4.Disable the Move window action, assigned to Alt + F7 (Find usages)</span><br><span class="line">5.Change or <span class="built_in">disable</span> the Resize window action, assigned to Alt + F8 (Evaluate expression)</span><br><span class="line">6.Fcitxè¾“å…¥æ³•æ¿€æ´»å¿«æ·é”®ï¼Œassigned to Ctrl + ç©ºæ ¼ (code completion basic)</span><br></pre></td></tr></table></figure><p>è§£å†³åŠæ³•æ˜¯æ‰“å¼€ç³»ç»Ÿè®¾ç½®ä¸­çš„é”®ç›˜ï¼Œä¿®æ”¹å†²çªçš„å¿«æ·é”®ï¼Œå°†ç³»ç»Ÿçš„å¿«æ·é”®ç¦ç”¨æˆ–è€…ä¿®æ”¹ideaå¿«æ·é”®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.ä¿®æ”¹ideaå¿«æ·é”®ä¸ºCtrl + L</span><br><span class="line">2.ç”¨çš„åœ°æ–¹ä¸å¤šï¼Œå…ˆä¸ä¿®æ”¹äº†</span><br><span class="line">3.çª—å£ä¸­çš„ç§»åŠ¨çª—å£ç¦ç”¨</span><br><span class="line">4.å¯¼èˆªä¸­çš„åˆ‡æ¢è‡³å·¦ä¾§å·¥ä½œåŒº/åˆ‡æ¢è‡³å³ä¾§å·¥ä½œåŒº/åˆ‡æ¢è‡³ä¾§ä¸Šå·¥ä½œåŒº/åˆ‡æ¢è‡³ä¸‹ä¾§å·¥ä½œåŒºç¦ç”¨</span><br><span class="line">5.çª—å£ä¸­çš„è°ƒæ•´çª—å£å¤§å°ç¦ç”¨</span><br><span class="line">6.ç¦ç”¨Fcitxè¾“å…¥æ³•æ¿€æ´»å¿«æ·é”®</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…atom"><a href="#å®‰è£…atom" class="headerlink" title="å®‰è£…atom"></a>å®‰è£…atom</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://atom-installer.github.com/v1.15.0/atom-amd64.deb?s=1489019656&amp;ext=.deb</span><br><span class="line">sudo dpkg -i atom-amd64.deb</span><br></pre></td></tr></table></figure><p>å®‰è£…æ’ä»¶ï¼šmarkdown-writerã€autocomplete-pythonã€ile-iconsã€git-controlã€language-hqlã€markdown-pdfã€pdf-viewã€activate-power-mode</p><h1 id="å®‰è£…markdownç¥å™¨"><a href="#å®‰è£…markdownç¥å™¨" class="headerlink" title="å®‰è£…markdownç¥å™¨"></a>å®‰è£…markdownç¥å™¨</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># optional, but recommended</span></span><br><span class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE</span><br><span class="line"><span class="comment"># add Typora's repository</span></span><br><span class="line">sudo add-apt-repository <span class="string">'deb https://typora.io ./linux/'</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="comment"># install typora</span></span><br><span class="line">sudo apt-get install typora</span><br></pre></td></tr></table></figure><h1 id="æˆªå›¾å·¥å…·"><a href="#æˆªå›¾å·¥å…·" class="headerlink" title="æˆªå›¾å·¥å…·"></a>æˆªå›¾å·¥å…·</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install shutter</span><br></pre></td></tr></table></figure><h1 id="ç½‘æ˜“äº‘éŸ³ä¹"><a href="#ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="ç½‘æ˜“äº‘éŸ³ä¹"></a>ç½‘æ˜“äº‘éŸ³ä¹</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://s1.music.126.net/download/pc/netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb</span><br><span class="line">sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb</span><br><span class="line">ç™»å½•è´¦å·å¹¶åŒæ­¥æ•°æ®</span><br></pre></td></tr></table></figure><h1 id="å¼€å¯sshæœåŠ¡ï¼Œå…è®¸è¿œç¨‹è¿æ¥"><a href="#å¼€å¯sshæœåŠ¡ï¼Œå…è®¸è¿œç¨‹è¿æ¥" class="headerlink" title="å¼€å¯sshæœåŠ¡ï¼Œå…è®¸è¿œç¨‹è¿æ¥"></a>å¼€å¯sshæœåŠ¡ï¼Œå…è®¸è¿œç¨‹è¿æ¥</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br><span class="line">è¿™æ ·å…¶ä»–çš„ç”µè„‘å°±å¯ä»¥sshç™»å½•å…¬å¸çš„è¿™å°ç”µè„‘äº†</span><br></pre></td></tr></table></figure><h1 id="å¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡"><a href="#å¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡" class="headerlink" title="å¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡"></a>å¼€å¯è¿œç¨‹æ¡Œé¢æœåŠ¡</h1><p> 1.Dashä¸­æ‰“å¼€æ¡Œé¢å…±äº«<br> <img src="/images/media/æ¡Œé¢å…±äº«é¦–é€‰é¡¹_029.png" alt></p><p> 2.å®‰è£…å¹¶è¿è¡Œdconf-editorï¼ŒæŠŠåŠ å¯†é€‰é¡¹å»æ‰</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install dconf-editor</span><br><span class="line">dconf-editor</span><br></pre></td></tr></table></figure><p>ä¾æ¬¡å±•å¼€org-&gt;gnome-&gt;desktop-&gt;remote-access<br>è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®è¿œç¨‹æ§åˆ¶é€‰é¡¹ï¼Œä½†é‡è¦çš„æ˜¯å°†â€œrequre-encryptionâ€å»æ‰ã€‚<br><img src="/images/media/dconf ç³»ç»Ÿé…ç½®ç¼–è¾‘å™¨_030.png" alt></p><p>ä¹‹åå°±å¯ä»¥åœ¨å…¶ä»–çš„ç”µè„‘ä¸Šä½¿ç”¨è¿œç¨‹æ¡Œé¢ç™»å½•äº†</p><h1 id="16-04é»˜è®¤æ²¡æœ‰æ‰“å¼€å·¥ä½œåŒºåˆ‡æ¢åŠŸèƒ½éœ€è¦æ‰‹åŠ¨æ‰“å¼€ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¤šäº†ã€‚"><a href="#16-04é»˜è®¤æ²¡æœ‰æ‰“å¼€å·¥ä½œåŒºåˆ‡æ¢åŠŸèƒ½éœ€è¦æ‰‹åŠ¨æ‰“å¼€ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¤šäº†ã€‚" class="headerlink" title="16.04é»˜è®¤æ²¡æœ‰æ‰“å¼€å·¥ä½œåŒºåˆ‡æ¢åŠŸèƒ½éœ€è¦æ‰‹åŠ¨æ‰“å¼€ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¤šäº†ã€‚"></a>16.04é»˜è®¤æ²¡æœ‰æ‰“å¼€å·¥ä½œåŒºåˆ‡æ¢åŠŸèƒ½éœ€è¦æ‰‹åŠ¨æ‰“å¼€ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¤šäº†ã€‚</h1><p><img src="/images/media/Unity Tweak Tool_039.png" alt><br><img src="/images/media/å·¥ä½œåŒº_041.png" alt></p><h1 id="æœ€ç»ˆçš„æ•ˆæœå›¾"><a href="#æœ€ç»ˆçš„æ•ˆæœå›¾" class="headerlink" title="æœ€ç»ˆçš„æ•ˆæœå›¾"></a>æœ€ç»ˆçš„æ•ˆæœå›¾</h1><p><img src="/images/media/å·¥ä½œåŒº 1_076.png" alt><br><img src="/images/media/å·¥ä½œåŒº 1_077.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸»é¢˜ç¾åŒ–&quot;&gt;&lt;a href=&quot;#ä¸»é¢˜ç¾åŒ–&quot; class=&quot;headerlink&quot; title=&quot;ä¸»é¢˜ç¾åŒ–&quot;&gt;&lt;/a&gt;ä¸»é¢˜ç¾åŒ–&lt;/h1&gt;&lt;p&gt;1.æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Flatabulousä¸»é¢˜&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install unity-tweak-tool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo add-apt-repository ppa:noobslab/themes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install flatabulous-theme&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Ubuntu" scheme="https://blog.flyfox.top/categories/Ubuntu/"/>
    
    
      <category term="Linux" scheme="https://blog.flyfox.top/tags/Linux/"/>
    
      <category term="ç³»ç»Ÿè®¾ç½®" scheme="https://blog.flyfox.top/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>Flume1.7æºç è°ƒè¯•</title>
    <link href="https://blog.flyfox.top/2017/02/14/Flume1-7%E6%BA%90%E7%A0%81%E8%B0%83%E8%AF%95/"/>
    <id>https://blog.flyfox.top/2017/02/14/Flume1-7æºç è°ƒè¯•/</id>
    <published>2017-02-14T11:02:40.000Z</published>
    <updated>2020-04-07T15:41:04.685Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h1><p>git clone <a href="https://github.com/apache/flume.git" target="_blank" rel="noopener">https://github.com/apache/flume.git</a></p><a id="more"></a><h1 id="å°†æºç å¯¼å…¥Idea"><a href="#å°†æºç å¯¼å…¥Idea" class="headerlink" title="å°†æºç å¯¼å…¥Idea"></a>å°†æºç å¯¼å…¥Idea</h1><p><img src="/images/media/é€‰åŒº_021.png" alt></p><h1 id="ç¼–è¯‘æ—¶ä¼šæœ‰ä»¥ä¸‹jarä»“åº“ä¸­æ— æ³•æ‰¾åˆ°å¹¶ä¸‹è½½ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“"><a href="#ç¼–è¯‘æ—¶ä¼šæœ‰ä»¥ä¸‹jarä»“åº“ä¸­æ— æ³•æ‰¾åˆ°å¹¶ä¸‹è½½ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="ç¼–è¯‘æ—¶ä¼šæœ‰ä»¥ä¸‹jarä»“åº“ä¸­æ— æ³•æ‰¾åˆ°å¹¶ä¸‹è½½ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“"></a>ç¼–è¯‘æ—¶ä¼šæœ‰ä»¥ä¸‹jarä»“åº“ä¸­æ— æ³•æ‰¾åˆ°å¹¶ä¸‹è½½ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linq4j-0.4.jar  pentaho-aggdesigner-algorithm-5.1.3-jhyde.jar  quidem-0.1.1.jar</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šjaræ–‡ä»¶å¯ä»¥åœ¨ä¸‹é¢çš„ç½‘ç«™ä¸­æ‰¾åˆ°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://conjars.org/repo/</span><br><span class="line">http://repository.pentaho.org/artifactory/repo/</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†jarä¸‹è½½åˆ°æœ¬åœ°ä»“åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -Dfile=pentaho-aggdesigner-algorithm-5.1.3-jhyde.jar -DgroupId=org.pentaho -DartifactId=pentaho-aggdesigner-algorithm -Dversion=5.1.3-jhyde -Dpackaging=jar</span><br><span class="line">mvn install:install-file -Dfile=linq4j-0.4.jar -DgroupId=net.hydromatic -DartifactId=linq4j -Dversion=0.4 -Dpackaging=jar</span><br><span class="line">mvn install:install-file -Dfile=quidem-0.1.1.jar -DgroupId=net.hydromatic -DartifactId=quidem -Dversion=0.1.1 -Dpackaging=jar</span><br></pre></td></tr></table></figure><h1 id="æ‰§è¡Œç¼–è¯‘å‘½ä»¤"><a href="#æ‰§è¡Œç¼–è¯‘å‘½ä»¤" class="headerlink" title="æ‰§è¡Œç¼–è¯‘å‘½ä»¤"></a>æ‰§è¡Œç¼–è¯‘å‘½ä»¤</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install -DskipTests</span><br></pre></td></tr></table></figure><p><img src="/images/media/é€‰åŒº_022.png" alt></p><h1 id="æœ¬åœ°è°ƒè¯•"><a href="#æœ¬åœ°è°ƒè¯•" class="headerlink" title="æœ¬åœ°è°ƒè¯•"></a>æœ¬åœ°è°ƒè¯•</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸»ç±»ï¼šorg.apache.flume.node.Application</span><br><span class="line">å‚æ•°ï¼š-n agent -f /home/liby/local/apache-flume-1.7.0-bin/conf/flume-conf.properties</span><br></pre></td></tr></table></figure><p>flume-conf.properties</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Name the components on this agent</span></span><br><span class="line">agent.sources = r1</span><br><span class="line">agent.sinks = k1</span><br><span class="line">agent.channels = c1</span><br><span class="line"><span class="comment"># Describe/configure the source</span></span><br><span class="line">agent.sources.r1.type = netcat</span><br><span class="line">agent.sources.r1.bind = localhost</span><br><span class="line">agent.sources.r1.port = 44445</span><br><span class="line"><span class="comment"># Describe the sink</span></span><br><span class="line"><span class="comment"># å°†æ•°æ®è¾“å‡ºè‡³æ—¥å¿—ä¸­</span></span><br><span class="line">agent.sinks.k1.type = logger</span><br><span class="line"><span class="comment"># Use a channel which buffers events in memory</span></span><br><span class="line">agent.channels.c1.type = memory</span><br><span class="line">agent.channels.c1.capacity = 1000</span><br><span class="line">agent.channels.c1.transactionCapacity = 100</span><br><span class="line"><span class="comment"># Bind the source and sink to the channel</span></span><br><span class="line">agent.sources.r1.channels = c1</span><br><span class="line">agent.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><p><img src="/images/media/é€‰åŒº_023.png" alt></p><p>è¿è¡Œæ•ˆæœ<br><img src="/images/media/é€‰åŒº_024.png" alt></p><h1 id="è¿œç¨‹è°ƒè¯•"><a href="#è¿œç¨‹è°ƒè¯•" class="headerlink" title="è¿œç¨‹è°ƒè¯•"></a>è¿œç¨‹è°ƒè¯•</h1><p>åœ¨conf/flume-env.propertieså¢åŠ ä»¥ä¸‹é…ç½®ï¼Œç„¶åå¯åŠ¨flume</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005</span><br></pre></td></tr></table></figure><p>åœ¨ideaä¸­å¯åŠ¨è¿œç¨‹è°ƒè¯•<br><img src="/images/media/é€‰åŒº_025.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸‹è½½æºç &quot;&gt;&lt;a href=&quot;#ä¸‹è½½æºç &quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½æºç &quot;&gt;&lt;/a&gt;ä¸‹è½½æºç &lt;/h1&gt;&lt;p&gt;git clone &lt;a href=&quot;https://github.com/apache/flume.git&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/apache/flume.git&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Flume" scheme="https://blog.flyfox.top/categories/Flume/"/>
    
    
      <category term="Flume" scheme="https://blog.flyfox.top/tags/Flume/"/>
    
  </entry>
  
  <entry>
    <title>javaå­—ç¬¦ç¼–ç æµ…æ</title>
    <link href="https://blog.flyfox.top/2016/07/14/java%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E6%B5%85%E6%9E%90/"/>
    <id>https://blog.flyfox.top/2016/07/14/javaå­—ç¬¦ç¼–ç æµ…æ/</id>
    <published>2016-07-14T11:24:13.000Z</published>
    <updated>2019-04-22T15:23:58.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="javaå­—ç¬¦ç¼–ç æµ…æ"><a href="#javaå­—ç¬¦ç¼–ç æµ…æ" class="headerlink" title="javaå­—ç¬¦ç¼–ç æµ…æ"></a>javaå­—ç¬¦ç¼–ç æµ…æ</h1><blockquote><p>å…³äºè¿™ç¯‡æ–‡ç« å…¶å®æ˜¯ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹çš„ï¼šjavaä¸­charç±»å‹èƒ½å­˜å‚¨æ±‰å­—å—ï¼Ÿ</p></blockquote><h2 id="UTF-8ç¼–ç "><a href="#UTF-8ç¼–ç " class="headerlink" title="UTF-8ç¼–ç "></a>UTF-8ç¼–ç </h2><p>UTF-8å°±æ˜¯åœ¨äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§Unicodeçš„å®ç°æ–¹å¼ã€‚å…¶ä»–å®ç°æ–¹å¼è¿˜åŒ…æ‹¬UTF-16ï¼ˆå­—ç¬¦ç”¨ä¸¤ä¸ªå­—èŠ‚æˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰å’ŒUTF-32ï¼ˆå­—ç¬¦ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰ï¼Œä¸è¿‡åœ¨äº’è”ç½‘ä¸ŠåŸºæœ¬ä¸ç”¨ã€‚é‡å¤ä¸€éï¼Œè¿™é‡Œçš„å…³ç³»æ˜¯ï¼ŒUTF-8æ˜¯Unicodeçš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚UTF-8æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚<br>UTF-8çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š</p><a id="more"></a><p>1.å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8ç¼–ç å’ŒASCIIç æ˜¯ç›¸åŒçš„ã€‚<br>2.å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn&gt;1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚<br>ä¸‹è¡¨æ€»ç»“äº†ç¼–ç è§„åˆ™ï¼Œå­—æ¯xè¡¨ç¤ºå¯ç”¨ç¼–ç çš„ä½ã€‚</p><table><thead><tr><th>Unicodeç¬¦å·èŒƒå›´(åå…­è¿›åˆ¶)</th><th>UTF-8ç¼–ç æ–¹å¼(äºŒè¿›åˆ¶)</th></tr></thead><tbody><tr><td>0000 0000-0000 007F</td><td>0xxxxxxx</td></tr><tr><td>0000 0080-0000 07FF</td><td>110xxxxx 10xxxxxx</td></tr><tr><td>0000 0800-0000 FFFF</td><td>1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td>0001 0000-0010 FFFF</td><td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td></tr></tbody></table><p>è·Ÿæ®ä¸Šè¡¨ï¼Œè§£è¯»UTF-8ç¼–ç éå¸¸ç®€å•ã€‚å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯0ï¼Œåˆ™è¿™ä¸ªå­—èŠ‚å•ç‹¬å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœç¬¬ä¸€ä½æ˜¯1ï¼Œåˆ™è¿ç»­æœ‰å¤šå°‘ä¸ª1ï¼Œå°±è¡¨ç¤ºå½“å‰å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚<br>ä¸‹é¢ï¼Œè¿˜æ˜¯ä»¥æ±‰å­—â€ä¸¥â€ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®ç°UTF-8ç¼–ç ã€‚<br>å·²çŸ¥â€ä¸¥â€çš„unicodeæ˜¯4E25ï¼ˆ100111000100101ï¼‰ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œå¯ä»¥å‘ç°4E25å¤„åœ¨ç¬¬ä¸‰è¡Œçš„èŒƒå›´å†…ï¼ˆ0000 0800-0000 FFFFï¼‰ï¼Œå› æ­¤â€ä¸¥â€çš„UTF-8ç¼–ç éœ€è¦ä¸‰ä¸ªå­—èŠ‚ï¼Œå³æ ¼å¼æ˜¯â€1110xxxx 10xxxxxx 10xxxxxxâ€ã€‚ç„¶åï¼Œä»â€ä¸¥â€çš„æœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½å¼€å§‹ï¼Œä¾æ¬¡ä»åå‘å‰å¡«å…¥æ ¼å¼ä¸­çš„xï¼Œå¤šå‡ºçš„ä½è¡¥0ã€‚è¿™æ ·å°±å¾—åˆ°äº†ï¼Œâ€ä¸¥â€çš„UTF-8ç¼–ç æ˜¯â€11100100 10111000 10100101â€ï¼Œè½¬æ¢æˆåå…­è¿›åˆ¶å°±æ˜¯E4B8A5ã€‚</p><h2 id="UTF-16ç¼–ç "><a href="#UTF-16ç¼–ç " class="headerlink" title="UTF-16ç¼–ç "></a>UTF-16ç¼–ç </h2><p>UTF-16æ˜¯Unicodeçš„å…¶ä¸­ä¸€ä¸ªä½¿ç”¨æ–¹å¼ã€‚ UTFæ˜¯ Unicode TransferFormatï¼Œå³æŠŠUnicodeè½¬åšæŸç§æ ¼å¼çš„æ„æ€ã€‚UTF-16æ¯”èµ·UTF-8ï¼Œå¥½å¤„åœ¨äºå¤§éƒ¨åˆ†å­—ç¬¦éƒ½ä»¥å›ºå®šé•¿åº¦çš„å­—èŠ‚ (2å­—èŠ‚) å‚¨å­˜ï¼Œä½†UTF-16å´æ— æ³•å…¼å®¹äºASCIIç¼–ç ã€‚UTF-16çš„å¤§ç«¯å’Œå°ç«¯å‚¨å­˜å½¢å¼éƒ½åœ¨ç”¨ã€‚ä¸ºäº†å¼„æ¸…æ¥šUTF-16æ–‡ä»¶çš„å¤§å°ç«¯ï¼Œåœ¨UTF-16æ–‡ä»¶çš„å¼€é¦–ï¼Œéƒ½ä¼šæ”¾ç½®ä¸€ä¸ªU+FEFFå­—ç¬¦ä½œä¸ºByte Order Markï¼ˆUTF-16LEä»¥FF FEä»£è¡¨ï¼ŒUTF-16BEä»¥FE FFä»£è¡¨ï¼‰ï¼Œä»¥æ˜¾ç¤ºè¿™ä¸ªæ–‡å­—æ¡£æ¡ˆæ˜¯ä»¥UTF-16ç¼–ç ï¼Œå…¶ä¸­U+FEFFå­—ç¬¦åœ¨UNICODEä¸­ä»£è¡¨çš„æ„ä¹‰æ˜¯ZERO WIDTH NO-BREAK SPACEï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸ªæ²¡æœ‰å®½åº¦ä¹Ÿæ²¡æœ‰æ–­å­—çš„ç©ºç™½ã€‚</p><h2 id="å®ä¾‹è®²è§£"><a href="#å®ä¾‹è®²è§£" class="headerlink" title="å®ä¾‹è®²è§£"></a>å®ä¾‹è®²è§£</h2><h3 id="ä¾‹1"><a href="#ä¾‹1" class="headerlink" title="ä¾‹1"></a>ä¾‹1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;I&apos;m æåšç‰&quot;;</span><br><span class="line">byte[] charArr = s.getBytes(Charset.forName(&quot;UTF-16&quot;));</span><br><span class="line">for (byte b : charArr) &#123;</span><br><span class="line">System.out.printf(&quot;%X &quot;, b);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(s.getBytes(Charset.forName(&quot;UTF-16&quot;)).length);</span><br><span class="line"></span><br><span class="line">charArr = s.getBytes(Charset.forName(&quot;UTF-8&quot;));</span><br><span class="line">for (byte b : charArr) &#123;</span><br><span class="line">System.out.printf(&quot;%X &quot;, b);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(s.getBytes(Charset.forName(&quot;UTF-8&quot;)).length);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>FE FF 0 49 0 27 0 6D 0 20 67 4E 53 5A 73 89<br>16<br>49 27 6D 20 E6 9D 8E E5 8D 9A E7 8E 89<br>13</p><p>1.UTF-16çš„ç¼–ç ä¸ºä»€ä¹ˆæ˜¯16ï¼Ÿ<br>å¯¹äºå¤§éƒ¨åˆ†å­—ç¬¦æ¥è®²ï¼ŒUTF-16éƒ½ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨ã€‚ä½†æ˜¯UTF-16æ˜¯æ”¯æŒå¤§å°ç«¯çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨å­—ç¬¦çš„å¼€å¤´ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚çš„é¢å¤–ç©ºé—´æŒ‡å®šå¥½å®ƒçš„å­—èŠ‚åºï¼ŒFE FF è¡¨ç¤ºä½¿ç”¨å¤§ç«¯å­˜å‚¨ã€‚<br>7 x 2 + 2 = 16<br>2.UTF-8çš„ç¼–ç ä¸ºä»€ä¹ˆæ˜¯13ï¼Ÿ<br>UTF-8æ˜¯å®Œå…¨å…¼å®¹ASCIIç¼–ç çš„ï¼Œæ‰€ä»¥è‹±æ–‡æ˜¯å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡å¤§éƒ¨åˆ†å 3ä¸ªå­—èŠ‚ï¼Œä¸å¸¸ç”¨çš„å 4ä¸ªå­—èŠ‚<br>4 + 3 x 3 = 13</p><h3 id="ä¾‹2"><a href="#ä¾‹2" class="headerlink" title="ä¾‹2"></a>ä¾‹2</h3><p>String s1 = â€œæâ€;<br>String s2 = â€œ<img src="/images/media/14707129240405.jpg" alt>â€œ<br>System.out.println(s1.length());<br>System.out.println(s2.length());</p><p>è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>1<br>2<br>çœ‹åˆ°è¿™ä¸ªç»“æœæ˜¯ä¸æ˜¯å´©æºƒäº†ï¼Œåˆ°åº•æ€ä¹ˆå›äº‹ï¼Ÿ</p><p>1.é¦–å…ˆè¦æ˜ç™½.lengthæŒ‡çš„æ˜¯ä»€ä¹ˆï¼ŒStringå†…éƒ¨æ˜¯ä»¥charæ•°ç»„çš„å½¢å¼å­˜å‚¨çš„ï¼Œ.lengthæ˜¯æŒ‡charæ•°ç»„çš„é•¿åº¦ï¼Œcharæ˜¯ä»¥UTF-16ç¼–ç çš„ï¼Œææ˜¯å¸¸ç”¨å­—ï¼ŒUTF-16ç¼–ç åå ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªcharå°±èƒ½å¤Ÿå­˜å‚¨ï¼Œæ‰€ä»¥æ˜¯é•¿åº¦æ˜¯1ï¼Œè€Œ<img src="/images/media/14707129334632.jpg" alt>UTF-16ç¼–ç åå å››ä¸ªå­—èŠ‚ï¼Œä¸¤ä¸ªcharæ¥å­˜å‚¨ï¼Œæ‰€ä»¥é•¿åº¦æ˜¯2</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;javaå­—ç¬¦ç¼–ç æµ…æ&quot;&gt;&lt;a href=&quot;#javaå­—ç¬¦ç¼–ç æµ…æ&quot; class=&quot;headerlink&quot; title=&quot;javaå­—ç¬¦ç¼–ç æµ…æ&quot;&gt;&lt;/a&gt;javaå­—ç¬¦ç¼–ç æµ…æ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;å…³äºè¿™ç¯‡æ–‡ç« å…¶å®æ˜¯ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹çš„ï¼šjavaä¸­charç±»å‹èƒ½å­˜å‚¨æ±‰å­—å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;UTF-8ç¼–ç &quot;&gt;&lt;a href=&quot;#UTF-8ç¼–ç &quot; class=&quot;headerlink&quot; title=&quot;UTF-8ç¼–ç &quot;&gt;&lt;/a&gt;UTF-8ç¼–ç &lt;/h2&gt;&lt;p&gt;UTF-8å°±æ˜¯åœ¨äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§Unicodeçš„å®ç°æ–¹å¼ã€‚å…¶ä»–å®ç°æ–¹å¼è¿˜åŒ…æ‹¬UTF-16ï¼ˆå­—ç¬¦ç”¨ä¸¤ä¸ªå­—èŠ‚æˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰å’ŒUTF-32ï¼ˆå­—ç¬¦ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰ï¼Œä¸è¿‡åœ¨äº’è”ç½‘ä¸ŠåŸºæœ¬ä¸ç”¨ã€‚é‡å¤ä¸€éï¼Œè¿™é‡Œçš„å…³ç³»æ˜¯ï¼ŒUTF-8æ˜¯Unicodeçš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚UTF-8æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚&lt;br&gt;UTF-8çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://blog.flyfox.top/categories/java/"/>
    
    
      <category term="å­—ç¬¦ç¼–ç " scheme="https://blog.flyfox.top/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼19ä¹‹ è¿­ä»£å™¨(Iterator)æ¨¡å¼(è¡Œä¸ºæ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/06/03/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F19%E4%B9%8B-%E8%BF%AD%E4%BB%A3%E5%99%A8-Iterator-%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/06/03/è®¾è®¡æ¨¡å¼19ä¹‹-è¿­ä»£å™¨-Iterator-æ¨¡å¼-è¡Œä¸ºæ¨¡å¼/</id>
    <published>2014-06-03T03:11:08.000Z</published>
    <updated>2019-04-22T15:23:58.789Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹"><a href="#è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹"></a>è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹</h1><p>ã€€ã€€è¿­ä»£å™¨æ¨¡å¼åˆå«æ¸¸æ ‡(Cursor)æ¨¡å¼ï¼Œæ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚è¿­ä»£å™¨æ¨¡å¼å¯ä»¥é¡ºåºåœ°è®¿é—®ä¸€ä¸ªèšé›†ä¸­çš„å…ƒç´ è€Œä¸å¿…æš´éœ²èšé›†çš„å†…éƒ¨è¡¨è±¡ï¼ˆinternal representationï¼‰ã€‚</p><p>ã€€ã€€è¿­ä»£å™¨æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€å¸¸è§çš„å‡ ä¸ªæ¨¡å¼ä¹‹ä¸€ã€‚åœ¨Javaçš„é›†åˆ(Collection)æ¡†æ¶ä¸­ï¼Œå¹¿æ³›çš„ä½¿ç”¨è¿­ä»£å™¨(Iteratorå’ŒEnumeration)æ¥éå†é›†åˆçš„å…ƒç´ ã€‚</p><a id="more"></a><p>è¿­ä»£å™¨æ¨¡å¼æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªè§’è‰²ï¼š<strong>æŠ½è±¡è¿­ä»£å™¨(Iterator)ï¼Œå…·ä½“è¿­ä»£å™¨(ConcreteIterator)ï¼Œèšé›†(Aggregate)ï¼Œå…·ä½“èšé›†(ConcreteAggregate)ï¼Œå®¢æˆ·ç«¯(Client)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ½è±¡è¿­ä»£å™¨</td><td>æ­¤æŠ½è±¡è§’è‰²å®šä¹‰å‡ºéå†å…ƒç´ æ‰€éœ€çš„æ¥å£ã€‚</td></tr><tr><td>å…·ä½“è¿­ä»£å™¨</td><td>æ­¤è§’è‰²å®ç°äº†æŠ½è±¡è¿­ä»£å™¨çš„æ¥å£ï¼Œå¹¶ä¿æŒè¿­ä»£è¿‡ç¨‹ä¸­çš„æ¸¸æ ‡ä½ç½®ã€‚</td></tr><tr><td>èšé›†</td><td>æ­¤æŠ½è±¡è§’è‰²ç»™å‡ºåˆ›å»ºè¿­ä»£å™¨(Iterator)å¯¹è±¡çš„æ¥å£ã€‚</td></tr><tr><td>å…·ä½“èšé›†</td><td>å®ç°äº†åˆ›å»ºè¿­ä»£å™¨(Iterator)å¯¹è±¡çš„æ¥å£ï¼Œè¿”å›ä¸€ä¸ªåˆé€‚çš„å…·ä½“è¿­ä»£å™¨å®ä¾‹ã€‚</td></tr><tr><td>å®¢æˆ·ç«¯</td><td>æŒæœ‰å¯¹èšé›†åŠå…¶è¿­ä»£å™¨å¯¹è±¡çš„å¼•ç”¨ï¼Œè°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„è¿­ä»£æ¥å£ï¼Œä¹Ÿæœ‰å¯èƒ½é€šè¿‡è¿­ä»£å™¨æ“ä½œèšé›†å…ƒç´ çš„å¢åŠ å’Œåˆ é™¤ã€‚</td></tr></tbody></table><p>ã€€ã€€è¿­ä»£å™¨æ¨¡å¼æœ‰ä¸¤ç§ï¼š<strong>å¤–ç¦€è¿­ä»£å™¨</strong>å’Œ<strong>å†…ç¦€è¿­ä»£å™¨</strong>ã€‚<br>å¤–ç¦€è¿­ä»£å™¨ â€“ â€œå…·ä½“è¿­ä»£å™¨â€æ˜¯åœ¨â€å…·ä½“èšé›†â€ä¹‹å¤–å®ç°çš„ã€‚<br>å†…ç¦€è¿­ä»£å™¨ â€“ â€œå…·ä½“è¿­ä»£å™¨â€æ˜¯åœ¨â€å…·ä½“èšé›†â€é‡Œé¢å®ç°çš„ï¼Œâ€å…·ä½“è¿­ä»£å™¨â€æ˜¯â€å…·ä½“èšé›†â€çš„ç§æœ‰å†…éƒ¨ç±»ã€‚</p><p>ã€€ã€€åœ¨å¤–ç¦€è¿­ä»£å™¨ä¸­ï¼Œâ€å…·ä½“èšé›†â€å‘å¤–æä¾›äº†è®¿é—®èšé›†ä¸­å„ä¸ªå…ƒç´ çš„æ¥å£ï¼›è€Œåœ¨å†…ç¦€è¿­ä»£å™¨ä¸­ï¼Œâ€å…·ä½“èšé›†â€åŒ…å«äº†å†…éƒ¨ç±»â€å…·ä½“è¿­ä»£å™¨â€ï¼Œè¿™å°±æ„å‘³ç€â€å…·ä½“è¿­ä»£å™¨â€å¯ä»¥ç›´æ¥è®¿é—®â€å…·ä½“èšé›†â€çš„æˆå‘˜å¯¹è±¡ï¼Œè€Œä¸éœ€è¦é€šè¿‡å‡½æ•°æ¥å£å»è®¿é—®ã€‚</p><h1 id="å¤–ç¦€è¿­ä»£å™¨"><a href="#å¤–ç¦€è¿­ä»£å™¨" class="headerlink" title="å¤–ç¦€è¿­ä»£å™¨"></a>å¤–ç¦€è¿­ä»£å™¨</h1><p>ã€€ã€€å¦‚æœè¿­ä»£å™¨æ˜¯åœ¨èšé›†ç»“æ„ä¹‹å¤–å®ç°çš„ï¼Œè¿™æ ·çš„è¿­ä»£å™¨è¢«ç§°ä¸ºå¤–ç¦€è¿­ä»£å™¨(Extrinsic Iterator)ã€‚</p><p>ä¸‹é¢çœ‹çœ‹â€å¤–ç¦€è¿­ä»£å™¨â€ä¸­å„ä¸ªè§’è‰²çš„ä»£ç ã€‚</p><h2 id="æŠ½è±¡è¿­ä»£å™¨ç±»"><a href="#æŠ½è±¡è¿­ä»£å™¨ç±»" class="headerlink" title="æŠ½è±¡è¿­ä»£å™¨ç±»"></a>æŠ½è±¡è¿­ä»£å™¨ç±»</h2><pre><code>public interface Iterator {    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´     public void first();    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´     public void next();    // è¿­ä»£æ–¹æ³•ï¼šæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªå…ƒç´     public boolean isDone();    // è¿­ä»£æ–¹æ³•ï¼šè¿”è¿˜å½“å‰å…ƒç´     public Object currentItem();}</code></pre><h2 id="å…·ä½“è¿­ä»£å™¨ç±»"><a href="#å…·ä½“è¿­ä»£å™¨ç±»" class="headerlink" title="å…·ä½“è¿­ä»£å™¨ç±»"></a>å…·ä½“è¿­ä»£å™¨ç±»</h2><pre><code>public class ConcreteIterator implements Iterator {    private ConcreteAggregate agg;    // ç´¢å¼•ä½ç½®    private int index = 0;    // é›†åˆå¤§å°    private int size = 0;    public ConcreteIterator(ConcreteAggregate agg){        this.agg = agg;        this.size = agg.size();        index = 0;    }    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´     @Override    public void first() {        index = 0;    }    // è¿­ä»£æ–¹æ³•ï¼šæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªå…ƒç´     @Override    public boolean isDone() {        return (index &gt;= size);    }    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´     @Override    public void next() {        if(index &lt; size) {            index ++;        }    }    // è¿­ä»£æ–¹æ³•ï¼šè¿”è¿˜å½“å‰å…ƒç´     @Override    public Object currentItem() {        return agg.getElement(index);    }}</code></pre><h2 id="èšé›†ç±»"><a href="#èšé›†ç±»" class="headerlink" title="èšé›†ç±»"></a>èšé›†ç±»</h2><pre><code>abstract public class Aggregate {    // å·¥å‚æ–¹æ³•ï¼šè¿”å›è¿­ä»£å™¨å¯¹è±¡    public abstract Iterator createIterator();}</code></pre><h2 id="å…·ä½“èšé›†ç±»"><a href="#å…·ä½“èšé›†ç±»" class="headerlink" title="å…·ä½“èšé›†ç±»"></a>å…·ä½“èšé›†ç±»</h2><pre><code>public class ConcreteAggregate extends Aggregate {    private Object[] objs = {&quot;Monk Tang&quot;,        &quot;Monkey&quot;, &quot;Pigsy&quot;,        &quot;Sandy&quot;, &quot;Horse&quot;};    @Override    public Iterator createIterator() {        return new ConcreteIterator(this);    }    // å–å€¼æ–¹æ³•ï¼šå‘å¤–ç•Œæä¾›èšé›†å…ƒç´     public Object getElement(int index){        if(index &lt; objs.length){            return objs[index];        }else{            return null;        }    }    // å–å€¼æ–¹æ³•ï¼šå‘å¤–ç•Œæä¾›èšé›†çš„å¤§å°    public int size(){        return objs.length;    }}</code></pre><h2 id="å®¢æˆ·ç«¯ç±»"><a href="#å®¢æˆ·ç«¯ç±»" class="headerlink" title="å®¢æˆ·ç«¯ç±»"></a>å®¢æˆ·ç«¯ç±»</h2><pre><code>public class Client {    private Iterator it;    private Aggregate agg = new ConcreteAggregate();    public void operation() {        it = agg.createIterator();        while(!it.isDone()) {            System.out.println(it.currentItem());            it.next();        }    }3.4    public static void main(String[] args) {        Client client = new Client();        client.operation();    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Monk TangMonkeyPigsySandyHorse</code></pre><h1 id="å†…ç¦€è¿­ä»£å™¨"><a href="#å†…ç¦€è¿­ä»£å™¨" class="headerlink" title="å†…ç¦€è¿­ä»£å™¨"></a>å†…ç¦€è¿­ä»£å™¨</h1><p>ã€€ã€€å¦‚æœå°†â€å¤–ç¦€è¿­ä»£å™¨â€ä¸­çš„â€å…·ä½“è¿­ä»£å™¨â€æ”¹å†™æˆâ€å…·ä½“èšé›†ç±»â€çš„ä¸€ä¸ªç§æœ‰ç±»ï¼Œå³è¿­ä»£å™¨æ˜¯åœ¨èšé›†ç»“æ„ä¹‹å†…å®ç°ï¼›è¿™æ ·çš„è¿­ä»£å™¨ï¼Œå°±è¢«ç§°ä¸ºå†…ç¦€è¿­ä»£å™¨(Intrinsic Iterator)ã€‚</p><p>ä¸‹é¢çœ‹çœ‹â€å†…ç¦€è¿­ä»£å™¨â€ä¸­å„ä¸ªè§’è‰²çš„ä»£ç ã€‚</p><h2 id="æŠ½è±¡è¿­ä»£å™¨ç±»-1"><a href="#æŠ½è±¡è¿­ä»£å™¨ç±»-1" class="headerlink" title="æŠ½è±¡è¿­ä»£å™¨ç±»"></a>æŠ½è±¡è¿­ä»£å™¨ç±»</h2><pre><code>public interface Iterator {    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´     public void first();    // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´     public void next();    // è¿­ä»£æ–¹æ³•ï¼šæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªå…ƒç´     public boolean isDone();    // è¿­ä»£æ–¹æ³•ï¼šè¿”è¿˜å½“å‰å…ƒç´     public Object currentItem();}</code></pre><h2 id="èšé›†ç±»-1"><a href="#èšé›†ç±»-1" class="headerlink" title="èšé›†ç±»"></a>èšé›†ç±»</h2><pre><code>abstract public class Aggregate {    // å·¥å‚æ–¹æ³•ï¼šè¿”å›è¿­ä»£å™¨å¯¹è±¡    public abstract Iterator createIterator();}</code></pre><h2 id="å…·ä½“èšé›†ç±»-1"><a href="#å…·ä½“èšé›†ç±»-1" class="headerlink" title="å…·ä½“èšé›†ç±»"></a>å…·ä½“èšé›†ç±»</h2><pre><code>public class ConcreteAggregate extends Aggregate {    private Object[] objs = {&quot;Monk Tang&quot;,        &quot;Monkey&quot;, &quot;Pigsy&quot;,        &quot;Sandy&quot;, &quot;Horse&quot;};    @Override    public Iterator createIterator() {        return new ConcreteIterator();    }    private class ConcreteIterator            implements Iterator {        // ç´¢å¼•ä½ç½®        private int index = 0;        // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´         @Override        public void first() {            index = 0;        }        // è¿­ä»£æ–¹æ³•ï¼šæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªå…ƒç´         @Override        public boolean isDone() {            return (index == objs.length);        }        // è¿­ä»£æ–¹æ³•ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´         @Override        public void next() {            if(index &lt; objs.length) {                index ++;            }        }        // è¿­ä»£æ–¹æ³•ï¼šè¿”è¿˜å½“å‰å…ƒç´         @Override        public Object currentItem() {            return objs[index];        }    }}</code></pre><h2 id="å®¢æˆ·ç«¯ç±»-1"><a href="#å®¢æˆ·ç«¯ç±»-1" class="headerlink" title="å®¢æˆ·ç«¯ç±»"></a>å®¢æˆ·ç«¯ç±»</h2><pre><code>public class Client {    private Iterator it;    private Aggregate agg = new ConcreteAggregate();    public void operation() {        it = agg.createIterator();        while(!it.isDone()) {            System.out.println(it.currentItem());            it.next();        }    }    public static void main(String[] args) {        Client client = new Client();        client.operation();    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Monk TangMonkeyPigsySandyHorse</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;è¿­ä»£å™¨æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ã€€ã€€è¿­ä»£å™¨æ¨¡å¼åˆå«æ¸¸æ ‡(Cursor)æ¨¡å¼ï¼Œæ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚è¿­ä»£å™¨æ¨¡å¼å¯ä»¥é¡ºåºåœ°è®¿é—®ä¸€ä¸ªèšé›†ä¸­çš„å…ƒç´ è€Œä¸å¿…æš´éœ²èšé›†çš„å†…éƒ¨è¡¨è±¡ï¼ˆinternal representationï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿­ä»£å™¨æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€å¸¸è§çš„å‡ ä¸ªæ¨¡å¼ä¹‹ä¸€ã€‚åœ¨Javaçš„é›†åˆ(Collection)æ¡†æ¶ä¸­ï¼Œå¹¿æ³›çš„ä½¿ç”¨è¿­ä»£å™¨(Iteratorå’ŒEnumeration)æ¥éå†é›†åˆçš„å…ƒç´ ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="è¿­ä»£å™¨æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼18ä¹‹ è§‚å¯Ÿè€…(Observer)æ¨¡å¼(è¡Œä¸ºæ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/06/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F18%E4%B9%8B-%E8%A7%82%E5%AF%9F%E8%80%85-Observer-%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/06/02/è®¾è®¡æ¨¡å¼18ä¹‹-è§‚å¯Ÿè€…-Observer-æ¨¡å¼-è¡Œä¸ºæ¨¡å¼/</id>
    <published>2014-06-02T03:10:51.000Z</published>
    <updated>2019-04-22T15:23:58.845Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹"></a>è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹</h1><p>ã€€è§‚å¯Ÿè€…æ¨¡å¼æ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ï¼Œåˆå«å‘å¸ƒ-è®¢é˜…(Publish/Subscribe)æ¨¡å¼ã€æ¨¡å‹-è§†å›¾(Model/View)æ¨¡å¼ã€æº-ç›‘å¬å™¨(Source/Listener)æ¨¡å¼æˆ–ä»å±è€…(Dependents)æ¨¡å¼ã€‚<br>ã€€<br>ã€€è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</p><a id="more"></a><p>ã€€ä¾‹å¦‚ï¼Œé©¬è·¯ä¸Šçš„äº¤é€šæŒ‡ç¤ºç¯ä¸ºçº¢ç¯äº®çš„è¯ï¼Œæ±½è½¦ä¼šåœæ­¢ï¼Œè¡Œäººå¯ä»¥é€šè¡Œã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œäº¤é€šæŒ‡ç¤ºç­‰å°±æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œè€Œè¡Œäººå’Œæ±½è½¦åˆ™æ˜¯è§‚å¯Ÿè€…ï¼Œä»–ä»¬ä¼šæ ¹æ®è§‚å¯Ÿåˆ°çš„äº¤é€šæŒ‡ç¤ºç¯çš„çŠ¶å†µä½œå‡ºç›¸åº”çš„è¡Œä¸ºã€‚</p><p>ã€€è§‚å¯Ÿè€…çš„UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern18_01.jpg" alt="pattern18_01"></p><p>ã€€ã€€è§‚å¯Ÿè€…æ¨¡å¼æ‰€æ¶‰åŠçš„è§’è‰²æœ‰ï¼š<strong>æŠ½è±¡ä¸»é¢˜(Subject)ï¼Œå…·ä½“ä¸»é¢˜(ConcreteSubject)ï¼ŒæŠ½è±¡è§‚å¯Ÿè€…(Observer)ï¼Œå…·ä½“è§‚å¯Ÿè€…(ConcreteObserver)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ½è±¡ä¸»é¢˜</td><td>æŠ½è±¡ä¸»é¢˜è§’è‰²æŠŠæ‰€æœ‰å¯¹è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªé›†åˆ(æ¯”å¦‚Vectorå¯¹è±¡)é‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»ä½•æ•°é‡çš„è§‚å¯Ÿè€…ã€‚æŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ï¼ŒæŠ½è±¡ä¸»é¢˜è§’è‰²åˆå«åšæŠ½è±¡è¢«è§‚å¯Ÿè€…(Observable)è§’è‰²ï¼Œä¸€èˆ¬ç”¨ä¸€ä¸ªæŠ½è±¡ç±»æˆ–è€…ä¸€ä¸ªæ¥å£å®ç°ã€‚</td></tr><tr><td>å…·ä½“ä¸»é¢˜</td><td>å°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼›åœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚å…·ä½“ä¸»é¢˜è§’è‰²åˆå«åšå…·ä½“è¢«è§‚å¯Ÿè€…(Concrete Observable)è§’è‰²ã€‚å…·ä½“ä¸»é¢˜é€šå¸¸ç”¨ä¸€ä¸ªå…·ä½“å­ç±»å®ç°ã€‚</td></tr><tr><td>æŠ½è±¡è§‚å¯Ÿè€…</td><td>ä¸ºæ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨å¾—åˆ°ä¸»é¢˜çš„é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ã€‚è¿™ä¸ªæ¥å£å«åšæ›´æ–°æ¥å£ã€‚æŠ½è±¡è§‚å¯Ÿè€…ä¸€èˆ¬ç”¨ä¸€ä¸ªæŠ½è±¡ç±»æˆ–è€…ä¸€ä¸ªæ¥å£å®ç°ã€‚</td></tr><tr><td>å…·ä½“è§‚å¯Ÿè€…</td><td>å­˜å‚¨ä¸ä¸»é¢˜çš„çŠ¶æ€è‡ªæ°çš„çŠ¶æ€ã€‚å…·ä½“è§‚å¯Ÿè€…è§’è‰²å®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€è¦æ±‚çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿ä½¿æœ¬èº«çš„çŠ¶æ€ä¸ä¸»é¢˜çš„çŠ¶æ€ç›¸åè°ƒã€‚å¦‚æœéœ€è¦ï¼Œå…·ä½“è§‚å¯Ÿè€…è§’è‰²å¯ä»¥ä¿æŒä¸€ä¸ªæŒ‡å‘å…·ä½“ä¸»é¢˜å¯¹è±¡çš„å¼•ç”¨ã€‚å®ƒé€šå¸¸ç”¨ä¸€ä¸ªå…·ä½“å­ç±»å®ç°ã€‚</td></tr></tbody></table><h2 id="ç¤ºæ„ä»£ç "><a href="#ç¤ºæ„ä»£ç " class="headerlink" title="ç¤ºæ„ä»£ç "></a>ç¤ºæ„ä»£ç </h2><p>æŠ½è±¡ä¸»é¢˜ç±»</p><pre><code>import java.util.Vector;import java.util.Enumeration;abstract public class Subject {    private Vector observersVector = new Vector();    // æ³¨å†Œè§‚å¯Ÿè€…å¯¹è±¡    public void attach(Observer observer) {        observersVector.addElement(observer);    }    // æ³¨é”€è§‚å¯Ÿè€…å¯¹è±¡    public void detach(Observer observer) {        observersVector.removeElement(observer);    }    // é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…å¯¹è±¡    public void notifyObservers() {        Enumeration enu = observers();        while (enu.hasMoreElements()) {            ((Observer)enu.nextElement()).update();        }    }    public Enumeration observers(){        return ((Vector)observersVector.clone()).elements();    }}</code></pre><p>å…·ä½“ä¸»é¢˜ç±»</p><pre><code>public class ConcreteSubject extends Subject{    private String state;    // æ”¹å˜ä¸»é¢˜çš„æ–¹æ³•ã€‚    public void change(String newState){        state = newState;        this.notifyObservers();    }}</code></pre><p>æŠ½è±¡è§‚å¯Ÿè€…ç±»</p><pre><code>public interface Observer {    //  é€šçŸ¥æ¥å£    public void update();}</code></pre><p>å…·ä½“è§‚å¯Ÿè€…ç±»</p><pre><code>public class ConcreteObserver implements Observer {    @Override    public void update() {        System.out.println(&quot;I am notified.&quot;);    }}</code></pre><p>å®¢æˆ·ç«¯ç±»</p><pre><code>public class Client {    private static ConcreteSubject subject;    private static Observer observer;    public static void main(String[] args) {        // åˆ›å»ºä¸»é¢˜        subject = new ConcreteSubject();        // åˆ›å»ºè§‚å¯Ÿè€…        observer = new ConcreteObserver();        // å°†è§‚å¯Ÿè€…æ³¨å†Œåˆ°&quot;ä¸»é¢˜&quot;ä¸Š        subject.attach(observer);        // æ”¹å˜ä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€        subject.change(&quot;new state&quot;);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>I am notified.</code></pre><h1 id="Javaä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼"><a href="#Javaä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="Javaä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼"></a>Javaä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</h1><p>ã€€ã€€Javaè¯­è¨€æœ¬èº«æ”¯æŒâ€è§‚å¯Ÿè€…æ¨¡å¼â€ï¼Œå®ƒæä¾›äº†ç›¸åº”çš„â€æŠ½è±¡ä¸»é¢˜ç±»(Observable)â€å’Œâ€æŠ½è±¡è§‚å¯Ÿè€…ç±»(Observer)â€ã€‚</p><p>ã€€ã€€Observableæ˜¯ä¸ªå®ä¾‹ç±»ã€‚å®ƒæä¾›å…¬å¼€çš„æ–¹æ³•æ”¯æŒè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™äº›æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå¯¹Observableçš„å­ç±»éå¸¸é‡è¦ï¼šä¸€ä¸ªæ˜¯setChanged()ï¼Œå¦ä¸€ä¸ªæ˜¯notifyObservers()ã€‚ç¬¬ä¸€æ–¹æ³•setChanged()è¢«è°ƒç”¨ä¹‹åä¼šè®¾ç½®ä¸€ä¸ªå†…éƒ¨æ ‡è®°å˜é‡ï¼Œä»£è¡¨è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ã€‚ç¬¬äºŒä¸ªæ˜¯notifyObservers()ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè°ƒç”¨æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å¯¹è±¡çš„update()æ–¹æ³•ï¼Œä½¿è¿™äº›è§‚å¯Ÿè€…å¯¹è±¡å¯ä»¥æ›´æ–°è‡ªå·±ã€‚</p><p>ã€€ã€€Observeræ˜¯ä¸€ä¸ªæ¥å£ã€‚å®ƒåªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå³update()æ–¹æ³•ï¼Œå½“è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¢«è§‚å¯Ÿè€…å¯¹è±¡çš„notifyObservers()æ–¹æ³•å°±ä¼šè°ƒç”¨è¿™ä¸€æ–¹æ³•ã€‚</p><p>ã€€ã€€ä¸‹é¢æ¼”ç¤ºJavaä¸­Observerå’ŒObservableçš„ç”¨æ³•ã€‚</p><p>ã€€ã€€ä»¥å…¬é¸¡æ‰“é¸£æ¥å»ºæ¨¡ï¼šå¤ªé˜³æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œå…¬é¸¡æ˜¯è§‚å¯Ÿè€…ï¼›å½“å…¬é¸¡è§‚å¯Ÿåˆ°å¤ªé˜³å‡èµ·çš„æ—¶å€™ï¼Œå°±æ‰“é¸£ã€‚</p><h2 id="å¤ªé˜³"><a href="#å¤ªé˜³" class="headerlink" title="å¤ªé˜³"></a>å¤ªé˜³</h2><p>å¤ªé˜³æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œå®ƒç»§æ‰¿äº†Observableã€‚</p><pre><code>import java.util.Observable;public class Sun extends Observable {    public void rise() {        System.out.println(&quot;Sun rise.&quot;);        // è®¾ç½®&quot;è¢«è§‚å¯Ÿè€…&quot;çš„çŠ¶æ€æ ‡è®°ï¼Œè¡¨ç¤ºå®ƒå‘ç”Ÿäº†å˜åŒ–ã€‚        this.setChanged();        // é€šçŸ¥&quot;è§‚å¯Ÿè€…&quot;è¯¥å˜åŒ–ã€‚        this.notifyObservers();    }}</code></pre><h2 id="å…¬é¸¡"><a href="#å…¬é¸¡" class="headerlink" title="å…¬é¸¡"></a>å…¬é¸¡</h2><p>å…¬é¸¡æ˜¯è§‚å¯Ÿè€…ï¼Œå®ƒå®ç°äº†Observerå¯¹è±¡ã€‚</p><pre><code>import java.util.Observer;import java.util.Observable;public class Cock implements Observer {    private Sun sun;    public Cock(Sun sun) {        this.sun = sun;        // å°†è§‚å¯Ÿè€…Cockæ³¨å†Œåˆ°&quot;è¢«è§‚å¯Ÿè€…sun&quot;ä¸Šã€‚        sun.addObserver(this);    }    // &quot;è¢«è§‚å¯Ÿè€…&quot;å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ&quot;è§‚å¯Ÿè€…&quot;å¯¹åº”çš„å“åº”æ–¹æ³•ã€‚    @Override    public void update(Observable o, Object arg) {        System.out.println(&quot;Cock gogoda,gogoda,gogoda...&quot;);    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><pre><code>public class Client {    private static Cock cock;    private static Sun sun;    public static void main(String[] args) {        // æ–°å»º&quot;å¤ªé˜³&quot;(è¢«è§‚å¯Ÿè€…)        sun = new Sun();        // æ–°å»º&quot;å…¬é¸¡&quot;(è§‚å¯Ÿè€…)        cock = new Cock(sun);        // å¤ªé˜³å‡èµ·ã€‚å…¬é¸¡è§‚å¯Ÿåˆ°å¤ªé˜³å‡çº§åï¼Œä¼šæ‰“é¸£ï¼        sun.rise();    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Sun rise.Cock gogoda,gogoda,gogoda...</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ã€€è§‚å¯Ÿè€…æ¨¡å¼æ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ï¼Œåˆå«å‘å¸ƒ-è®¢é˜…(Publish/Subscribe)æ¨¡å¼ã€æ¨¡å‹-è§†å›¾(Model/View)æ¨¡å¼ã€æº-ç›‘å¬å™¨(Source/Listener)æ¨¡å¼æˆ–ä»å±è€…(Dependents)æ¨¡å¼ã€‚&lt;br&gt;ã€€&lt;br&gt;ã€€è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="è§‚å¯Ÿè€…æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼17ä¹‹ æ¨¡æ¿æ–¹æ³•(Template Method)æ¨¡å¼(è¡Œä¸ºæ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/06/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F17%E4%B9%8B-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95-Template-Method-%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/06/01/è®¾è®¡æ¨¡å¼17ä¹‹-æ¨¡æ¿æ–¹æ³•-Template-Method-æ¨¡å¼-è¡Œä¸ºæ¨¡å¼/</id>
    <published>2014-06-01T03:10:33.000Z</published>
    <updated>2019-04-22T15:23:58.569Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¨¡æ¿æ¨¡å¼ç®€ä»‹"><a href="#æ¨¡æ¿æ¨¡å¼ç®€ä»‹" class="headerlink" title="æ¨¡æ¿æ¨¡å¼ç®€ä»‹"></a>æ¨¡æ¿æ¨¡å¼ç®€ä»‹</h1><p>ã€€ã€€æ¨¡æ¿æ–¹æ³•(Template Method)æ¨¡å¼æ˜¯ç±»çš„è¡Œä¸ºæ¨¡å¼ã€‚å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•ä»¥åŠå…·ä½“æ„é€ å‡½æ•°çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚è¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç”¨æ„ã€‚<br>ã€€ã€€æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯æ‰€æœ‰æ¨¡å¼ä¸­æœ€ä¸ºå¸¸è§çš„å‡ ä¸ªæ¨¡å¼ä¹‹ä¸€ï¼Œè€Œä¸”å¾ˆå¯èƒ½æˆ‘ä»¬è‡ªå·±ä½¿ç”¨è¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼è€Œæ²¡æœ‰æ„è¯†åˆ°è‡ªå·±å·²ç»ä½¿ç”¨äº†è¿™ä¸ªæ¨¡å¼ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯åŸºäºç»§æ‰¿çš„ä»£ç å¤ç”¨çš„åŸºæœ¬æŠ€æœ¯ã€‚<br>ã€€ã€€Javaçš„é›†åˆå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ï¼Œåˆ©ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¾‹å­ã€‚Javaé›†åˆä¸­çš„Collectioné›†åˆåŒ…æ‹¬Listå’ŒSetä¸¤å¤§ç»„æˆéƒ¨åˆ†ã€‚Listæ˜¯é˜Ÿåˆ—ï¼Œè€ŒSetæ˜¯æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚å®ƒä»¬å…±åŒçš„æ¥å£éƒ½åœ¨Collectionæ¥å£å£°æ˜ï¼›ä¾‹å¦‚ï¼Œéƒ½åŒ…å«äº†size()ï¼ŒisEmpty()æ–¹æ³•ã€‚è€ŒAbstractCollectionè¿™ä¸ªæŠ½è±¡ç±»åˆ™å®ç°äº†å®ƒä»¬å…±åŒçš„æ–¹æ³•ï¼Œå…¶ä½™æœªå®ç°çš„æ–¹æ³•å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ã€‚Listå’ŒSetçš„å®ä¾‹ç±»ï¼Œå°±æ˜¯é€šè¿‡ç»§æ‰¿AbstractCollection(æˆ–å®ƒçš„å­ç±»)ï¼Œçœå»äº†è®¸å¤šé‡å¤æ€§ç¼–ç çš„å·¥ä½œï¼</p><a id="more"></a><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„UMLç±»å›¾ï¼š<br><img src="/images/media/pattern17_01.jpg" alt="pattern17_01"></p><p>è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼š<strong>æŠ½è±¡æ¨¡æ¿(Abstract Template)ï¼Œå…·ä½“æ¨¡æ¿(Concrete Template)</strong>ã€‚</p><p>  æŠ½è±¡æ¨¡æ¿æœ‰å¦‚ä¸‹è´£ä»»ï¼š<br>â€¢ å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ“ä½œï¼Œä»¥ä¾¿è®©å­ç±»å®ç°ã€‚è¿™äº›æŠ½è±¡æ“ä½œå«åšåŸºæœ¬æ“ä½œï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ã€‚<br>â€¢ å®šä¹‰å¹¶å®ç°äº†ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚è¿™ä¸ªæ¨¡æ¿æ–¹æ³•ä¸€èˆ¬æ˜¯ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„éª¨æ¶ï¼Œè€Œé€»è¾‘çš„ç»„æˆæ­¥éª¤åœ¨ç›¸åº”çš„æŠ½è±¡æ“ä½œä¸­ï¼Œæ¨è¿Ÿåˆ°å­ç±»å®ç°ã€‚é¡¶çº§é€»è¾‘ä¹Ÿæœ‰å¯èƒ½è°ƒç”¨ä¸€äº›å…·ä½“æ–¹æ³•ã€‚</p><p>  å…·ä½“æ¨¡æ¿æœ‰å¦‚ä¸‹è´£ä»»ï¼š<br>â€¢ å®ç°çˆ¶ç±»æ‰€å®šä¹‰çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ã€‚<br>â€¢ æ¯ä¸€ä¸ªæŠ½è±¡æ¨¡æ¿è§’è‰²éƒ½å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå…·ä½“æ¨¡æ¿è§’è‰²ä¸ä¹‹å¯¹åº”ï¼Œè€Œæ¯ä¸€ä¸ªå…·ä½“æ¨¡æ¿è§’è‰²éƒ½å¯ä»¥ç»™å‡ºè¿™äº›æŠ½è±¡æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯é¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ï¼‰çš„ä¸åŒå®ç°ï¼Œä»è€Œä½¿å¾—é¡¶çº§é€»è¾‘çš„å®ç°å„ä¸ç›¸åŒã€‚</p><p>ç¤ºæ„ä»£ç </p><pre><code>abstract public class AbstractClass {    // æ¨¡æ¿æ–¹æ³•    public void templateMethod(){        hookMethod(); //è°ƒç”¨åŸºæœ¬æ–¹æ³•(ç”±å­ç±»å®ç°)        abstractMethod(); //è°ƒç”¨åŸºæœ¬æ–¹æ³•(ç”±å­ç±»å®ç°)        concreteMethod(); //è°ƒç”¨åŸºæœ¬æ–¹æ³•(å·²ç»å®ç°)    }    // åŸºæœ¬æ–¹æ³•çš„å£°æ˜ï¼ˆç”±å­ç±»å®ç°ï¼Œä½†æŠ½è±¡æ¨¡æ¿ç»™å‡ºäº†é»˜è®¤å®ç°ï¼‰    public void hookMethod() {}    // åŸºæœ¬æ–¹æ³•çš„å£°æ˜ï¼ˆç”±å­ç±»å®ç°ï¼‰    public abstract void abstractMethod();    // åŸºæœ¬æ–¹æ³•ï¼ˆå·²ç»å®ç°ï¼‰    public final void concreteMethod(){        // do something    }}public class ConcreteClass extends AbstractClass {    // åŸºæœ¬æ–¹æ³•çš„å®ç°    @Override    public void hookMethod() {        // do something    }    // åŸºæœ¬æ–¹æ³•çš„å®ç°    @Override    public void abstractMethod() {        // do something    }}</code></pre><p>ã€€ã€€æŠ½è±¡æ¨¡æ¿è§’è‰²AbstractTemplateæä¾›äº†ä¸¤ä¸ªå…·ä½“æ–¹æ³•templateMethod()å’ŒconcreteMethod()ï¼›å£°æ˜äº†2ä¸ªæŠ½è±¡æ–¹æ³•hookMethod()å’ŒabstractMethod()ã€‚</p><p>ã€€ã€€å…·ä½“æ¨¡æ¿è§’è‰²ConcreteTemplateå®ç°äº†çˆ¶ç±»å£°æ˜çš„åŸºæœ¬æ–¹æ³•hookMethod()å’ŒabstractMethod()ã€‚</p><p><br><br>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸­çš„æ–¹æ³•</p><p>æ¨¡æ¿æ–¹æ³•ä¸­çš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>æ¨¡æ¿æ–¹æ³•</strong> å’Œ <strong>åŸºæœ¬æ–¹æ³•</strong>ã€‚</p><p><strong>æ¨¡æ¿æ–¹æ³•</strong></p><p>ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•æ˜¯å®šä¹‰åœ¨æŠ½è±¡ç±»ä¸­çš„ï¼ŒæŠŠåŸºæœ¬æ“ä½œæ–¹æ³•ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ€»ç®—æ³•æˆ–ä¸€ä¸ªæ€»è¡Œä¸ºçš„æ–¹æ³•ã€‚<br>ä¸€ä¸ªæŠ½è±¡ç±»å¯ä»¥æœ‰ä»»æ„å¤šä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œè€Œä¸é™äºä¸€ä¸ªã€‚æ¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ä»»æ„å¤šä¸ªå…·ä½“æ–¹æ³•ã€‚</p><p><strong>åŸºæœ¬æ–¹æ³•</strong></p><p>åŸºæœ¬æ–¹æ³•åˆå¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š<strong>æŠ½è±¡æ–¹æ³•(Abstract Method)ã€å…·ä½“æ–¹æ³•(Concrete Method)å’Œé’©å­æ–¹æ³•(Hook Method)</strong>ã€‚<br>â€¢ æŠ½è±¡æ–¹æ³•: ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜ï¼Œç”±å…·ä½“å­ç±»å®ç°ã€‚åœ¨Javaè¯­è¨€é‡ŒæŠ½è±¡æ–¹æ³•ä»¥abstractå…³é”®å­—æ ‡ç¤ºã€‚<br>â€¢ å…·ä½“æ–¹æ³•: ä¸€ä¸ªå…·ä½“æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜å¹¶å®ç°ï¼Œè€Œå­ç±»å¹¶ä¸å®ç°æˆ–ç½®æ¢ã€‚<br>â€¢ é’©å­æ–¹æ³•: ä¸€ä¸ªé’©å­æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜å¹¶å®ç°ï¼Œè€Œå­ç±»ä¼šåŠ ä»¥æ‰©å±•ã€‚é€šå¸¸æŠ½è±¡ç±»ç»™å‡ºçš„å®ç°æ˜¯ä¸€ä¸ªç©ºå®ç°ï¼Œä½œä¸ºæ–¹æ³•çš„é»˜è®¤å®ç°ã€‚</p><p>ã€€ã€€åœ¨å‰é¢çš„UMLç¤ºä¾‹ä¸­ï¼ŒAbstractClassæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå¸¦æœ‰ä¸‰ä¸ªæ–¹æ³•ã€‚å…¶ä¸­abstractMethod()æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®ƒç”±æŠ½è±¡ç±»å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå¹¶ç”±å­ç±»å®ç°ï¼›hookMethod()æ˜¯ä¸€ä¸ªé’©å­æ–¹æ³•ï¼Œå®ƒç”±æŠ½è±¡ç±»å£°æ˜å¹¶æä¾›é»˜è®¤å®ç°ï¼Œå¹¶ä¸”ç”±å­ç±»ç½®æ¢æ‰ã€‚concreteMethod()æ˜¯ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œå®ƒç”±æŠ½è±¡ç±»å£°æ˜å¹¶å®ç°ã€‚</p><p>æç¤ºï¼šé’©å­æ–¹æ³•çš„åå­—åº”å½“ä»¥doå¼€å§‹ã€‚</p><h1 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¤ºä¾‹"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¤ºä¾‹"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¤ºä¾‹</h1><p>ã€€ã€€è€ƒè™‘ä¸€ä¸ªè®¡ç®—å­˜æ¬¾åˆ©æ¯çš„ä¾‹å­ã€‚å‡è®¾ç³»ç»Ÿéœ€è¦æ”¯æŒä¸¤ç§å­˜æ¬¾è´¦å·ï¼Œå³è´§å¸å¸‚åœº(Money Market)è´¦å·å’Œå®šæœŸå­˜æ¬¾(Certificate of Deposite)è´¦å·ã€‚è¿™ä¸¤ç§è´¦å·çš„å­˜æ¬¾åˆ©æ¯æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ï¼Œåœ¨è®¡ç®—ä¸€ä¸ªå­˜æˆ·çš„å­˜æ¬¾åˆ©æ¯é¢æ—¶ï¼Œå¿…é¡»åŒºåˆ†ä¸¤ç§ä¸åŒçš„è´¦å·ç±»å‹ã€‚</p><p>ã€€ã€€è¿™ä¸ªç³»ç»Ÿçš„æ€»è¡Œä¸ºåº”å½“æ˜¯è®¡ç®—å‡ºåˆ©æ¯ï¼Œè¿™ä¹Ÿå°±å†³å®šäº†ä½œä¸ºä¸€ä¸ªæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„é¡¶çº§é€»è¾‘åº”å½“æ˜¯åˆ©æ¯è®¡ç®—ã€‚ç”±äºåˆ©æ¯è®¡ç®—æ¶‰åŠåˆ°ä¸¤ä¸ªæ­¥éª¤ï¼šä¸€ä¸ªåŸºæœ¬æ–¹æ³•ç»™å‡ºè´¦å·ç§ç±»ï¼Œå¦ä¸€ä¸ªåŸºæœ¬æ–¹æ³•ç»™å‡ºåˆ©æ¯ç™¾åˆ†æ¯”ã€‚è¿™ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•æ„æˆå…·ä½“é€»è¾‘ï¼Œå› ä¸ºè´¦å·çš„ç±»å‹ä¸åŒï¼Œæ‰€ä»¥å…·ä½“é€»è¾‘ä¼šæœ‰æ‰€ä¸åŒã€‚</p><p>ã€€ã€€æ˜¾ç„¶ï¼Œç³»ç»Ÿéœ€è¦ä¸€ä¸ªæŠ½è±¡è§’è‰²ç»™å‡ºé¡¶çº§è¡Œä¸ºçš„å®ç°ï¼Œè€Œå°†ä¸¤ä¸ªä½œä¸ºç»†èŠ‚æ­¥éª¤çš„åŸºæœ¬æ–¹æ³•ç•™ç»™å…·ä½“å­ç±»å®ç°ã€‚ç”±äºéœ€è¦è€ƒè™‘çš„è´¦å·æœ‰ä¸¤ç§ï¼šä¸€æ˜¯è´§å¸å¸‚åœºè´¦å·ï¼ŒäºŒæ˜¯å®šæœŸå­˜æ¬¾è´¦å·ã€‚ç³»ç»Ÿçš„UMLç±»å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><h2 id="æŠ½è±¡æ¨¡æ¿ç±»"><a href="#æŠ½è±¡æ¨¡æ¿ç±»" class="headerlink" title="æŠ½è±¡æ¨¡æ¿ç±»"></a>æŠ½è±¡æ¨¡æ¿ç±»</h2><pre><code>abstract public class Account {    protected String accountNumber;    public Account() {        accountNumber = null;    }    public Account(String accountNumber) {        this.accountNumber = accountNumber;    }    // æ¨¡æ¿æ–¹æ³•ï¼Œè®¡ç®—åˆ©æ¯æ•°é¢    public final double calculateInterest(){        double interestRate = doCalculateInterestRate();        String accountType = doCalculateAccountType();        double amount = calculateAmount(accountType, accountNumber);        return amount * interestRate;    }    // åŸºæœ¬æ–¹æ³•ç•™ç»™å­ç±»å®ç°    protected abstract String doCalculateAccountType();    // åŸºæœ¬æ–¹æ³•ç•™ç»™å­ç±»å®ç°    protected abstract double doCalculateInterestRate();    // åŸºæœ¬æ–¹æ³•ï¼Œå·²ç»å®ç°    private double calculateAmount(String accountType, String accountNumber){        // retrive amount from database        return 7243.00D;    }}</code></pre><h2 id="å…·ä½“æ¨¡æ¿ç±»"><a href="#å…·ä½“æ¨¡æ¿ç±»" class="headerlink" title="å…·ä½“æ¨¡æ¿ç±»"></a>å…·ä½“æ¨¡æ¿ç±»</h2><p>MoneyMarketAccount</p><pre><code>public class MoneyMarketAccount extends Account {    @Override    protected String doCalculateAccountType() {        return &quot;Money Market&quot;;    }    @Override    protected double doCalculateInterestRate() {        return 0.045D;    }}</code></pre><p>CDAccount</p><pre><code>public class CDAccount extends Account {    @Override    protected String doCalculateAccountType() {        return &quot;Certificate of Deposite&quot;;    }    @Override    protected double doCalculateInterestRate() {        return 0.065D;    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><pre><code>public class Client {    private static Account acct = null;    public static void main(String[] args) {        acct = new MoneyMarketAccount();        System.out.println(&quot;Interest from Money Market account: &quot; + acct.calculateInterest());        acct = new CDAccount();        System.out.println(&quot;Interest from CD account: &quot; + acct.calculateInterest());    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Interest from Money Market account: 325.935Interest from CD account: 470.795</code></pre><p>ç»“æœè¯´æ˜ï¼šAccountæ˜¯æŠ½è±¡æ¨¡æ¿ç±»ï¼ŒcalculateInterest()æ˜¯æ¨¡æ¿æ–¹æ³•ã€‚ä¸ç®¡æ˜¯â€è´§å¸å¸‚åœºå¸å·â€æˆ–è€…â€å®šæœŸå­˜æ¬¾â€ï¼Œå®ƒä»¬çš„åˆ©æ¯è®¡ç®—æ–¹å¼éƒ½æ˜¯é€šè¿‡æŠ½è±¡æ¨¡æ¿ç±»çš„calculateInterest()æ¥è®¡ç®—çš„ï¼›åªä¸è¿‡æ¶‰åŠåˆ°çš„æœ¬é‡‘å’Œåˆ©ç‡ä¸åŒè€Œå·²ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ¨¡æ¿æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;æ¨¡æ¿æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ã€€ã€€æ¨¡æ¿æ–¹æ³•(Template Method)æ¨¡å¼æ˜¯ç±»çš„è¡Œä¸ºæ¨¡å¼ã€‚å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•ä»¥åŠå…·ä½“æ„é€ å‡½æ•°çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚è¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç”¨æ„ã€‚&lt;br&gt;ã€€ã€€æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯æ‰€æœ‰æ¨¡å¼ä¸­æœ€ä¸ºå¸¸è§çš„å‡ ä¸ªæ¨¡å¼ä¹‹ä¸€ï¼Œè€Œä¸”å¾ˆå¯èƒ½æˆ‘ä»¬è‡ªå·±ä½¿ç”¨è¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼è€Œæ²¡æœ‰æ„è¯†åˆ°è‡ªå·±å·²ç»ä½¿ç”¨äº†è¿™ä¸ªæ¨¡å¼ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯åŸºäºç»§æ‰¿çš„ä»£ç å¤ç”¨çš„åŸºæœ¬æŠ€æœ¯ã€‚&lt;br&gt;ã€€ã€€Javaçš„é›†åˆå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ï¼Œåˆ©ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¾‹å­ã€‚Javaé›†åˆä¸­çš„Collectioné›†åˆåŒ…æ‹¬Listå’ŒSetä¸¤å¤§ç»„æˆéƒ¨åˆ†ã€‚Listæ˜¯é˜Ÿåˆ—ï¼Œè€ŒSetæ˜¯æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚å®ƒä»¬å…±åŒçš„æ¥å£éƒ½åœ¨Collectionæ¥å£å£°æ˜ï¼›ä¾‹å¦‚ï¼Œéƒ½åŒ…å«äº†size()ï¼ŒisEmpty()æ–¹æ³•ã€‚è€ŒAbstractCollectionè¿™ä¸ªæŠ½è±¡ç±»åˆ™å®ç°äº†å®ƒä»¬å…±åŒçš„æ–¹æ³•ï¼Œå…¶ä½™æœªå®ç°çš„æ–¹æ³•å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ã€‚Listå’ŒSetçš„å®ä¾‹ç±»ï¼Œå°±æ˜¯é€šè¿‡ç»§æ‰¿AbstractCollection(æˆ–å®ƒçš„å­ç±»)ï¼Œçœå»äº†è®¸å¤šé‡å¤æ€§ç¼–ç çš„å·¥ä½œï¼&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="æ¨¡æ¿æ–¹æ³•æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼16ä¹‹ ç­–ç•¥(Strategy)æ¨¡å¼(è¡Œä¸ºæ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/29/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F16%E4%B9%8B-%E7%AD%96%E7%95%A5-Strategy-%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/29/è®¾è®¡æ¨¡å¼16ä¹‹-ç­–ç•¥-Strategy-æ¨¡å¼-è¡Œä¸ºæ¨¡å¼/</id>
    <published>2014-05-29T03:10:17.000Z</published>
    <updated>2019-04-22T15:23:58.773Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç­–ç•¥æ¨¡å¼ç®€ä»‹"><a href="#ç­–ç•¥æ¨¡å¼ç®€ä»‹" class="headerlink" title="ç­–ç•¥æ¨¡å¼ç®€ä»‹"></a>ç­–ç•¥æ¨¡å¼ç®€ä»‹</h1><p>ç­–ç•¥(Strategy)æ¨¡å¼å±äºå¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚å…¶ç”¨æ„æ˜¯é’ˆå¯¹ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚</p><a id="more"></a><p>UMLç±»å›¾<br><img src="/images/media/pattern16_01.jpg" alt="pattern16_01"></p><p>è¿™ä¸ªæ¨¡å¼æ¶‰åŠåˆ°ä¸‰ä¸ªè§’è‰²ï¼š<strong>ç¯å¢ƒ(Context)ï¼ŒæŠ½è±¡ç­–ç•¥(Strategy)ï¼Œå…·ä½“ç­–ç•¥(ConcreteStrategy)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¯å¢ƒ</td><td>æŒæœ‰ä¸€ä¸ªStrategyçš„å¼•ç”¨ã€‚</td></tr><tr><td>æŠ½è±¡ç­–ç•¥</td><td>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»å®ç°ã€‚æ­¤è§’è‰²ç»™å‡ºæ‰€æœ‰çš„å…·ä½“ç­–ç•¥ç±»æ‰€éœ€çš„æ¥å£ã€‚</td></tr><tr><td>å…·ä½“ç­–ç•¥</td><td>åŒ…è£…äº†ç›¸å…³çš„ç®—æ³•æˆ–è¡Œä¸ºã€‚</td></tr></tbody></table><p>ç¤ºæ„ä»£ç </p><pre><code>public class Context {    // ç­–ç•¥å¯¹è±¡    private Strategy strategy;    // æ„é€ å‡½æ•°    public Context(Strategy strategy){        this.strategy = strategy;    }    // ç­–ç•¥æ–¹æ³•    public void contextInterface(){        strategy.strategyInterface();    }}abstract public class Strategy {    // ç­–ç•¥æ–¹æ³•    public abstract void strategyInterface();}public class ConcreteStrategy extends Strategy {    @Override    public void strategyInterface() {        // write your algorithm code here    }}</code></pre><h1 id="ç­–ç•¥æ¨¡å¼ç¤ºä¾‹"><a href="#ç­–ç•¥æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="ç­–ç•¥æ¨¡å¼ç¤ºä¾‹"></a>ç­–ç•¥æ¨¡å¼ç¤ºä¾‹</h1><p>å‡è®¾ç°åœ¨è¦è®¾è®¡ä¸€ä¸ªè´©å–å„ç±»ä¹¦ç±çš„ç”µå­å•†åŠ¡çš„è´­ç‰©è½¦ç³»ç»Ÿã€‚ä¸‹é¢æ˜¯å›¾ä¹¦çš„ä¸‰ç§æŠ˜æ‰£ç®—æ³•ã€‚</p><p>ç®—æ³•ä¸€ï¼šå¯¹å›¾ä¹¦æ²¡æœ‰æŠ˜æ‰£ã€‚<br>ç®—æ³•äºŒï¼šå¯¹å›¾ä¹¦æä¾›ä¸€ä¸ªå›ºå®šå€¼ä¸º5å…ƒçš„æŠ˜æ‰£ã€‚<br>ç®—æ³•ä¸‰ï¼šå¯¹å›¾ä¹¦æä¾›ä¸€ä¸ªå…«æŠ˜çš„æŠ˜æ‰£ã€‚</p><p>ä½¿ç”¨ç­–ç•¥æ¨¡å¼æè¿°çš„è¯ï¼Œè¿™äº›ä¸åŒçš„ç®—æ³•éƒ½æ˜¯ä¸åŒçš„å…·ä½“ç­–ç•¥è§’è‰²ï¼šç”¨ä¸€ä¸ªNoDiscountStrategyå¯¹è±¡æè¿°â€ç®—æ³•ä¸€â€ï¼›ç”¨ä¸€ä¸ªFlatRateStrategyå¯¹è±¡æè¿°â€ç®—æ³•äºŒâ€ï¼›ç”¨ä¸€ä¸ªPercentageStrageå¯¹è±¡æè¿°â€ç®—æ³•ä¸‰â€ã€‚</p><h2 id="æŠ½è±¡ç­–ç•¥"><a href="#æŠ½è±¡ç­–ç•¥" class="headerlink" title="æŠ½è±¡ç­–ç•¥"></a>æŠ½è±¡ç­–ç•¥</h2><pre><code>abstract public class DiscountStrategy {    // ä»·æ ¼    protected int price = 0;    // ç­–ç•¥    protected int copies = 0;    public abstract int calculateDiscount();    public DiscountStrategy(int price, int copies) {        this.price = price;        this.copies = copies;    }}</code></pre><h2 id="å…·ä½“ç­–ç•¥"><a href="#å…·ä½“ç­–ç•¥" class="headerlink" title="å…·ä½“ç­–ç•¥"></a>å…·ä½“ç­–ç•¥</h2><p>ç®—æ³•ä¸€(æ— æŠ˜æ‰£)</p><pre><code>public class NoDiscountStrategy extends DiscountStrategy {    public NoDiscountStrategy(int price, int copies) {        super(price, copies);    }    public int calculateDiscount() {        return copies*price;    }}</code></pre><p>ç®—æ³•äºŒ(ä¼˜æƒ 5å…ƒ)</p><pre><code>public class FlatRateStrategy extends DiscountStrategy {    private int discard = 5;    public FlatRateStrategy(int price, int copies) {        super(price, copies);    }    public void setDiscard() {        this.discard = discard;    }    public int getDiscard() {        return discard;    }    public int calculateDiscount() {        return copies*(price - discard);    }}</code></pre><p>ç®—æ³•ä¸‰(æ‰“8æŠ˜)</p><pre><code>public class PercentageStrategy extends DiscountStrategy {    // æŠ˜æ‰£æ¯”ä¾‹    private float percent = 0.8f;    public PercentageStrategy(int price, int copies) {        super(price, copies);    }    public void setPercent() {        this.percent = percent;    }    public float getPercent() {        return percent;    }    public int calculateDiscount() {        return (int)(copies*price*percent);    }}</code></pre><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><pre><code>public class Client {    public static void main(String[] args) {        // ç¬¬ä¸€ç§ç­–ç•¥        DiscountStrategy strategy = new NoDiscountStrategy(60, 5);        System.out.println(&quot;total(60,5)=&quot;+strategy.calculateDiscount());        strategy = new FlatRateStrategy(80, 5);        System.out.println(&quot;total(80,5)=&quot;+strategy.calculateDiscount());        strategy = new PercentageStrategy(100, 3);        System.out.println(&quot;total(100,4)=&quot;+strategy.calculateDiscount());    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>total(60,5)=300total(80,5)=375total(100,4)=240</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç­–ç•¥æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç­–ç•¥æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç­–ç•¥æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;ç­–ç•¥æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ç­–ç•¥(Strategy)æ¨¡å¼å±äºå¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚å…¶ç”¨æ„æ˜¯é’ˆå¯¹ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="ç­–ç•¥æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼15ä¹‹ ä¸å˜(Immutable)æ¨¡å¼(è¡Œä¸ºæ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F15%E4%B9%8B-%E4%B8%8D%E5%8F%98-Immutable-%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/28/è®¾è®¡æ¨¡å¼15ä¹‹-ä¸å˜-Immutable-æ¨¡å¼-è¡Œä¸ºæ¨¡å¼/</id>
    <published>2014-05-28T03:10:00.000Z</published>
    <updated>2019-04-22T15:23:58.761Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸å˜æ¨¡å¼ç®€ä»‹"><a href="#ä¸å˜æ¨¡å¼ç®€ä»‹" class="headerlink" title="ä¸å˜æ¨¡å¼ç®€ä»‹"></a>ä¸å˜æ¨¡å¼ç®€ä»‹</h1><p>ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€åœ¨å¯¹è±¡è¢«åˆ›å»ºä¹‹åå°±ä¸å†å˜åŒ–ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸å˜(Immutable)æ¨¡å¼ã€‚</p><a id="more"></a><h2 id="ä¸å˜æ¨¡å¼çš„ç»“æ„"><a href="#ä¸å˜æ¨¡å¼çš„ç»“æ„" class="headerlink" title="ä¸å˜æ¨¡å¼çš„ç»“æ„"></a>ä¸å˜æ¨¡å¼çš„ç»“æ„</h2><p>ã€€ã€€ä¸å˜æ¨¡å¼å¯å¢å¼ºå¯¹è±¡çš„å¼ºå£®å‹(robustness)ã€‚ä¸å˜æ¨¡å¼å…è®¸å¤šä¸ªå¯¹è±¡å…±äº«æŸä¸€ä¸ªå¯¹è±¡ï¼Œé™ä½äº†å¯¹è¯¥å¯¹è±¡è¿›è¡Œå¹¶å‘è®¿é—®æ—¶çš„åŒæ­¥åŒ–å¼€é”€ã€‚å¦‚æœéœ€è¦ä¿®æ”¹ä¸€ä¸ªä¸å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éœ€è¦å»ºç«‹ä¸€ä¸ªæ–°çš„åŒç±»å‹å¯¹è±¡ï¼Œå¹¶åœ¨åˆ›å»ºæ—¶å°†è¿™ä¸ªæ–°çš„çŠ¶æ€å­˜å‚¨åœ¨æ–°å¯¹è±¡é‡Œã€‚</p><p>ã€€ã€€ä¸å˜æ¨¡å¼åªæ¶‰åŠåˆ°ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªç±»çš„å†…éƒ¨çŠ¶æ€åˆ›å»ºåï¼Œåœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½ä¸ä¼šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™æ ·çš„ç±»ç§°ä½œä¸å˜ç±»ã€‚è¿™ç§ä½¿ç”¨ä¸å˜ç±»çš„åšæ³•å«åšä¸å˜æ¨¡å¼ã€‚ä¸å˜æ¨¡å¼æœ‰ä¸¤ç§å½¢å¼ï¼šä¸€ç§æ˜¯å¼±ä¸å˜æ¨¡å¼ï¼Œå¦ä¸€ç§æ˜¯å¼ºä¸å˜æ¨¡å¼ã€‚</p><h2 id="å¼±ä¸å˜æ¨¡å¼"><a href="#å¼±ä¸å˜æ¨¡å¼" class="headerlink" title="å¼±ä¸å˜æ¨¡å¼"></a>å¼±ä¸å˜æ¨¡å¼</h2><p>ã€€ã€€ä¸€ä¸ªç±»çš„å®ä¾‹çš„çŠ¶æ€æ˜¯ä¸å¯æ”¹å˜çš„ï¼›ä½†æ˜¯è¿™ä¸ªç±»çš„å­ç±»çš„å®ä¾‹å…·æœ‰å¯èƒ½ä¼šå˜åŒ–çš„çŠ¶æ€ã€‚è¿™æ ·çš„ç±»ç¬¦åˆå¼±ä¸å˜æ¨¡å¼çš„å®šä¹‰ã€‚è¦å®ç°å¼±ä¸å˜æ¨¡å¼ï¼Œä¸€ä¸ªç±»å¿…é¡»æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼š</p><p>(01) æ‰€è€ƒè™‘çš„å¯¹è±¡æ²¡æœ‰ä»»ä½•æ–¹æ³•ä¼šä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ï¼›è¿™æ ·ä¸€æ¥ï¼Œå½“å¯¹è±¡çš„æ„é€ å‡½æ•°å°†å¯¹è±¡çš„çŠ¶æ€åˆå§‹åŒ–ä¹‹åï¼Œå¯¹è±¡çš„çŠ¶æ€ä¾¿ä¸å†æ”¹å˜ã€‚<br>(02) æ‰€æœ‰å±æ€§éƒ½åº”å½“æ˜¯ç§æœ‰çš„ã€‚ä¸è¦å£°æ˜ä»»ä½•çš„å…¬å¼€çš„å±æ€§ï¼Œä»¥é˜²å®¢æˆ·ç«¯å¯¹è±¡ç›´æ¥ä¿®æ”¹ä»»ä½•çš„å†…éƒ¨çŠ¶æ€ã€‚<br>(03) è¿™ä¸ªå¯¹è±¡æ‰€å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡å¦‚ä½•æ˜¯å¯å˜å¯¹è±¡çš„è¯ï¼Œå¿…é¡»è®¾æ³•é™åˆ¶å¤–ç•Œå¯¹è¿™äº›å¯å˜å¯¹è±¡çš„è®¿é—®ï¼Œä»¥é˜²æ­¢å¤–ç•Œä¿®æ”¹è¿™äº›å¯¹è±¡ã€‚å¦‚ä½•å¯èƒ½ï¼Œåº”å½“å°½é‡åœ¨ä¸å˜å¯¹è±¡å†…éƒ¨åˆå§‹åŒ–è¿™äº›è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œè€Œä¸è¦åœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–ï¼Œç„¶åå†ä¼ å…¥åˆ°ä¸å˜å¯¹è±¡å†…éƒ¨æ¥ã€‚å¦‚æœæŸä¸ªå¯å˜å¯¹è±¡å¿…é¡»åœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–ï¼Œç„¶åå†ä¼ å…¥åˆ°ä¸å˜å¯¹è±¡é‡Œçš„è¯ï¼Œå°±åº”å½“è€ƒè™‘åœ¨ä¸å˜å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå¯å˜å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œè€Œä¸è¦ä½¿ç”¨åŸæ¥çš„æ‹·è´ã€‚</p><p>å¼±ä¸å˜æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ï¼š<br>ç¬¬ä¸€, ä¸€ä¸ªå¼±ä¸å˜å¯¹è±¡çš„å­å¯¹è±¡å¯ä»¥æ˜¯å¯å˜å¯¹è±¡ï¼›æ¢è¨€ä¹‹ï¼Œä¸€ä¸ªå¼±ä¸å˜å¯¹è±¡çš„å­å¯¹è±¡å¯èƒ½æ˜¯å¯å˜çš„ã€‚<br>ç¬¬äºŒ, è¿™ä¸ªå¯å˜çš„å­å¯¹è±¡å¯èƒ½å¯ä»¥ä¿®æ”¹çˆ¶å¯¹è±¡çš„çŠ¶æ€ï¼Œä»è€Œå¯èƒ½ä¼šå…è®¸å¤–ç•Œä¿®æ”¹çˆ¶å¯¹è±¡çš„çŠ¶æ€ã€‚</p><h2 id="å¼ºä¸å˜æ¨¡å¼"><a href="#å¼ºä¸å˜æ¨¡å¼" class="headerlink" title="å¼ºä¸å˜æ¨¡å¼"></a>å¼ºä¸å˜æ¨¡å¼</h2><p>ã€€ã€€ä¸€ä¸ªç±»çš„å®ä¾‹ä¸ä¼šæ”¹å˜ï¼ŒåŒæ—¶å®ƒçš„å­ç±»çš„å®ä¾‹ä¹Ÿå…·æœ‰ä¸å¯å˜åŒ–çš„çŠ¶æ€ã€‚è¿™æ ·çš„ç±»ç¬¦åˆå¼ºä¸å˜æ¨¡å¼ã€‚è¦å®ç°å¼ºä¸å˜æ¨¡å¼ï¼Œä¸€ä¸ªç±»å¿…é¡»é¦–å…ˆæ»¡è¶³å¼±ä¸å˜æ¨¡å¼æ‰€è¦æ±‚çš„æ‰€æœ‰æ¡ä»¶ï¼Œå¹¶ä¸”è¿˜æœ‰æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€ï¼š<br>(01) æ‰€è€ƒè™‘çš„ç±»æ‰€æœ‰çš„æ–¹æ³•éƒ½åº”å½“æ˜¯finalï¼Œè¿™æ ·è¿™ä¸ªç±»çš„å­ç±»ä¸èƒ½å¤Ÿç½®æ¢æ‰æ­¤ç±»çš„æ–¹æ³•ã€‚<br>(02) è¿™ä¸ªç±»æœ¬èº«å°±æ˜¯finalçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±ä¸å¯èƒ½ä¼šæœ‰å­ç±»ï¼Œä»è€Œä¹Ÿå°±ä¸å¯èƒ½æœ‰è¢«å­ç±»ä¿®æ”¹çš„é—®é¢˜ã€‚</p><h1 id="ä¸å˜æ¨¡å¼ç¤ºä¾‹"><a href="#ä¸å˜æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="ä¸å˜æ¨¡å¼ç¤ºä¾‹"></a>ä¸å˜æ¨¡å¼ç¤ºä¾‹</h1><p>é€šè¿‡ä»¥ä¸‹å‡ ä¸ªç¤ºä¾‹æ¥çœ‹çœ‹â€å¼±ä¸å˜æ¨¡å¼â€å’Œâ€å¼ºä¸å˜æ¨¡å¼â€ã€‚</p><h2 id="å¯å˜æ¨¡å¼"><a href="#å¯å˜æ¨¡å¼" class="headerlink" title="å¯å˜æ¨¡å¼"></a>å¯å˜æ¨¡å¼</h2><pre><code>class Person {    private String name;    private int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public void setName(String name) { this.name = name; }    public String getName() { return name; }    public void setAge(int age) { this.age = age; }    public int getAge() { return age; }    public String toString() {        return &quot;name:&quot;+name+&quot;, age:&quot;+age;    }}// Complexä¸æ˜¯&quot;å¼±ä¸å˜ç±»&quot;ã€‚// å› ä¸ºå®ƒåŒ…å«äº†å¯å˜ç±»å¯¹è±¡personï¼Œå¹¶ä¸”personæ˜¯åœ¨å¤–éƒ¨åˆå§‹åŒ–çš„ã€‚class Complex {    private Person person;    private int id;    public Complex (Person person, int id) {        this.person = person;        this.id = id;    }    public int getId() { return id; }    public Person getPerson() { return person; }    public String toString() {        return &quot;id:&quot;+id+&quot;, person(&quot;+person+&quot;)&quot;;    }}public class MutableDemo {    public static void main(String[] args) {        // æ–°å»ºComplexå¯¹è±¡ï¼Œåœ¨&quot;å¤–éƒ¨(å³ï¼ŒéComplexå†…éƒ¨)&quot;åˆå§‹åŒ–personã€‚        Person person = new Person(&quot;å¼ ä¸‰&quot;, 18);        Complex com = new Complex(person, 1);        System.out.println(com);        // ä¿®æ”¹personçš„åå­—ä¸º&quot;æå››&quot;ï¼Œå¹´é¾„ä¸º20        person.setName(&quot;æå››&quot;);        person.setAge(20);        System.out.println(com);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>id:1, person(name:å¼ ä¸‰, age:18)id:1, person(name:æå››, age:20)</code></pre><p>ç»“æœè¯´æ˜ï¼š<br>MutableDemoä¸­çš„Complexç±»æ»¡è¶³â€å¼±ä¸å˜æ¨¡å¼â€çš„å‰2ä¸ªæ¡ä»¶ï¼š<br>(01) Complexä¸­æ²¡æœ‰æ–¹æ³•å¯ä»¥ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ã€‚ComplexåŒ…å«äº†personå’Œidä¸¤ä¸ªå±æ€§å€¼ï¼Œä½†æ˜¯æ²¡æœ‰æ–¹æ³•ä¿®æ”¹è¿™ä¸¤ä¸ªæ ‘å½¢ã€‚<br>(02) Complexä¸­çš„personå’Œidå±æ€§éƒ½æ˜¯ç§æœ‰çš„ã€‚<br>ã€€ã€€ä½†æ˜¯ï¼ŒComplexä¸æ»¡è¶³â€è‹¥ä¸å˜æ¨¡å¼â€çš„ç¬¬3ä¸ªæ¡ä»¶ã€‚Complexå¼•ç”¨äº†â€å¯å˜ç±»å¯¹è±¡personâ€ï¼Œpersonæ˜¯Personç±»çš„å¯¹è±¡ï¼Œè€ŒPersonæ˜¯ä¸€ä¸ªå¯å˜ç±»ï¼<br>ã€€ã€€æ‰€ä»¥ï¼Œåœ¨MutableDemoä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†Complexçš„personå€¼ä¸º(â€œå¼ ä¸‰â€,18)ä¹‹åï¼›åœ¨åé¢ä¿®æ”¹äº†personçš„åå­—ä¸ºâ€æå››â€,å¹´é¾„ä¸º18ã€‚Complexä¸­çš„personçš„å€¼ä¹Ÿä¼šç›¸åº”çš„æ”¹å˜ï¼æ‰€ä»¥ï¼ŒComplexæ˜¯â€å¯å˜ç±»â€ã€‚</p><p>ã€€ã€€è‹¥æƒ³å°†Complexä¿®æ”¹ä¸ºâ€ä¸å˜ç±»â€ï¼Œéœ€è¦å°†Complexä¿®æ”¹çš„æ»¡è¶³â€è‹¥ä¸å˜æ¨¡å¼â€çš„ç¬¬3ä¸ªæ¡ä»¶ã€‚æ–¹æ³•æ˜¯ï¼Œåœ¨Complexä¸­åˆå§‹åŒ–personçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªpersonçš„æ‹·è´å³å¯ã€‚è¯¦ç»†ä»£ç è¯·çœ‹â€2. å¼±ä¸å˜æ¨¡å¼â€ã€‚</p><h2 id="å¼±ä¸å˜æ¨¡å¼-1"><a href="#å¼±ä¸å˜æ¨¡å¼-1" class="headerlink" title="å¼±ä¸å˜æ¨¡å¼"></a>å¼±ä¸å˜æ¨¡å¼</h2><pre><code>class Person {    private String name;    private int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public void setName(String name) { this.name = name; }    public String getName() { return name; }    public void setAge(int age) { this.age = age; }    public int getAge() { return age; }    public String toString() {        return &quot;name:&quot;+name+&quot;, age:&quot;+age;    }}// Complexæ˜¯&quot;å¼±ä¸å˜ç±»&quot;ã€‚// å®ƒè™½ç„¶åŒ…å«äº†å¯å˜çš„å¤–éƒ¨å¯¹è±¡personï¼Œä½†æ˜¯Complexå†…éƒ¨çš„personæ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚å› ä¸ºå®ƒä¿å­˜çš„æ˜¯personçš„æ‹·è´ã€‚class Complex {    private Person person;    private int id;    public Complex (Person person, int id) {        // æ–°å»ºä¸€ä¸ªpersonçš„æ‹·è´ã€‚        this.person = new Person(person.getName(), person.getAge());        this.id = id;    }    public int getId() { return id; }    public Person getPerson() { return person; }    public String toString() {        return &quot;id:&quot;+id+&quot;, person(&quot;+person+&quot;)&quot;;    }}public class WeakImmutable {    public static void main(String[] args) {        // æ–°å»ºComplexå¯¹è±¡ã€‚        // idæ˜¯1, personçš„åå­—æ˜¯&quot;å¼ ä¸‰&quot;ï¼Œå¹´é¾„æ˜¯18        Person person = new Person(&quot;å¼ ä¸‰&quot;, 18);        Complex com = new Complex(person, 1);        System.out.println(com);        // ä¿®æ”¹personçš„åå­—ä¸º&quot;æå››&quot;ï¼Œå¹´é¾„ä¸º20        person.setName(&quot;æå››&quot;);        person.setAge(20);        System.out.println(com);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>id:1, person(name:å¼ ä¸‰, age:18)id:1, person(name:å¼ ä¸‰, age:18)</code></pre><p>ç»“æœè¯´æ˜ï¼šWeakImmutableç›¸æ¯”MutableDemoï¼Œåªå¯¹Complexçš„æ„é€ å‡½æ•°è¿›è¡Œäº†ä¿®æ”¹ã€‚ComplexåŒæ—¶æ»¡è¶³â€å¼±ä¸å˜æ¨¡å¼â€çš„3ä¸ªæ¡ä»¶ï¼Œå› æ­¤ï¼Œå®ƒå°±æ˜¯ä¸ªä¸å˜æ¨¡å¼ã€‚</p><h2 id="å¼ºä¸å˜æ¨¡å¼-1"><a href="#å¼ºä¸å˜æ¨¡å¼-1" class="headerlink" title="å¼ºä¸å˜æ¨¡å¼"></a>å¼ºä¸å˜æ¨¡å¼</h2><pre><code>class Person {    private String name;    private int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public void setName(String name) { this.name = name; }    public String getName() { return name; }    public void setAge(int age) { this.age = age; }    public int getAge() { return age; }    public String toString() {        return &quot;name:&quot;+name+&quot;, age:&quot;+age;    }}// Complexæ˜¯&quot;å¼ºä¸å˜ç±»&quot;ã€‚final class Complex {    private final Person person;    private final int id;    public Complex (Person person, int id) {        // æ–°å»ºä¸€ä¸ªpersonçš„æ‹·è´ã€‚        this.person = new Person(person.getName(), person.getAge());        this.id = id;    }    public final int getId() { return id; }    public final Person getPerson() { return person; }    public String toString() {        return &quot;id:&quot;+id+&quot;, person(&quot;+person+&quot;)&quot;;    }}public class StrongImmutable {    public static void main(String[] args) {        // æ–°å»ºComplexå¯¹è±¡ã€‚        // idæ˜¯1, personçš„åå­—æ˜¯&quot;å¼ ä¸‰&quot;ï¼Œå¹´é¾„æ˜¯18        Person person = new Person(&quot;å¼ ä¸‰&quot;, 18);        Complex com = new Complex(person, 1);        System.out.println(com);        // ä¿®æ”¹personçš„åå­—ä¸º&quot;æå››&quot;ï¼Œå¹´é¾„ä¸º20        person.setName(&quot;æå››&quot;);        person.setAge(20);        System.out.println(com);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>id:1, person(name:å¼ ä¸‰, age:18)id:1, person(name:å¼ ä¸‰, age:18)</code></pre><p>ç»“æœè¯´æ˜ï¼š<br>StrongImmutableä¸­çš„Complexæ»¡è¶³â€å¼ºä¸å˜æ¨¡å¼â€çš„è¦æ±‚ã€‚StrongImmutableç›¸æ¯”WeakImmutableï¼Œè¿›è¡Œäº†ä¸¤ä¸ªä¿®æ”¹ï¼š<br>ç¬¬ä¸€ï¼Œå°†Complexä¸­çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¿®æ”¹ä¸ºfinalç±»å‹ã€‚<br>ç¬¬äºŒï¼Œå°†Complexç±»æœ¬èº«ä¿®æ”¹ä¸ºfinalç±»å‹ã€‚</p><h1 id="ä¸å˜æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸å˜æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸å˜æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"></a>ä¸å˜æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h1><p>ä¸å˜æ¨¡å¼æœ‰å¾ˆæ˜æ˜¾çš„ä¼˜ç‚¹ï¼š<br>(1) å› ä¸ºä¸èƒ½ä¿®æ”¹ä¸€ä¸ªä¸å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥é¿å…ç”±æ­¤å¼•èµ·çš„ä¸å¿…è¦çš„ç¨‹åºé”™è¯¯ï¼›æ¢è¨€ä¹‹ï¼Œä¸€ä¸ªä¸å˜çš„å¯¹è±¡è¦æ¯”å¯å˜çš„å¯¹è±¡æ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚<br>(2) å› ä¸ºæ²¡æœ‰ä»»ä½•ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿä¿®æ”¹ä¸å˜å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä¸€ä¸ªä¸å˜å¯¹è±¡è‡ªåŠ¨å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ ·å°±å¯ä»¥çœæ‰å¤„ç†åŒæ­¥åŒ–çš„å¼€é”€ã€‚ä¸€ä¸ªä¸å˜å¯¹è±¡å¯ä»¥è‡ªç”±åœ°è¢«ä¸åŒçš„å®¢æˆ·ç«¯å…±äº«ã€‚</p><p>ä¸å˜æ¨¡å¼çš„ç¼ºç‚¹ï¼š<br>ä¸å˜æ¨¡å¼å”¯ä¸€çš„ç¼ºç‚¹æ˜¯ï¼šä¸€æ—¦éœ€è¦ä¿®æ”¹ä¸€ä¸ªä¸å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œå°±åªå¥½åˆ›å»ºä¸€ä¸ªæ–°çš„åŒç±»å¯¹è±¡ã€‚åœ¨éœ€è¦é¢‘ç¹ä¿®æ”¹ä¸å˜å¯¹è±¡çš„ç¯å¢ƒé‡Œï¼Œä¼šæœ‰å¤§é‡çš„ä¸å˜å¯¹è±¡ä½œä¸ºä¸­é—´ç»“æœè¢«åˆ›å»ºå‡ºæ¥ï¼Œå†è¢«JAVAåƒåœ¾æ”¶é›†å™¨æ”¶é›†èµ°ã€‚è¿™æ˜¯ä¸€ç§èµ„æºä¸Šçš„æµªè´¹ã€‚</p><p>åœ¨è®¾è®¡ä»»ä½•ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œåº”å½“æ…é‡è€ƒè™‘å…¶çŠ¶æ€æ˜¯å¦æœ‰éœ€è¦å˜åŒ–çš„å¯èƒ½æ€§ã€‚é™¤éå…¶çŠ¶æ€æœ‰å˜åŒ–çš„å¿…è¦ï¼Œä¸ç„¶åº”å½“å°†å®ƒè®¾è®¡æˆä¸å˜ç±»ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸å˜æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä¸å˜æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸å˜æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;ä¸å˜æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€åœ¨å¯¹è±¡è¢«åˆ›å»ºä¹‹åå°±ä¸å†å˜åŒ–ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸å˜(Immutable)æ¨¡å¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="ä¸å˜æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E4%B8%8D%E5%8F%98%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼14ä¹‹ æ¡¥æ¢(Bridge)æ¨¡å¼(ç»“æ„æ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/27/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F14%E4%B9%8B-%E6%A1%A5%E6%A2%81-Bridge-%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/27/è®¾è®¡æ¨¡å¼14ä¹‹-æ¡¥æ¢-Bridge-æ¨¡å¼-ç»“æ„æ¨¡å¼/</id>
    <published>2014-05-27T03:09:42.000Z</published>
    <updated>2019-04-22T15:23:58.669Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¡¥æ¢æ¨¡å¼ç®€ä»‹"><a href="#æ¡¥æ¢æ¨¡å¼ç®€ä»‹" class="headerlink" title="æ¡¥æ¢æ¨¡å¼ç®€ä»‹"></a>æ¡¥æ¢æ¨¡å¼ç®€ä»‹</h1><p>ã€€ã€€æ¡¥æ¢æ¨¡å¼(Bridge)ï¼Œåˆç§°ä¸ºæŸ„ä½“(Handle and Body)æ¨¡å¼æˆ–æ¥å£(Interface)æ¨¡å¼ã€‚å®ƒå±äºå¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå…¶ç”¨æ„æ˜¯â€œå°†æŠ½è±¡åŒ–(Abstraction)ä¸å®ç°åŒ–(Implementation)è„±è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–â€ã€‚</p><p>ã€€ã€€è¿™å¥è¯æœ‰ä¸‰ä¸ªå…³é”®è¯ï¼š<strong>â€œæŠ½è±¡åŒ–â€ã€â€å®ç°åŒ–â€å’Œâ€è„±è€¦â€</strong>ã€‚</p><a id="more"></a><p>ã€€ã€€â€¢ <strong>æŠ½è±¡åŒ–</strong></p><p>ã€€ã€€å­˜åœ¨äºå¤šä¸ªå®ä½“ä¸­çš„å…±åŒçš„æ¦‚å¿µè”ç³»ï¼Œå°±æ˜¯æŠ½è±¡è¯ã€‚ä¾‹å¦‚ï¼Œè‹¹æœã€è‘¡è„ã€è‰è“ï¼Œå®ƒä»¬çš„å…±åŒç‰¹å¾å°±æ˜¯æ°´æœï¼Œå› æ­¤ï¼Œæ°´æœæ˜¯å®ƒä»¬çš„æŠ½è±¡åŒ–å­˜åœ¨ï¼›åœ†å½¢ã€æ­£æ–¹å½¢ã€ä¸‰è§’å½¢ï¼Œå®ƒä»¬çš„å…±åŒç‰¹å¾å°±æ˜¯å½¢çŠ¶ï¼Œå› æ­¤ï¼Œå½¢çŠ¶å°±æ˜¯å®ƒä»¬çš„æŠ½è±¡è¯ã€‚</p><p>ã€€ã€€é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ç»„å¯¹è±¡å¦‚æœå…·æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥é€šè¿‡ä¸€ä¸ªå…±åŒçš„ç±»æ¥æè¿°ã€‚å¦‚æœä¸€äº›ç±»å…·æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œå¾€å¾€å¯ä»¥é€šè¿‡ä¸€ä¸ªå…±åŒçš„æŠ½è±¡ç±»æ¥æè¿°ã€‚</p><p>ã€€ã€€â€¢ <strong>å®ç°åŒ–</strong></p><p>ã€€ã€€æŠ½è±¡åŒ–ç»™å‡ºçš„å…·ä½“å®ç°ï¼Œå°±æ˜¯å®ç°åŒ–ã€‚</p><p>ã€€ã€€ä¸€ä¸ªç±»çš„å®ä¾‹å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹åŒ–ï¼Œä¸€ä¸ªå…·ä½“å­ç±»æ˜¯å®ƒçš„æŠ½è±¡è¶…ç±»çš„å®ä¾‹åŒ–ã€‚</p><p>ã€€ã€€â€¢ <strong>è„±è€¦</strong></p><p>ã€€ã€€æ‰€è°“è€¦åˆï¼Œå°±æ˜¯ä¸¤ä¸ªå®ä½“çš„è¡Œä¸ºçš„æŸç§å¼ºå…³è”ã€‚è€Œå°†å®ƒä»¬çš„å¼ºå…³è”å»æ‰ï¼Œå°±æ˜¯è€¦åˆçš„è§£è„±ï¼Œæˆ–ç§°è„±è€¦ã€‚åœ¨è¿™é‡Œï¼Œè„±è€¦æ˜¯æŒ‡å°†æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œæˆ–è€…è¯´æ˜¯å°†å®ƒä»¬ä¹‹é—´çš„å¼ºå…³è”æ”¹æ¢æˆå¼±å…³è”ã€‚</p><p>ã€€ã€€æ‰€è°“å¼ºå…³è”ï¼Œå°±æ˜¯åœ¨ç¼–è¯‘æ—¶æœŸå·²ç»ç¡®å®šçš„ï¼Œæ— æ³•åœ¨è¿è¡Œæ—¶æœŸåŠ¨æ€æ”¹å˜çš„å…³è”ï¼›æ‰€è°“å¼±å…³è”ï¼Œå°±æ˜¯å¯ä»¥åŠ¨æ€åœ°ç¡®å®šå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶æœŸåŠ¨æ€åœ°æ”¹å˜çš„å…³è”ã€‚æ˜¾ç„¶ï¼Œåœ¨Javaè¯­è¨€ä¸­ï¼Œç»§æ‰¿å…³ç³»æ˜¯å¼ºå…³è”ï¼Œè€Œèšåˆå…³ç³»æ˜¯å¼±å…³è”ã€‚</p><p>ã€€ã€€å°†ä¸¤ä¸ªè§’è‰²ä¹‹é—´çš„ç»§æ‰¿å…³ç³»æ”¹ä¸ºèšåˆå…³ç³»ï¼Œå°±æ˜¯å°†å®ƒä»¬ä¹‹é—´çš„å¼ºå…³è”æ”¹æ¢æˆä¸ºå¼±å…³è”ã€‚å› æ­¤ï¼Œæ¡¥æ¢æ¨¡å¼ä¸­çš„æ‰€è°“è„±è€¦ï¼Œå°±æ˜¯æŒ‡åœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´ä½¿ç”¨èšåˆå…³ç³»è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä»è€Œä½¿ä¸¤è€…å¯ä»¥ç›¸å¯¹ç‹¬ç«‹åœ°å˜åŒ–ã€‚è¿™å°±æ˜¯æ¡¥æ¢æ¨¡å¼çš„ç”¨æ„ã€‚</p><p>æ¡¥æ¢æ¨¡å¼çš„UMLç±»å›¾<br><img src="/images/media/pattern14_01.jpg" alt="pattern14_01"></p><p>ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ¡¥æ¥æ¨¡å¼å«æœ‰ä¸¤ä¸ªç­‰çº§ç»“æ„ï¼š<br>(01) ç”±æŠ½è±¡åŒ–è§’è‰²å’Œä¿®æ­£æŠ½è±¡åŒ–è§’è‰²ç»„æˆçš„æŠ½è±¡åŒ–ç­‰çº§ç»“æ„ã€‚<br>(02) ç”±å®ç°åŒ–è§’è‰²å’Œä¸¤ä¸ªå…·ä½“å®ç°åŒ–è§’è‰²æ‰€ç»„æˆçš„å®ç°åŒ–ç­‰çº§ç»“æ„ã€‚</p><p>æ¡¥æ¢æ¨¡å¼åŒ…å«å››ç§è§’è‰²ï¼š <strong>æŠ½è±¡åŒ–(Abstraction)ï¼Œä¿®æ­£æŠ½è±¡åŒ–(RefinedAbstraction)ï¼Œå®ç°åŒ–(Implementor)ï¼Œå…·ä½“å®ç°åŒ–(ConcreteImplementor)</strong>ã€‚<br>â€¢ æŠ½è±¡åŒ–: æŠ½è±¡åŒ–ç»™å‡ºçš„å®šä¹‰ï¼Œå¹¶ä¿å­˜ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ã€‚<br>â€¢ ä¿®æ­£æŠ½è±¡åŒ–: æ‰©å±•æŠ½è±¡åŒ–è§’è‰²ï¼Œæ”¹å˜å’Œä¿®æ­£çˆ¶ç±»å¯¹æŠ½è±¡åŒ–çš„å®šä¹‰ã€‚<br>â€¢ å®ç°åŒ–: è¿™ä¸ªè§’è‰²ç»™å‡ºå®ç°åŒ–è§’è‰²çš„æ¥å£ï¼Œä½†ä¸ç»™å‡ºå…·ä½“çš„å®ç°ã€‚å¿…é¡»æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™ä¸ªæ¥å£ä¸ä¸€å®šå’ŒæŠ½è±¡åŒ–è§’è‰²çš„æ¥å£å®šä¹‰ç›¸åŒï¼Œå®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªæ¥å£å¯ä»¥éå¸¸ä¸ä¸€æ ·ã€‚å®ç°åŒ–è§’è‰²åº”å½“åªç»™å‡ºåº•å±‚æ“ä½œï¼Œè€ŒæŠ½è±¡åŒ–è§’è‰²åº”å½“åªç»™å‡ºåŸºäºåº•å±‚æ“ä½œçš„æ›´é«˜ä¸€å±‚çš„æ“ä½œã€‚<br>â€¢ å…·ä½“å®ç°åŒ–: è¿™ä¸ªè§’è‰²ç»™å‡ºå®ç°åŒ–è§’è‰²æ¥å£çš„å…·ä½“å®ç°ã€‚</p><p>ã€€ã€€å¯¹è±¡æ˜¯å¯¹è¡Œä¸ºçš„å°è£…ï¼Œè€Œè¡Œä¸ºæ˜¯ç”±æ–¹æ³•å®ç°çš„ã€‚åœ¨è¿™ä¸ªç¤ºæ„æ€§ç³»ç»Ÿé‡Œï¼ŒæŠ½è±¡åŒ–ç­‰çº§ç»“æ„ä¸­çš„ç±»å°è£…äº†operation()æ–¹æ³•ï¼›è€Œå®ç°åŒ–ç­‰çº§ç»“æ„ä¸­çš„ç±»å°è£…çš„æ˜¯operationImpl()æ–¹æ³•ã€‚å½“ç„¶ï¼Œåœ¨å®é™…çš„ç³»ç»Ÿä¸­å¾€å¾€ä¼šæœ‰å¤šäºä¸€ä¸ªçš„æ–¹æ³•ã€‚</p><p>ã€€ã€€æŠ½è±¡åŒ–ç­‰çº§ç»“æ„ä¸­çš„æ–¹æ³•é€šè¿‡å‘å¯¹åº”çš„å®ç°åŒ–å¯¹è±¡çš„å§”æ´¾å®ç°è‡ªå·±çš„åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€æŠ½è±¡åŒ–è§’è‰²å¯ä»¥é€šè¿‡å‘ä¸åŒçš„å®ç°åŒ–å¯¹è±¡å§”æ´¾ï¼Œæ¥è¾¾åˆ°åŠ¨æ€åœ°è½¬æ¢è‡ªå·±çš„åŠŸèƒ½çš„ç›®çš„ã€‚</p><h2 id="ç¤ºæ„ä»£ç "><a href="#ç¤ºæ„ä»£ç " class="headerlink" title="ç¤ºæ„ä»£ç "></a>ç¤ºæ„ä»£ç </h2><p>æŠ½è±¡åŒ–</p><pre><code>public abstract class Abstraction {    protected Implementor impl;    public Abstraction(Implementor impl){        this.impl = impl;    }    // å•†ä¸šæ–¹æ³•    public void operation(){        impl.operationImpl();    }}</code></pre><p>ä¿®æ­£æŠ½è±¡åŒ–è§’è‰²</p><pre><code>public class RefinedAbstraction extends Abstraction {    public RefinedAbstraction(Implementor impl) {        super(impl);    }}</code></pre><p>å®ç°åŒ–è§’è‰²</p><pre><code>public abstract class Implementor {    // æ–¹æ³•çš„å®ç°åŒ–å£°æ˜    public abstract void operationImpl();}</code></pre><p>å…·ä½“å®ç°åŒ–è§’è‰²</p><pre><code>public class ConcreteImplementorA extends Implementor {    // æ–¹æ³•çš„å®ç°åŒ–å®ç°    @Override    public void operationImpl() {        // something you want to do    }}public class ConcreteImplementorB extends Implementor {    // æ–¹æ³•çš„å®ç°åŒ–å®ç°    @Override    public void operationImpl() {        // something you want to do    }}</code></pre><h1 id="æ¡¥æ¢æ¨¡å¼ç¤ºä¾‹"><a href="#æ¡¥æ¢æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="æ¡¥æ¢æ¨¡å¼ç¤ºä¾‹"></a>æ¡¥æ¢æ¨¡å¼ç¤ºä¾‹</h1><p>ã€€ã€€<strong>é—®é¢˜</strong></p><p>ã€€ã€€ç©ºä¸­å·´å£«(Airbus)ã€æ³¢éŸ³(Boeing)å’Œéº¦é“(MD)éƒ½æ˜¯é£æœºåˆ¶é€ å•†ï¼Œå®ƒä»¬éƒ½ç”Ÿæˆè½½å®¢é£æœº(PassengerPlane)å’Œè½½è´§é£æœº(CargoPlane)ã€‚ç°åœ¨éœ€è¦è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œæè¿°è¿™äº›é£æœºåˆ¶é€ å•†ä»¥åŠå®ƒä»¬æ‰€åˆ¶é€ çš„é£æœºç§ç±»ã€‚</p><p>ã€€ã€€<strong>è®¾è®¡æ–¹æ¡ˆä¸€(ä¸ä½¿ç”¨æ¡¥æ¢æ¨¡å¼)</strong></p><p>ã€€ã€€ç³»ç»Ÿæ˜¯å…³äºé£æœºçš„ï¼Œå› æ­¤å¯ä»¥è®¾è®¡ä¸€ä¸ªæ€»çš„é£æœºæ¥å£ï¼Œå«åšAirplaneã€‚å…¶å®ƒæ‰€æœ‰çš„é£æœºéƒ½æ˜¯è¿™ä¸ªæ€»æ¥å£çš„å­—æ¥å£æˆ–è€…å…·ä½“å®ç°ã€‚</p><p>ã€€ã€€ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ¡ˆçš„è®¾è®¡å›¾ï¼Œå¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å¤ªé«˜æ˜çš„è®¾è®¡ï¼Œå¯¼è‡´äº†ç†ä¸æ¸…çš„å…³ç³»ã€‚<br><img src="/images/media/pattern14_02.jpg" alt="pattern14_02"></p><p>ã€€ã€€åœ¨è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆé‡Œé¢ï¼Œå‡ºç°äº†ä¸¤ä¸ªå­æ¥å£ï¼Œåˆ†åˆ«ä»£è¡¨å®¢æˆ·å’Œè´§æœºã€‚æ‰€æœ‰çš„å…·ä½“é£æœºåˆè¦ç»§æ‰¿è‡ªAirbusï¼ŒBoeingå’ŒMDç­‰è¶…ç±»ã€‚è¿™æ ·ä¸€ç±»ï¼Œæ¯ä¸ªå…·ä½“é£æœºéƒ½å¸¦æœ‰ä¸¤ä¸ªè¶…ç±»ï¼šé£æœºåˆ¶é€ å•†ç±»å‹ï¼Œå®¢ã€è´§æœºç±»å‹ã€‚</p><p>ã€€ã€€<strong>è®¾è®¡æ–¹æ¡ˆäºŒ(ä½¿ç”¨æ¡¥æ¢æ¨¡å¼)</strong></p><p>ã€€ã€€ä½¿ç”¨æ¡¥æ¢æ¨¡å¼çš„å…³é”®åœ¨äºå‡†ç¡®çš„æ‰¾å‡ºè¿™ä¸ªç³»ç»Ÿçš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ã€‚ä»ç³»ç»Ÿæ‰€é¢å¯¹çš„é—®é¢˜ä¸éš¾çœ‹å‡ºï¼Œä»£è¡¨é£æœºçš„æŠ½è±¡åŒ–æ˜¯å®ƒçš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯â€å®¢æˆ·â€æˆ–è€…â€è´§æœºâ€ï¼›è€Œä»£è¡¨é£æœºçš„å®ç°åŒ–çš„åˆ™æ˜¯é£æœºçš„åˆ¶é€ å•†ã€‚</p><p>ä½¿ç”¨æ¡¥æ¢æ¨¡å¼ï¼Œå¯¹åº”çš„UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern14_03.jpg" alt="pattern14_03"></p><h2 id="æŠ½è±¡åŒ–ç±»"><a href="#æŠ½è±¡åŒ–ç±»" class="headerlink" title="æŠ½è±¡åŒ–ç±»"></a>æŠ½è±¡åŒ–ç±»</h2><pre><code>abstract public class Airplane {    // é£æœºåˆ¶é€ å•†    protected AirplaneMaker maker;    // æŒ‡å®šé£æœºåˆ¶é€ å•†    public Airplane(AirplaneMaker maker) {        this.maker = maker;    }    public void fly() {        // è°ƒç”¨AirplaneMakerçš„produce()æ–¹æ³•        maker.produce();    }}</code></pre><h2 id="ä¿®æ­£æŠ½è±¡åŒ–"><a href="#ä¿®æ­£æŠ½è±¡åŒ–" class="headerlink" title="ä¿®æ­£æŠ½è±¡åŒ–"></a>ä¿®æ­£æŠ½è±¡åŒ–</h2><p>PassengerPlaneä»£ç </p><pre><code>public class PassengerPlane extends Airplane {    public PassengerPlane(AirplaneMaker maker) {        super(maker);    }    public void fly() {        super.fly();        System.out.println(&quot;PassengerPlane fly.&quot;);    }}</code></pre><p>CargoPlaneä»£ç </p><pre><code>public class CargoPlane extends Airplane {    public CargoPlane(AirplaneMaker maker) {        super(maker);    }    public void fly() {        super.fly();        System.out.println(&quot;CargoPlane fly.&quot;);    }}</code></pre><h2 id="å®ç°åŒ–"><a href="#å®ç°åŒ–" class="headerlink" title="å®ç°åŒ–"></a>å®ç°åŒ–</h2><p>AirplaneMakerä»£ç </p><pre><code>abstract public class AirplaneMaker {    // ç”Ÿäº§é£æœº    public abstract void produce() ;}</code></pre><h2 id="å…·ä½“å®ç°åŒ–"><a href="#å…·ä½“å®ç°åŒ–" class="headerlink" title="å…·ä½“å®ç°åŒ–"></a>å…·ä½“å®ç°åŒ–</h2><p>Airbusä»£ç </p><pre><code>public class Airbus extends AirplaneMaker {    public void produce() {        System.out.println(&quot;Airbus produced.&quot;);    }}</code></pre><p>Boeingä»£ç </p><pre><code>public class Boeing extends AirplaneMaker {    public void produce() {        System.out.println(&quot;Boeing produced.&quot;);    }}</code></pre><p>MDä»£ç </p><pre><code>public class MD extends AirplaneMaker {    public void produce() {        System.out.println(&quot;MD produced.&quot;);    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><pre><code>public class Client {    public static void main(String[] args) {        // &quot;é£æœºåˆ¶é€ å•†&quot;ä¸ºAirbus        AirplaneMaker maker = new Airbus();        // &quot;é£æœºç±»å‹&quot;ä¸ºPassengerPlane        Airplane plane = new PassengerPlane(maker);        // é£æœºé£è¡Œ        plane.fly();        // &quot;é£æœºåˆ¶é€ å•†&quot;ä¸ºMD        maker = new MD();        // &quot;é£æœºç±»å‹&quot;ä¸ºCargoPlane        plane = new CargoPlane(maker);        // é£æœºé£è¡Œ        plane.fly();    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Airbus produced.PassengerPlane fly.MD produced.CargoPlane fly.</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ¡¥æ¢æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#æ¡¥æ¢æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;æ¡¥æ¢æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;æ¡¥æ¢æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ã€€ã€€æ¡¥æ¢æ¨¡å¼(Bridge)ï¼Œåˆç§°ä¸ºæŸ„ä½“(Handle and Body)æ¨¡å¼æˆ–æ¥å£(Interface)æ¨¡å¼ã€‚å®ƒå±äºå¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå…¶ç”¨æ„æ˜¯â€œå°†æŠ½è±¡åŒ–(Abstraction)ä¸å®ç°åŒ–(Implementation)è„±è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–â€ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™å¥è¯æœ‰ä¸‰ä¸ªå…³é”®è¯ï¼š&lt;strong&gt;â€œæŠ½è±¡åŒ–â€ã€â€å®ç°åŒ–â€å’Œâ€è„±è€¦â€&lt;/strong&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="æ¡¥æ¢æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E6%A1%A5%E6%A2%81%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼13ä¹‹ é—¨é¢(Facade)æ¨¡å¼(ç»“æ„æ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F13%E4%B9%8B-%E9%97%A8%E9%9D%A2-Facade-%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/26/è®¾è®¡æ¨¡å¼13ä¹‹-é—¨é¢-Facade-æ¨¡å¼-ç»“æ„æ¨¡å¼/</id>
    <published>2014-05-26T03:09:23.000Z</published>
    <updated>2019-04-22T15:23:58.617Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—¨é¢æ¨¡å¼ç®€ä»‹"><a href="#é—¨é¢æ¨¡å¼ç®€ä»‹" class="headerlink" title="é—¨é¢æ¨¡å¼ç®€ä»‹"></a>é—¨é¢æ¨¡å¼ç®€ä»‹</h1><p>é—¨é¢æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„é—¨é¢å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œ<br>ç—…äººå»åŒ»é™¢çœ‹ç—…ï¼Œå¦‚æœæŠŠåŒ»é™¢ä½œä¸ºä¸€ä¸ªå­ç³»ç»Ÿï¼ŒæŒ‰ç…§éƒ¨é—¨èŒèƒ½ï¼Œè¿™ä¸ªç³»ç»Ÿå¯ä»¥åˆ’åˆ†ä¸ºæŒ‚å·ã€é—¨è¯Šã€åˆ’ä»·ã€åŒ–éªŒã€æ”¶è´¹ã€å–è¯ç­‰ã€‚çœ‹ç—…çš„ç—…äººè¦ä¸è¿™äº›éƒ¨é—¨æ‰“äº¤é“ï¼Œå°±å¦‚åŒä¸€ä¸ªå­ç³»ç»Ÿçš„å®¢æˆ·ç«¯ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„å„ä¸ªç±»æ‰“äº¤é“ä¸€æ ·ï¼Œä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼šé¦–å…ˆç—…äººå¿…é¡»å…ˆæŒ‚å·ï¼Œç„¶åé—¨è¯Šï¼›å¦‚æœåŒ»ç”Ÿè¦æ±‚åŒ–éªŒï¼Œç—…äººå¿…é¡»é¦–å…ˆåˆ’ä»·ï¼Œç„¶åç¼´è´¹ï¼Œæ‰å¯ä»¥åˆ°åŒ–éªŒéƒ¨é—¨åšåŒ–éªŒï¼›åŒ–éªŒåå†å›åˆ°é—¨è¯Šå®¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><a id="more"></a><p><img src="/images/media/pattern13_01.jpg" alt="pattern13_01"></p><p>è€Œå¦‚æœå¼•â€è¿›é—¨é¢æ¨¡å¼â€ï¼Œåœ¨åŒ»é™¢ä¸­å¢åŠ ä¸€ä¸ªæ¥å¾…å‘˜ã€‚ç”±æ¥å¾…å‘˜è´Ÿè´£ä»£ä¸ºæŒ‚å·ã€åˆ’ä»·ã€ç¼´è´¹ã€å–è¯ç­‰ï¼Œç—…äººåªæ¥è§¦æ¥å¾…å‘˜ï¼Œç”±æ¥å¾…å‘˜ä¸å„ä¸ªéƒ¨é—¨æ‰“äº¤é“ã€‚è¿™æ ·ï¼Œå¯¹ç—…äººæ¥è¯´ï¼Œå°±ä¼šç®€å•å¾ˆå¤šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/media/pattern13_02.jpg" alt="pattern13_02"></p><p>ä¸‹é¢çœ‹çœ‹é—¨é¢æ¨¡å¼çš„UMLç±»å›¾ï¼š<br><img src="/images/media/pattern13_03.jpg" alt="pattern13_03"></p><p>é—¨é¢æ¨¡å¼åŒ…æ‹¬2ä¸ªè§’è‰²ï¼š<strong>é—¨é¢(Facade)ï¼Œå­ç³»ç»Ÿ(SubSystem)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é—¨ é¢</td><td>å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨è¿™ä¸ªè§’è‰²çš„æ–¹æ³•ã€‚æ­¤è§’è‰²çŸ¥æ™“ç›¸å…³çš„ï¼ˆä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼‰å­ç³»ç»Ÿçš„åŠŸèƒ½å’Œè´£ä»»ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæœ¬è§’è‰²ä¼šå°†æ‰€æœ‰ä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚å§”æ´¾åˆ°ç›¸åº”çš„å­ç³»ç»Ÿå»ã€‚</td></tr><tr><td>å­ç³»ç»Ÿ</td><td>å¯ä»¥åŒæ—¶æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­ç³»ç»Ÿã€‚æ¯ä¸ªå­ç³»ç»Ÿéƒ½ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»çš„é›†åˆã€‚æ¯ä¸ªå­ç³»ç»Ÿéƒ½å¯ä»¥è¢«å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨ï¼Œæˆ–è€…è¢«é—¨é¢è§’è‰²è°ƒç”¨ã€‚å­ç³»ç»Ÿå¹¶ä¸çŸ¥é“é—¨é¢çš„å­˜åœ¨ï¼Œå¯¹äºå­ç³»ç»Ÿè€Œè¨€ï¼Œé—¨é¢ä»…ä»…æ˜¯å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯è€Œå·²ã€‚</td></tr></tbody></table><h1 id="é—¨é¢æ¨¡å¼ç¤ºä¾‹"><a href="#é—¨é¢æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="é—¨é¢æ¨¡å¼ç¤ºä¾‹"></a>é—¨é¢æ¨¡å¼ç¤ºä¾‹</h1><p>ä¸€ä¸ªä¿å®‰ç³»ç»Ÿç”±ä¸¤ä¸ªå½•åƒæœºã€ä¸‰ä¸ªç”µç¯ã€ä¸€ä¸ªé¥æ§å™¨å’Œä¸€ä¸ªè­¦æŠ¥å™¨ç»„æˆã€‚ä¿å®‰ç³»ç»Ÿçš„æ“ä½œäººå‘˜åœ¨æ—©ä¸Šä¸Šç­çš„æ—¶å€™ï¼Œå°†è¿™äº›ä»ªå™¨æ‰“å¼€ï¼›æ™šä¸Šä¸‹ç­ä¹‹åï¼Œä¼šå°†è¿™äº›ä»ªå™¨å…³é—­ã€‚</p><p>æˆ‘ä»¬å…ˆæ¼”ç¤ºåœ¨ä¸ä½¿ç”¨â€é—¨é¢æ¨¡å¼â€çš„æƒ…å†µä¸‹ï¼Œå®ç°è¯¥ç³»ç»Ÿã€‚ç„¶åï¼Œé€šè¿‡â€é—¨é¢æ¨¡å¼â€å®ç°è¯¥ç³»ç»Ÿã€‚</p><h2 id="æœªä½¿ç”¨â€é—¨é¢æ¨¡å¼â€"><a href="#æœªä½¿ç”¨â€é—¨é¢æ¨¡å¼â€" class="headerlink" title="æœªä½¿ç”¨â€é—¨é¢æ¨¡å¼â€"></a>æœªä½¿ç”¨â€é—¨é¢æ¨¡å¼â€</h2><p>UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern13_04.jpg" alt="pattern13_04"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®¢æˆ·ç«¯Clientå¯¹è±¡éœ€è¦å¼•ç”¨åˆ°å½•åƒæœº(Camera)ã€ç”µç¯(Light)ã€æ„Ÿåº”å™¨(Sensor)å’ŒæŠ¥è­¦å™¨(Alarm)æ‰€æœ‰çš„å¯¹è±¡ã€‚</p><p>å®¢æˆ·ç«¯(Client)æºç </p><pre><code>public class Client {    private static Camera camera1, camera2;    private static Light light1, light2, light3;    private static Sensor sensor;    private static Alarm alarm;    public static void main(String[] args) {        camera1 = new Camera();        camera2 = new Camera();        light1 = new Light();        light2 = new Light();        light3 = new Light();        sensor = new Sensor();        alarm = new Alarm();        camera1.turnOn();        camera2.turnOn();        light1.turnOn();        light2.turnOn();        light3.turnOn();        sensor.activate();        alarm.activate();    }}</code></pre><p>å½•åƒæœº(Camera)æºç </p><pre><code>public class Camera {    // æ‰“å¼€å½•åƒæœº    public void turnOn() {        System.out.println(&quot;Turning on the camera.&quot;);    }    // å…³é—­å½•åƒæœº    public void turnOff() {        System.out.println(&quot;Turning off the camera.&quot;);    }    // è½¬åŠ¨å½•åƒæœº    public void rotate(int degrees) {        System.out.println(&quot;Rotating the camera by &quot;+degrees+&quot; degrees.&quot;);    }}</code></pre><p>ç”µç¯(Light)æºç </p><pre><code>public class Light {    // æ‰“å¼€ç¯    public void turnOn() {        System.out.println(&quot;Turning on the light.&quot;);    }    // å…³é—­ç¯    public void turnOff() {        System.out.println(&quot;Turning off the light.&quot;);    }    // æ¢ç¯æ³¡    public void changeBulb() {        System.out.println(&quot;Cotating the light-bulb.&quot;);    }}</code></pre><p>æ„Ÿåº”å™¨(Sensor)æºç </p><pre><code>public class Sensor {    // å¯åŠ¨æ„Ÿåº”å™¨    public void activate() {        System.out.println(&quot;Activating on the sensor.&quot;);    }    // å…³é—­æ„Ÿåº”å™¨    public void deactivate() {        System.out.println(&quot;Deactivating the sensor.&quot;);    }    // è§¦å‘æ„Ÿåº”å™¨    public void trigger() {        System.out.println(&quot;The sensor has been triggered.&quot;);    }}</code></pre><p>æŠ¥è­¦å™¨(Alarm)æºç </p><pre><code>public class Alarm {    // å¯åŠ¨è­¦æŠ¥å™¨    public void activate() {        System.out.println(&quot;Activating on the alarm.&quot;);    }    // å…³é—­è­¦æŠ¥å™¨    public void deactivate() {        System.out.println(&quot;Deactivating the alarm.&quot;);    }    // æ‹‰å“è­¦æŠ¥å™¨    public void ring() {        System.out.println(&quot;Ringing the alarm&quot;);    }    // åœæ‰è­¦æŠ¥å™¨    public void stopRing() {        System.out.println(&quot;Stop the alarm&quot;);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Turning on the camera.Turning on the camera.Turning on the light.Turning on the light.Turning on the light.Activating on the sensor.Activating on the alarm.</code></pre><h2 id="ä½¿ç”¨â€é—¨é¢æ¨¡å¼â€"><a href="#ä½¿ç”¨â€é—¨é¢æ¨¡å¼â€" class="headerlink" title="ä½¿ç”¨â€é—¨é¢æ¨¡å¼â€"></a>ä½¿ç”¨â€é—¨é¢æ¨¡å¼â€</h2><p>UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern13_05.jpg" alt="pattern13_05"></p><p>å¯ä»¥çœ‹å‡ºï¼šé—¨é¢SecurityFadeæ‰¿æ‹…äº†ä¸ä¿å®‰ç³»ç»Ÿå†…éƒ¨å„ä¸ªå¯¹è±¡æ‰“äº¤é“çš„ä»»åŠ¡ï¼Œè€Œå®¢æˆ·å¯¹è±¡åªéœ€è¦ä¸é—¨é¢å¯¹è±¡æ‰“äº¤é“å³å¯ã€‚SecurityFadeæ˜¯å®¢æˆ·ç«¯ä¸ä¿å®‰ç³»ç»Ÿä¹‹é—´çš„ä¸€ä¸ªé—¨æˆ·ï¼Œå®ƒä½¿å¾—å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿä¹‹é—´çš„å…³ç³»å˜å¾—ç®€å•å’Œæ˜“äºç®¡ç†ã€‚</p><p>å®¢æˆ·ç«¯(Client)æºç </p><pre><code>public class Client {    private static SecurityFacade security;    public static void main(String[] args) {        security = new SecurityFacade();        security.activate();    }}</code></pre><p>é—¨é¢(SecurityFade)æºç </p><pre><code>public class SecurityFacade {    private Camera camera1, camera2;    private Light light1, light2, light3;    private Sensor sensor;    private Alarm alarm;    public SecurityFacade() {        camera1 = new Camera();        camera2 = new Camera();        light1 = new Light();        light2 = new Light();        light3 = new Light();        sensor = new Sensor();        alarm = new Alarm();    }    public void activate() {        camera1.turnOn();        camera2.turnOn();        light1.turnOn();        light2.turnOn();        light3.turnOn();        sensor.activate();        alarm.activate();    }    public void deactivate() {        camera1.turnOff();        camera2.turnOff();        light1.turnOff();        light2.turnOff();        light3.turnOff();        sensor.deactivate();        alarm.deactivate();    }}</code></pre><p>å½•åƒæœº(Camera)æºç </p><pre><code>public class Camera {    // æ‰“å¼€å½•åƒæœº    public void turnOn() {        System.out.println(&quot;Turning on the camera.&quot;);    }    // å…³é—­å½•åƒæœº    public void turnOff() {        System.out.println(&quot;Turning off the camera.&quot;);    }    // è½¬åŠ¨å½•åƒæœº    public void rotate(int degrees) {        System.out.println(&quot;Rotating the camera by &quot;+degrees+&quot; degrees.&quot;);    }}</code></pre><p>ç”µç¯(Light)æºç </p><pre><code>public class Light {    // æ‰“å¼€ç¯    public void turnOn() {        System.out.println(&quot;Turning on the light.&quot;);    }    // å…³é—­ç¯    public void turnOff() {        System.out.println(&quot;Turning off the light.&quot;);    }    // æ¢ç¯æ³¡    public void changeBulb() {        System.out.println(&quot;Cotating the light-bulb.&quot;);    }}</code></pre><p>æ„Ÿåº”å™¨(Sensor)æºç </p><pre><code>public class Sensor {    // å¯åŠ¨æ„Ÿåº”å™¨    public void activate() {        System.out.println(&quot;Activating on the sensor.&quot;);    }    // å…³é—­æ„Ÿåº”å™¨    public void deactivate() {        System.out.println(&quot;Deactivating the sensor.&quot;);    }    // è§¦å‘æ„Ÿåº”å™¨    public void trigger() {        System.out.println(&quot;The sensor has been triggered.&quot;);    }}</code></pre><p>æŠ¥è­¦å™¨(Alarm)æºç </p><pre><code>public class Alarm {    // å¯åŠ¨è­¦æŠ¥å™¨    public void activate() {        System.out.println(&quot;Activating on the alarm.&quot;);    }    // å…³é—­è­¦æŠ¥å™¨    public void deactivate() {        System.out.println(&quot;Deactivating the alarm.&quot;);    }    // æ‹‰å“è­¦æŠ¥å™¨    public void ring() {        System.out.println(&quot;Ringing the alarm&quot;);    }    // åœæ‰è­¦æŠ¥å™¨    public void stopRing() {        System.out.println(&quot;Stop the alarm&quot;);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Turning on the camera.Turning on the camera.Turning on the light.Turning on the light.Turning on the light.Activating on the sensor.Activating on the alarm.</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;é—¨é¢æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#é—¨é¢æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;é—¨é¢æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;é—¨é¢æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;é—¨é¢æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„é—¨é¢å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œ&lt;br&gt;ç—…äººå»åŒ»é™¢çœ‹ç—…ï¼Œå¦‚æœæŠŠåŒ»é™¢ä½œä¸ºä¸€ä¸ªå­ç³»ç»Ÿï¼ŒæŒ‰ç…§éƒ¨é—¨èŒèƒ½ï¼Œè¿™ä¸ªç³»ç»Ÿå¯ä»¥åˆ’åˆ†ä¸ºæŒ‚å·ã€é—¨è¯Šã€åˆ’ä»·ã€åŒ–éªŒã€æ”¶è´¹ã€å–è¯ç­‰ã€‚çœ‹ç—…çš„ç—…äººè¦ä¸è¿™äº›éƒ¨é—¨æ‰“äº¤é“ï¼Œå°±å¦‚åŒä¸€ä¸ªå­ç³»ç»Ÿçš„å®¢æˆ·ç«¯ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„å„ä¸ªç±»æ‰“äº¤é“ä¸€æ ·ï¼Œä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼šé¦–å…ˆç—…äººå¿…é¡»å…ˆæŒ‚å·ï¼Œç„¶åé—¨è¯Šï¼›å¦‚æœåŒ»ç”Ÿè¦æ±‚åŒ–éªŒï¼Œç—…äººå¿…é¡»é¦–å…ˆåˆ’ä»·ï¼Œç„¶åç¼´è´¹ï¼Œæ‰å¯ä»¥åˆ°åŒ–éªŒéƒ¨é—¨åšåŒ–éªŒï¼›åŒ–éªŒåå†å›åˆ°é—¨è¯Šå®¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="é—¨é¢æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼12ä¹‹ äº«å…ƒ(Flyweight)æ¨¡å¼(ç»“æ„æ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F12%E4%B9%8B-%E4%BA%AB%E5%85%83-Flyweight-%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/25/è®¾è®¡æ¨¡å¼12ä¹‹-äº«å…ƒ-Flyweight-æ¨¡å¼-ç»“æ„æ¨¡å¼/</id>
    <published>2014-05-25T03:09:05.000Z</published>
    <updated>2019-04-22T15:23:58.601Z</updated>
    
    <content type="html"><![CDATA[<h1 id="äº«å…ƒæ¨¡å¼ç®€ä»‹"><a href="#äº«å…ƒæ¨¡å¼ç®€ä»‹" class="headerlink" title="äº«å…ƒæ¨¡å¼ç®€ä»‹"></a>äº«å…ƒæ¨¡å¼ç®€ä»‹</h1><p>äº«å…ƒæ¨¡å¼(Flyweight)æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå®ƒä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ã€‚</p><p>å®ƒçš„å¥½å¤„æ˜¯ï¼Œé€šè¿‡å…±äº«æ¥é¿å…å¤§é‡æ‹¥æœ‰ç›¸åŒå†…å®¹å¯¹è±¡çš„å¼€é”€ã€‚</p><p>äº«å…ƒæ¨¡å¼ä¸­çš„å¯¹è±¡ç§°ä¸ºäº«å…ƒå¯¹è±¡ï¼Œäº«å…ƒå¯¹è±¡åˆ†ä¸ºå†…è•´çŠ¶æ€å’Œå¤–è•´çŠ¶æ€ã€‚<br>å†…è•´å¯¹è±¡å’Œå¤–è•´å¯¹è±¡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼šå†…è•´çŠ¶æ€æ˜¯å­˜å‚¨åœ¨äº«å…ƒå¯¹è±¡å†…éƒ¨ï¼Œå¹¶ä¸”ä¸ä¼šéšç¯å¢ƒæ”¹å˜è€Œæœ‰æ‰€ä¸åŒçš„ï¼›å†…è•´çŠ¶æ€æ˜¯å¯ä»¥å…±äº«ã€‚å¤–è•´çŠ¶æ€æ˜¯éšç¯å¢ƒæ”¹å˜è€Œæ”¹å˜ï¼Œä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ï¼›äº«å…ƒå¯¹è±¡çš„å¤–è•´çŠ¶æ€å¿…é¡»ç”±å®¢æˆ·ç«¯ä¿å­˜ï¼Œå¹¶åœ¨äº«å…ƒå¯¹è±¡è¢«åˆ›å»ºä¹‹åï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†ä¼ å…¥åˆ°äº«å…ƒå¯¹è±¡å†…éƒ¨ã€‚</p><a id="more"></a><p>ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„äº«å…ƒæ¨¡å¼ç¤ºä¾‹å°±æ˜¯ï¼šâ€Javaä¸­çš„Stringå¯¹è±¡â€ã€‚</p><p>ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªStringå¸¸é‡aå’Œbï¼Œå®ƒä»¬çš„å€¼ä¸ºâ€helloâ€ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>String a=&quot;hello&quot;;String b=&quot;hello&quot;;</code></pre><p>å®é™…ä¸Šï¼Œaå’Œbéƒ½æ˜¯å­˜åœ¨å¸¸é‡æ± ä¸­ã€‚ç”±äºaå’Œbçš„å€¼éƒ½æ˜¯â€helloâ€ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯å¸¸é‡æ± çš„åŒä¸€ä¸ªå¯¹è±¡ï¼</p><p>å¸¸é‡æ± (constant pool)æŒ‡çš„æ˜¯åœ¨ç¼–è¯‘æœŸå°±è¢«ç¡®å®šï¼Œå¹¶è¢«ä¿å­˜åœ¨å·²ç¼–è¯‘çš„.classæ–‡ä»¶ä¸­çš„ä¸€äº›æ•°æ®ã€‚å®ƒåŒ…æ‹¬äº†å…³äºç±»ã€æ–¹æ³•ã€æ¥å£ç­‰ä¸­çš„å¸¸é‡ï¼Œä¹ŸåŒ…æ‹¬å­—ç¬¦ä¸²å¸¸é‡ã€‚</p><h2 id="Stringç¤ºä¾‹1"><a href="#Stringç¤ºä¾‹1" class="headerlink" title="Stringç¤ºä¾‹1"></a>Stringç¤ºä¾‹1</h2><pre><code>public class String1 {    public static void main(String[] args) {        String a = &quot;hello&quot;;        String b = &quot;hello&quot;;        String c = &quot;he&quot;+&quot;llo&quot;;        System.out.println(a==b);        System.out.println(a==c);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>truetrue</code></pre><p>ç»“æœè¯´æ˜ï¼š<br>(01) aå’Œbä¸­çš„â€helloâ€éƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œå®ƒä»¬å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ï¼Œåœ¨ç¼–è¯‘æœŸå°±è¢«ç¡®å®šäº†ï¼Œæ‰€ä»¥a==bä¸ºtrueã€‚<br>(02) â€œheâ€å’Œâ€lloâ€ä¹Ÿéƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²ç”±å¤šä¸ªå­—ç¬¦ä¸²å¸¸é‡è¿æ¥è€Œæˆæ—¶ï¼Œå®ƒè‡ªå·±è‚¯å®šä¹Ÿæ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥cä¹ŸåŒæ ·åœ¨ç¼–è¯‘æœŸå°±è¢«è§£æä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥cä¹Ÿæ˜¯å¸¸é‡æ± ä¸­â€helloâ€çš„ä¸€ä¸ªå¼•ç”¨ã€‚</p><h2 id="Stringç¤ºä¾‹2"><a href="#Stringç¤ºä¾‹2" class="headerlink" title="Stringç¤ºä¾‹2"></a>Stringç¤ºä¾‹2</h2><pre><code>public class String2 {    public static void main(String[] args) {        String a = &quot;hello&quot;;        String b = new String(&quot;hello&quot;);        String c = &quot;he&quot;+new String(&quot;llo&quot;);        System.out.println(a==b);        System.out.println(a==c);        System.out.println(b==c);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>falsefalsefalse</code></pre><p>ç»“æœè¯´æ˜ï¼šaè¿˜æ˜¯å¸¸é‡æ± ä¸­â€helloâ€å­—ç¬¦ä¸²å¸¸é‡ï¼›è€Œbåˆ™æ— æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œå®ƒæ˜¯è¿è¡Œæ—¶åˆ›å»ºâ€helloâ€å¯¹è±¡çš„å¼•ç”¨ï¼›è€Œcå› ä¸ºæœ‰ååŠéƒ¨åˆ†new String(â€œlloâ€)ï¼Œæ‰€ä»¥cä¹Ÿæ— æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œå› æ­¤ï¼Œcä¹Ÿæ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„â€helloâ€å¯¹è±¡çš„åº”ç”¨ã€‚</p><p>ç»§ç»­å›åˆ°äº«å…ƒæ¨¡å¼ã€‚å®ƒåˆ†ä¸ºâ€<strong>å•çº¯äº«å…ƒæ¨¡å¼</strong>â€œ å’Œ â€œ<strong>å¤åˆäº«å…ƒæ¨¡å¼</strong>â€œã€‚</p><p><a name="anchor2"></a></p><h1 id="å•çº¯äº«å…ƒæ¨¡å¼"><a href="#å•çº¯äº«å…ƒæ¨¡å¼" class="headerlink" title="å•çº¯äº«å…ƒæ¨¡å¼"></a>å•çº¯äº«å…ƒæ¨¡å¼</h1><p>åœ¨å•çº¯çš„äº«å…ƒæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„äº«å…ƒå¯¹è±¡éƒ½æ˜¯å¯ä»¥å…±äº«çš„ã€‚å®ƒçš„UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern12_01.jpg" alt="pattern12_01"></p><p>å•çº¯äº«å…ƒæ¨¡å¼æ¶‰åŠåˆ°çš„è§’è‰²ï¼š<strong>æŠ½è±¡äº«å…ƒ(Flyweight)ï¼Œå…·ä½“äº«å…ƒ(ConcreteFlyweight)ï¼Œäº«å…ƒå·¥å‚(FlyweightFactory)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ½è±¡äº«å…ƒ</td><td>è¯¥è§’è‰²æ˜¯æ‰€æœ‰çš„å…·ä½“äº«å…ƒç±»çš„è¶…ç±»ï¼Œå®ƒç»™å‡ºäº†å…·ä½“äº«å…ƒç±»éœ€è¦å®ç°çš„å…¬å…±æ¥å£ã€‚</td></tr><tr><td>å…·ä½“äº«å…ƒ</td><td>å®ç°æŠ½è±¡äº«å…ƒè§’è‰²æ‰€è§„å®šå‡ºçš„æ¥å£ã€‚</td></tr><tr><td>äº«å…ƒå·¥å‚</td><td>æœ¬è§’è‰²è´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒè§’è‰²ã€‚æœ¬è§’è‰²å¿…é¡»ä¿è¯äº«å…ƒå¯¹è±¡å¯ä»¥è¢«ç³»ç»Ÿé€‚å½“åœ°å…±äº«ã€‚å½“ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡è°ƒç”¨ä¸€ä¸ªäº«å…ƒå¯¹è±¡çš„æ—¶å€™ï¼Œäº«å…ƒå·¥å‚è§’è‰²ä¼šæ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å·²ç»æœ‰ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„äº«å…ƒå¯¹è±¡ã€‚å¦‚æœå·²ç»æœ‰äº†ï¼Œäº«å…ƒå·¥å‚è§’è‰²å°±åº”å½“æä¾›è¿™ä¸ªå·²æœ‰çš„äº«å…ƒå¯¹è±¡ï¼›å¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰ä¸€ä¸ªé€‚å½“çš„äº«å…ƒå¯¹è±¡çš„è¯ï¼Œäº«å…ƒå·¥å‚è§’è‰²å°±åº”å½“åˆ›å»ºä¸€ä¸ªåˆé€‚çš„äº«å…ƒå¯¹è±¡ã€‚</td></tr></tbody></table><h2 id="æŠ½è±¡äº«å…ƒ"><a href="#æŠ½è±¡äº«å…ƒ" class="headerlink" title="æŠ½è±¡äº«å…ƒ"></a>æŠ½è±¡äº«å…ƒ</h2><pre><code>abstract public class Flyweight {    // ç¤ºæ„æ€§æ–¹æ³•ï¼Œå‚æ•°stateæ˜¯å¤–è•´çŠ¶æ€ã€‚    public abstract void operation(String state);}</code></pre><h2 id="å…·ä½“äº«å…ƒ"><a href="#å…·ä½“äº«å…ƒ" class="headerlink" title="å…·ä½“äº«å…ƒ"></a>å…·ä½“äº«å…ƒ</h2><pre><code>public class ConcreteFlyweight extends Flyweight {    private Character intrinsicState = null;    // å†…è•´çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ å…¥    public ConcreteFlyweight(Character state) {        this.intrinsicState = state;    }    // å¤–è•´çŠ¶æ€ä½œä¸ºå‚é‡ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæ”¹å˜æ–¹æ³•çš„è¡Œä¸ºã€‚    public void operation(String state) {        System.out.println(&quot;\tIntrisic State=&quot;            + intrinsicState            + &quot;, Extriinsic State=&quot;+state);    }}</code></pre><h2 id="äº«å…ƒå·¥å‚"><a href="#äº«å…ƒå·¥å‚" class="headerlink" title="äº«å…ƒå·¥å‚"></a>äº«å…ƒå·¥å‚</h2><pre><code>import java.util.Map;import java.util.HashMap;import java.util.Iterator;public class FlyweightFactory {    private HashMap flies = new HashMap();    public Flyweight factory(Character state) {        if (flies.containsKey(state)) {            System.out.println(state+&quot; exists.&quot;);            return (Flyweight)flies.get(state);        } else {            System.out.println(state+&quot; not exists!&quot;);            Flyweight fly = new ConcreteFlyweight(state);            flies.put(state, fly);            return fly;        }    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><pre><code>public class Client {    public static void main(String[] args) {        FlyweightFactory factory = new FlyweightFactory();        Flyweight fly = factory.factory(new Character(&apos;a&apos;));        fly.operation(&quot;First Call&quot;);        fly = factory.factory(new Character(&apos;b&apos;));        fly.operation(&quot;Second Call&quot;);        fly = factory.factory(new Character(&apos;a&apos;));        fly.operation(&quot;Third Call&quot;);    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>a not exists!Intrisic State=a, Extriinsic State=First Callb not exists!Intrisic State=b, Extriinsic State=Second Calla exists.Intrisic State=a, Extriinsic State=Third Call</code></pre><p>ç»“æœè¯´æ˜ï¼š</p><p>æŠ½è±¡äº«å…ƒç±»Flyweightæä¾›äº†operation()å…¬å…±æ¥å£ã€‚<br>å…·ä½“äº«å…ƒç±»ConcreteFlyweightå®ç°äº†æŠ½è±¡äº«å…ƒæ‰€ç»™å®šçš„æ¥å£ã€‚<br>äº«å…ƒå·¥å‚ç±»FlyweightFactoryè´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒè§’è‰²ã€‚<br>å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥å°†å…·ä½“äº«å…ƒç±»å®ä¾‹åŒ–ï¼Œè€Œå¿…é¡»é€šè¿‡è°ƒç”¨å·¥å‚å¯¹è±¡çš„factory()æ¥è·å–äº«å…ƒå¯¹è±¡ã€‚<br>åœ¨ç¤ºä¾‹ä¸­ï¼Œè™½ç„¶å®¢æˆ·ç«¯ç”³è¯·äº†ä¸‰ä¸ªäº«å…ƒå¯¹è±¡ï¼Œä½†æ˜¯å®é™…åˆ›å»ºçš„äº«å…ƒå¯¹è±¡åªæœ‰ä¸¤ä¸ªï¼Œè¿™å°±æ˜¯å…±äº«çš„å«ä¹‰ã€‚</p><h1 id="å¤åˆäº«å…ƒæ¨¡å¼"><a href="#å¤åˆäº«å…ƒæ¨¡å¼" class="headerlink" title="å¤åˆäº«å…ƒæ¨¡å¼"></a>å¤åˆäº«å…ƒæ¨¡å¼</h1><p>åœ¨å•çº¯äº«å…ƒæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„äº«å…ƒå¯¹è±¡éƒ½æ˜¯å•çº¯äº«å…ƒå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½æ˜¯å¯ä»¥ç›´æ¥å…±äº«çš„ã€‚è€Œè¿˜æœ‰ä¸€ç§è¾ƒä¸ºå¤æ‚çš„æƒ…å†µï¼Œå°†ä¸€äº›å•çº¯äº«å…ƒä½¿ç”¨åˆæˆæ¨¡å¼åŠ ä»¥å¤åˆï¼Œå½¢æˆå¤åˆäº«å…ƒå¯¹è±¡ã€‚è¿™æ ·çš„å¤åˆäº«å…ƒå¯¹è±¡æœ¬èº«ä¸èƒ½å…±äº«ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥åˆ†è§£æˆå•çº¯äº«å…ƒå¯¹è±¡ï¼Œè€Œåè€…åˆ™å¯ä»¥å…±äº«ã€‚</p><p>å¤åˆäº«å…ƒæ¨¡å¼çš„UMLç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern12_02.jpg" alt="pattern12_02"></p><p>å¤åˆäº«å…ƒè§’è‰²æ‰€æ¶‰åŠåˆ°çš„è§’è‰²å¦‚ä¸‹ï¼š<strong>æŠ½è±¡äº«å…ƒ(Flyweight)ï¼Œå…·ä½“äº«å…ƒ(ConcreteFlyweight)ï¼Œå¤åˆäº«å…ƒ(ConcreteCompositeFlyweight)ï¼Œäº«å…ƒå·¥å‚(FlyweightFactory)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ½è±¡äº«å…ƒ</td><td>è¯¥è§’è‰²æ˜¯æ‰€æœ‰çš„å…·ä½“äº«å…ƒç±»çš„è¶…ç±»ï¼Œå®ƒç»™å‡ºäº†å…·ä½“äº«å…ƒç±»éœ€è¦å®ç°çš„å…¬å…±æ¥å£ã€‚</td></tr><tr><td>å…·ä½“äº«å…ƒ</td><td>å®ç°æŠ½è±¡äº«å…ƒè§’è‰²æ‰€è§„å®šå‡ºçš„æ¥å£ã€‚</td></tr><tr><td>å¤åˆäº«å…ƒ</td><td>å¤åˆäº«å…ƒè§’è‰²æ‰€ä»£è¡¨çš„å¯¹è±¡æ˜¯ä¸å¯ä»¥å…±äº«çš„ï¼Œä½†æ˜¯ä¸€ä¸ªå¤åˆäº«å…ƒå¯¹è±¡å¯ä»¥åˆ†è§£æˆä¸ºå¤šä¸ªæœ¬èº«æ˜¯å•çº¯äº«å…ƒå¯¹è±¡çš„ç»„åˆã€‚å¤åˆäº«å…ƒè§’è‰²åˆç§°ä½œä¸å¯å…±äº«çš„äº«å…ƒå¯¹è±¡ã€‚</td></tr><tr><td>äº«å…ƒå·¥å‚</td><td>æœ¬è§’è‰²è´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒè§’è‰²ã€‚</td></tr></tbody></table><h2 id="æŠ½è±¡äº«å…ƒ-1"><a href="#æŠ½è±¡äº«å…ƒ-1" class="headerlink" title="æŠ½è±¡äº«å…ƒ"></a>æŠ½è±¡äº«å…ƒ</h2><p>æŠ½è±¡äº«å…ƒç±»æ˜¯Flyweightï¼Œå®ƒå®šä¹‰äº†operation()å…¬å…±æ¥å£ï¼Œoperation()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¤–è•´çŠ¶æ€ä½œä¸ºå‚é‡ã€‚</p><pre><code>abstract public class Flyweight {    // ç¤ºæ„æ€§æ–¹æ³•ï¼Œå‚æ•°stateæ˜¯å¤–è•´çŠ¶æ€    public abstract void operation(String state);}</code></pre><h2 id="å…·ä½“äº«å…ƒ-1"><a href="#å…·ä½“äº«å…ƒ-1" class="headerlink" title="å…·ä½“äº«å…ƒ"></a>å…·ä½“äº«å…ƒ</h2><p>å…·ä½“äº«å…ƒç±»æ˜¯ConcreteFlyweightã€‚å®ƒä¸»è¦è´£ä»»æœ‰ä¸¤ä¸ªï¼š<br>(01) å®ç°æŠ½è±¡äº«å…ƒæ‰€å®šä¹‰çš„æ¥å£operation()ã€‚<br>(02) ä¸ºå†…æ¶µçŠ¶æ€æä¾›å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ConcreteFlyweightä¸­çš„intrinsicStateæ ‘å½¢ã€‚</p><pre><code>public class ConcreteFlyweight extends Flyweight {    private Character intrinsicState = null;    // æ„é€ å‡½æ•°ï¼Œå†…è•´çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ å…¥    public ConcreteFlyweight(Character state){        this.intrinsicState = state;    }    // å¤–è•´çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæ”¹å˜æ–¹æ³•çš„è¡Œä¸ºï¼Œ    @Override    public void operation(String state) {        System.out.println(&quot;\tIntrisic State=&quot;            + intrinsicState            + &quot;, Extriinsic State=&quot;+state);    }}</code></pre><h2 id="å¤åˆäº«å…ƒ"><a href="#å¤åˆäº«å…ƒ" class="headerlink" title="å¤åˆäº«å…ƒ"></a>å¤åˆäº«å…ƒ</h2><p>å¤åˆäº«å…ƒç±»æ˜¯ConcreteCompositeFlyweightã€‚</p><p>å¤åˆäº«å…ƒæ˜¯ç”±â€å•çº¯äº«å…ƒâ€å¯¹è±¡é€šè¿‡å¤åˆè€Œæˆï¼Œå› æ­¤ï¼Œå®ƒæä¾›äº†add()è¿™æ ·çš„èšé›†ç®¡ç†æ–¹æ³•ã€‚ç”±äºä¸€ä¸ªå¤åˆäº«å…ƒå¯¹è±¡å…·æœ‰ä¸åŒçš„èšé›†å…ƒç´ ï¼Œè¿™äº›èšé›†å…ƒç´ åœ¨å¤åˆäº«å…ƒå¯¹è±¡è¢«åˆ›å»ºä¹‹ååŠ å…¥ï¼Œè¿™æœ¬èº«å°±æ„å‘³ç€å¤åˆäº«å…ƒå¯¹è±¡çš„çŠ¶æ€æ˜¯ä¼šæ”¹å˜çš„ï¼Œå› æ­¤å¤åˆäº«å…ƒå¯¹è±¡æ˜¯ä¸èƒ½å…±äº«çš„ã€‚</p><p>æ­¤å¤–ï¼Œå¤åˆäº«å…ƒè§’è‰²å®ç°äº†æŠ½è±¡äº«å…ƒè§’è‰²æ‰€è§„å®šçš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯operation()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨å¤åˆäº«å…ƒå¯¹è±¡çš„å¤–è•´çŠ¶æ€ã€‚ä¸€ä¸ªå¤åˆäº«å…ƒå¯¹è±¡çš„æ‰€æœ‰å•çº¯äº«å…ƒå¯¹è±¡å…ƒç´ çš„å¤–è•´çŠ¶æ€éƒ½æ˜¯ä¸å¤åˆäº«å…ƒå¯¹è±¡çš„å¤–è•´çŠ¶æ€ç›¸ç­‰çš„ï¼›è€Œä¸€ä¸ªå¤åˆäº«å…ƒå¯¹è±¡æ‰€å«æœ‰çš„å•çº¯äº«å…ƒå¯¹è±¡çš„å†…è•´çŠ¶æ€ä¸€èˆ¬æ˜¯ä¸ç›¸ç­‰çš„ï¼Œä¸ç„¶å°±æ²¡æœ‰ä½¿ç”¨ä»·å€¼äº†ã€‚</p><pre><code>import java.util.Map;import java.util.HashMap;import java.util.Iterator;// å¤åˆäº«å…ƒï¼šå®ƒç”±è‹¥å¹²ä¸ª&quot;å•çº¯äº«å…ƒå¯¹è±¡&quot;ç»„æˆã€‚public class ConcreteCompositeFlyweight extends Flyweight {    private HashMap flies = new HashMap();    private Flyweight flyweight;    // å¢åŠ ä¸€ä¸ªæ–°çš„å•çº¯äº«å…ƒå¯¹è±¡åˆ°å¤åˆäº«å…ƒä¸­    public void add(Character key , Flyweight fly) {        flies.put(key,fly);    }    // å¤–è•´çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°æ–¹æ³•ä¸­    @Override    public void operation(String state) {        Flyweight fly = null;        for (Iterator it = flies.entrySet().iterator();             it.hasNext(); ) {            Map.Entry e = (Map.Entry) it.next();            fly = (Flyweight) e.getValue();            fly.operation(state);        }    }}</code></pre><h2 id="äº«å…ƒå·¥å‚-1"><a href="#äº«å…ƒå·¥å‚-1" class="headerlink" title="äº«å…ƒå·¥å‚"></a>äº«å…ƒå·¥å‚</h2><p>äº«å…ƒå·¥å‚æ˜¯FlyweightFactoryç±»ã€‚</p><p>äº«å…ƒå·¥å‚æä¾›ä¸¤ç§ä¸åŒçš„â€è¿”å›æŠ½è±¡äº«å…ƒâ€çš„æ–¹æ³•ï¼Œä¸€ç§ç”¨äºæä¾›å•çº¯äº«å…ƒå¯¹è±¡ï¼Œå¦ä¸€ç§ç”¨äºæä¾›å¤åˆäº«å…ƒå¯¹è±¡ã€‚</p><p>å½“éœ€è¦å•çº¯äº«å…ƒçš„æ—¶å€™ï¼Œå°±è°ƒç”¨factory()ï¼Œå¹¶ä¼ å…¥Characterç±»å‹çš„å‚æ•°ã€‚<br>å½“éœ€è¦å¤åˆäº«å…ƒçš„æ—¶å€™ï¼Œå°±è°ƒç”¨factory()ï¼Œå¹¶ä¼ å…¥Stringç±»å‹çš„å‚æ•°ã€‚</p><pre><code>import java.util.Map;import java.util.HashMap;import java.util.Iterator;public class FlyweightFactory {    private HashMap flies = new HashMap();    // åˆ›å»º&quot;å¤åˆäº«å…ƒ&quot;çš„å·¥å‚æ–¹æ³•    public Flyweight factory(String compositeState){        ConcreteCompositeFlyweight compositeFly = new ConcreteCompositeFlyweight();        int length = compositeState.length();        Character state = null;        for (int i=0; i&lt;length; i++) {            state = new Character(compositeState.charAt(i));            System.out.println(&quot;factory(&quot;+state+&quot;)&quot;);            // é€šè¿‡ this.factory(state)åˆ›å»º&quot;å•çº¯äº«å…ƒ&quot;ï¼Œ            // ç„¶å å°†&quot;å•çº¯äº«å…ƒ&quot;æ·»åŠ åˆ°&quot;å¤åˆäº«å…ƒ&quot;ä¸­ã€‚            compositeFly.add(state, this.factory(state));        }        return compositeFly;    }    // åˆ›å»º&quot;å•çº¯äº«å…ƒ&quot;çš„å·¥å‚æ–¹æ³•    public Flyweight factory(Character state){        if (flies.containsKey(state)) {            return (Flyweight)flies.get(state);        } else {            Flyweight fly = new ConcreteFlyweight(state);            flies.put(state, fly);            return fly;        }    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº-1"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº-1" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><p>å®¢æˆ·ç«¯æ˜¯Clientã€‚</p><pre><code>public class Client {    public static void main(String[] args) {        FlyweightFactory factory = new FlyweightFactory();        String str = &quot;abcda&quot;;        Flyweight com1 = factory.factory(str);        Flyweight com2 = factory.factory(str);        com1.operation(&quot;Composite Call&quot;);        com2.operation(&quot;Composite Call&quot;);        System.out.println(&quot;com1==com2:&quot;+(com1==com2));        Character c = &apos;1&apos;;        Flyweight pure1 = factory.factory(c);        Flyweight pure2 = factory.factory(c);        pure1.operation(&quot;pure Call&quot;);        pure2.operation(&quot;pure Call&quot;);        System.out.println(&quot;pure1==pure2:&quot;+(pure1==pure2));    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>factory(a)factory(b)factory(c)factory(d)factory(a)factory(a)factory(b)factory(c)factory(d)factory(a)    Intrisic State=d, Extriinsic State=Composite Call    Intrisic State=b, Extriinsic State=Composite Call    Intrisic State=c, Extriinsic State=Composite Call    Intrisic State=a, Extriinsic State=Composite Call    Intrisic State=d, Extriinsic State=Composite Call    Intrisic State=b, Extriinsic State=Composite Call    Intrisic State=c, Extriinsic State=Composite Call    Intrisic State=a, Extriinsic State=Composite Callcom1==com2:false    Intrisic State=1, Extriinsic State=pure Call    Intrisic State=1, Extriinsic State=pure Call</code></pre><p>ç»“æœè¯´æ˜ï¼š<br>Clientä¸­åˆ›å»ºä¸¤ä¸ªå¤åˆäº«å…ƒcom1å’Œcom2ï¼Œå®ƒä»¬çš„å†…å®¹éƒ½æ˜¯â€abcdaâ€ã€‚ä½†æ˜¯com1==com2:falseè¡¨æ˜ï¼šå¤åˆäº«å…ƒæ˜¯ä¸èƒ½å¤Ÿå…±äº«çš„ã€‚<br>Clientä¸­åˆ›å»ºä¸¤ä¸ªå•çº¯äº«å…ƒpure1å’Œpure2ï¼Œå®ƒä»¬çš„å†…å®¹éƒ½æ˜¯â€™1â€™ã€‚pure1==pure2:trueè¡¨æ˜ï¼šå•çº¯äº«å…ƒæ˜¯å¯ä»¥å…±äº«çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;äº«å…ƒæ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#äº«å…ƒæ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;äº«å…ƒæ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;äº«å…ƒæ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;äº«å…ƒæ¨¡å¼(Flyweight)æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå®ƒä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„å¥½å¤„æ˜¯ï¼Œé€šè¿‡å…±äº«æ¥é¿å…å¤§é‡æ‹¥æœ‰ç›¸åŒå†…å®¹å¯¹è±¡çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;äº«å…ƒæ¨¡å¼ä¸­çš„å¯¹è±¡ç§°ä¸ºäº«å…ƒå¯¹è±¡ï¼Œäº«å…ƒå¯¹è±¡åˆ†ä¸ºå†…è•´çŠ¶æ€å’Œå¤–è•´çŠ¶æ€ã€‚&lt;br&gt;å†…è•´å¯¹è±¡å’Œå¤–è•´å¯¹è±¡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼šå†…è•´çŠ¶æ€æ˜¯å­˜å‚¨åœ¨äº«å…ƒå¯¹è±¡å†…éƒ¨ï¼Œå¹¶ä¸”ä¸ä¼šéšç¯å¢ƒæ”¹å˜è€Œæœ‰æ‰€ä¸åŒçš„ï¼›å†…è•´çŠ¶æ€æ˜¯å¯ä»¥å…±äº«ã€‚å¤–è•´çŠ¶æ€æ˜¯éšç¯å¢ƒæ”¹å˜è€Œæ”¹å˜ï¼Œä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ï¼›äº«å…ƒå¯¹è±¡çš„å¤–è•´çŠ¶æ€å¿…é¡»ç”±å®¢æˆ·ç«¯ä¿å­˜ï¼Œå¹¶åœ¨äº«å…ƒå¯¹è±¡è¢«åˆ›å»ºä¹‹åï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†ä¼ å…¥åˆ°äº«å…ƒå¯¹è±¡å†…éƒ¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="äº«å…ƒæ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼11ä¹‹ ä»£ç†(Proxy)æ¨¡å¼(ç»“æ„æ¨¡å¼)</title>
    <link href="https://blog.flyfox.top/2014/05/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F11%E4%B9%8B-%E4%BB%A3%E7%90%86-Proxy-%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E6%A8%A1%E5%BC%8F/"/>
    <id>https://blog.flyfox.top/2014/05/24/è®¾è®¡æ¨¡å¼11ä¹‹-ä»£ç†-Proxy-æ¨¡å¼-ç»“æ„æ¨¡å¼/</id>
    <published>2014-05-24T03:08:47.000Z</published>
    <updated>2019-04-22T15:23:58.645Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»£ç†æ¨¡å¼ç®€ä»‹"><a href="#ä»£ç†æ¨¡å¼ç®€ä»‹" class="headerlink" title="ä»£ç†æ¨¡å¼ç®€ä»‹"></a>ä»£ç†æ¨¡å¼ç®€ä»‹</h1><p>ä»£ç†(Proxy)æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ã€‚ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ä¾‹å­å°±æ˜¯â€Windowsçš„å¿«æ·æ–¹å¼â€ã€‚Windowså¿«æ·æ–¹å¼ï¼Œå¯ä»¥ä½¿ä»»ä½•å¯¹è±¡åŒæ—¶å‡ºç°åœ¨å¤šä¸ªåœ°æ–¹è€Œä¸å¿…ä¿®æ”¹åŸå¯¹è±¡ã€‚å¯¹å¿«æ·æ–¹å¼çš„è°ƒç”¨å®Œå…¨ä¸å¯¹åŸå¯¹è±¡çš„è°ƒç”¨ä¸€æ ·ï¼Œæ¢è¨€ä¹‹ï¼Œå¿«æ·æ–¹å¼å¯¹å®¢æˆ·ç«¯æ˜¯å®Œå…¨é€æ˜çš„ã€‚</p><a id="more"></a><p>ä»£ç†æ¨¡å¼çš„ç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern11_01.jpg" alt="pattern11_01"></p><p>ä»£ç†æ¨¡å¼ä¸­å…±åŒ…å«äº†ä¸‰ä¸ªè§’è‰²: <strong>æŠ½è±¡ä¸»ä½“(Subject)ï¼Œä»£ç†ä¸»é¢˜(ProxySubject)ï¼ŒçœŸå®ä¸»é¢˜(RealSubject)</strong>ã€‚</p><table><thead><tr><th>è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŠ½è±¡ä¸»é¢˜è§’è‰²</td><td>å£°æ˜äº†çœŸå®ä¸»é¢˜å’Œä»£ç†ä¸»é¢˜çš„å…±åŒæ¥å£ï¼Œè¿™æ ·ä¸€æ¥åœ¨ä»»ä½•å¯ä»¥ä½¿ç”¨çœŸå®ä¸»é¢˜çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ä»£ç†ä¸»é¢˜ã€‚</td></tr><tr><td>ä»£ç†ä¸»é¢˜è§’è‰²</td><td>ä»£ç†ä¸»é¢˜å†…éƒ¨å«æœ‰çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œä»è€Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ“ä½œçœŸå®ä¸»é¢˜ï¼›ä»£ç†ä¸»é¢˜æä¾›ä¸€ä¸ªä¸çœŸå®ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ›¿ä»£çœŸå®ä¸»é¢˜ã€‚ä»£ç†ä¸»é¢˜é€šå¸¸åœ¨å®¢æˆ·ç«¯è°ƒç”¨ä¼ é€’ç»™çœŸå®ä¸»é¢˜ä¹‹å‰æˆ–ä¹‹åï¼Œæ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œè€Œä¸æ˜¯å•çº¯åœ°å°†è°ƒç”¨ä¼ é€’ç»™çœŸå®ä¸»é¢˜ã€‚</td></tr><tr><td>çœŸå®ä¸»é¢˜è§’è‰²</td><td>å®šä¹‰äº†ä»£ç†ä¸»é¢˜æ‰€ä»£è¡¨çš„çœŸå®ä¸»é¢˜ã€‚</td></tr></tbody></table><p>ç¤ºæ„ä»£ç </p><pre><code>abstract public class Subject {    // å£°æ˜ä¸€ä¸ªæŠ½è±¡çš„è¯·æ±‚æ–¹æ³•    public abstract void request();}public class RealSubject extends Subject {    @Override    public void request() {        System.out.println(&quot;From real subject&quot;);    }}public class ProxySubject extends Subject{    RealSubject realSubject = new RealSubject();    @Override    public void request() {        preRequest();        realSubject.request();                postRequest();    }    // è¯·æ±‚å‰çš„æ“ä½œ    private void preRequest() {        // something you want to do before requesting    }    // è¯·æ±‚åçš„æ“ä½œ    private void postRequest() {        // something you want to do after requesting    }}</code></pre><p>è‹¥è¦ä½¿ç”¨ä»£ç†ä¸»é¢˜ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ï¼š</p><pre><code>Subject subject = new ProxySubject();subject.request();</code></pre><p>ä»ä¸­å¯ä»¥çœ‹å‡ºä»£ç†æ¨¡å¼æ˜¯æ€æ ·å·¥ä½œçš„ã€‚é¦–å…ˆï¼Œä»£ç†æ¨¡å¼å¹¶ä¸æ”¹å˜ä¸»é¢˜çš„æ¥å£ï¼Œå› ä¸ºä»£ç†æ¨¡å¼çš„ç”¨æ„æ˜¯ä¸è®©å®¢æˆ·ç«¯æ„Ÿè§‰åˆ°ä»£ç†çš„å­˜åœ¨ï¼›å…¶æ¬¡ï¼Œä»£ç†ä½¿ç”¨å§”æ´¾å°†å®¢æˆ·ç«¯çš„è°ƒç”¨å§”æ´¾ç»™çœŸå®çš„ä¸»é¢˜å¯¹è±¡ï¼›æ¢è¨€ä¹‹ï¼Œä»£ç†ä¸»é¢˜èµ·åˆ°çš„æ˜¯ä¸€ä¸ªä¼ é€’è¯·æ±‚çš„ä½œç”¨ã€‚æœ€åï¼Œä»£ç†ä¸»é¢˜åœ¨ä¼ é€’è¯·æ±‚ä¹‹å‰å’Œä¹‹åéƒ½å¯ä»¥æ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œè€Œä¸æ˜¯å•çº¯çš„ä¼ é€’è¯·æ±‚ã€‚</p><p>å®ƒçš„æ—¶åºå›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern11_02.jpg" alt="pattern11_02"></p><h1 id="ä»£ç†æ¨¡å¼ç¤ºä¾‹"><a href="#ä»£ç†æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="ä»£ç†æ¨¡å¼ç¤ºä¾‹"></a>ä»£ç†æ¨¡å¼ç¤ºä¾‹</h1><p>ä¸‹é¢ï¼Œé€šè¿‡â€é«˜è€åº„æ‚Ÿç©ºé™å…«æˆ’â€çš„ä¾‹å­æ¥å¯¹ä»£ç†æ¨¡å¼è¿›è¡Œè¯´æ˜ã€‚</p><p>æ‚Ÿç©ºå‡æ‰®æˆé«˜å°å§å»è§çŒªå…«æˆ’ã€‚é€šè¿‡ä»£ç†æ¨¡å¼å»åˆ†æï¼Œâ€é«˜å°å§çš„ç¥è²Œâ€æ˜¯æŠ½è±¡ä¸»é¢˜ï¼Œé«˜å°å§æœ¬äººæ˜¯çœŸå®ä¸»é¢˜ï¼Œè€Œæ‚Ÿç©ºæ˜¯ä»£ç†ä¸»é¢˜ï¼Œä»–å·§å¦™çš„å®ç°äº†â€é«˜å°å§çš„ç¥è²Œâ€ï¼›çŒªå…«æˆ’å°±æ˜¯å®¢æˆ·ç«¯ï¼ŒçŒªå…«æˆ’æ ¹æœ¬åˆ†ä¸æ¸…â€æ‚Ÿç©ºå‡æ‰®çš„é«˜å°å§â€å’Œâ€é«˜å°å§æœ¬äººâ€ã€‚</p><p>å¯¹åº”çš„ç±»å›¾å¦‚ä¸‹ï¼š<br><img src="/images/media/pattern11_03.jpg" alt="pattern11_03"></p><p>ä¸‹é¢æ˜¯å„ä¸ªè§’è‰²å¯¹åº”çš„ç±»ã€‚</p><h2 id="æŠ½è±¡ä¸»ä½“"><a href="#æŠ½è±¡ä¸»ä½“" class="headerlink" title="æŠ½è±¡ä¸»ä½“"></a>æŠ½è±¡ä¸»ä½“</h2><p>æŠ½è±¡ä¸»é¢˜æ˜¯â€é«˜å°å§çš„ç¥è²Œâ€ï¼Œå®ƒå¯¹åº”çš„ç±»æ˜¯AbstractAppearanceã€‚</p><pre><code>abstract public class AbstractAppearance {    public abstract void smile();}</code></pre><h2 id="çœŸå®ä¸»é¢˜"><a href="#çœŸå®ä¸»é¢˜" class="headerlink" title="çœŸå®ä¸»é¢˜"></a>çœŸå®ä¸»é¢˜</h2><p>çœŸå®ä¸»é¢˜æ˜¯â€é«˜å°å§æœ¬äººâ€ï¼Œå®ƒå¯¹åº”çš„ç±»æ˜¯MissGaoã€‚</p><pre><code>public class MissGao extends AbstractAppearance {    @Override    public void smile() {        System.out.println(&quot;Miss Gao smiles.&quot;);    }}</code></pre><h2 id="ä»£ç†ä¸»é¢˜"><a href="#ä»£ç†ä¸»é¢˜" class="headerlink" title="ä»£ç†ä¸»é¢˜"></a>ä»£ç†ä¸»é¢˜</h2><p>ä»£ç†ä¸»é¢˜æ˜¯â€æ‚Ÿç©ºâ€ï¼Œå®ƒå¯¹åº”çš„ç±»æ˜¯WuKongã€‚</p><pre><code>public class WuKong extends AbstractAppearance {    AbstractAppearance missGao = new MissGao();    @Override    public void smile() {        missGao.smile();                System.out.println(&quot;Actual, it&apos;s wukong smiles.&quot;);    }}</code></pre><h2 id="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"><a href="#å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº"></a>å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº</h2><p>å®¢æˆ·ç«¯æ˜¯â€å…«æˆ’â€ï¼Œå®ƒå¯¹åº”çš„ç±»æ˜¯BaJieã€‚</p><pre><code>public class BaJie {    public static void main(String[] args) {        // å…«æˆ’åªè®¤è¯†&quot;é«˜å°å§çš„æ ·è²Œ&quot;ï¼Œè€Œè¯¥&quot;é«˜å°å§çš„æ ·è²Œ&quot;å®é™…ä¸Šæ˜¯æ‚Ÿç©ºå‡æ‰®çš„ã€‚        AbstractAppearance appearance = new WuKong();        appearance.smile();    }}</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>Miss Gao smiles.Actual, it&apos;s wukong smiles.</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä»£ç†æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä»£ç†æ¨¡å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä»£ç†æ¨¡å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;ä»£ç†æ¨¡å¼ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ä»£ç†(Proxy)æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ã€‚ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ä¾‹å­å°±æ˜¯â€Windowsçš„å¿«æ·æ–¹å¼â€ã€‚Windowså¿«æ·æ–¹å¼ï¼Œå¯ä»¥ä½¿ä»»ä½•å¯¹è±¡åŒæ—¶å‡ºç°åœ¨å¤šä¸ªåœ°æ–¹è€Œä¸å¿…ä¿®æ”¹åŸå¯¹è±¡ã€‚å¯¹å¿«æ·æ–¹å¼çš„è°ƒç”¨å®Œå…¨ä¸å¯¹åŸå¯¹è±¡çš„è°ƒç”¨ä¸€æ ·ï¼Œæ¢è¨€ä¹‹ï¼Œå¿«æ·æ–¹å¼å¯¹å®¢æˆ·ç«¯æ˜¯å®Œå…¨é€æ˜çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://blog.flyfox.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="https://blog.flyfox.top/tags/java/"/>
    
      <category term="ä»£ç†æ¨¡å¼" scheme="https://blog.flyfox.top/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
